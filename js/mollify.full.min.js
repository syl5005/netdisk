(function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(b.acceptData(e)){var s,o,u=b.expando,a="string"==typeof n,f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if(h&&c[h]&&(i||c[h].data)||!a||r!==t)return h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n)),s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],null==o&&(o=s[b.camelCase(n)])):o=s,o}}function q(e,t,n){if(b.acceptData(e)){var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(u[a]){if(t&&(s=n?u[a]:u[a].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}(n||(delete u[a].data,U(u[a])))&&(o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null)}}}function R(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(F,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=b.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=b.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,b.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if("*"!==r){if("*"!==f&&f!==r){if(i=o[f+" "+r]||o["* "+r],!i)for(n in o)if(s=n.split(" "),s[1]===r&&(i=o[f+" "+s[0]]||o["* "+s[0]])){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;s>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e)if(r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],$n.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show"))continue;v.push(i)}if(s=v.length){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;s>i;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(D(),b.ready())},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=s.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||b.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r));return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&N.test(n.replace(k,"@").replace(L,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:y&&!y.call("﻿ ")?function(e){return null==e?"":y.call(e)}:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(P(Object(e))?b.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===b.type(r)){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=null==e.frameElement&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e="string"==typeof e?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!a||i&&!f||(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,s=1===i?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip,b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];a&&(n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===p.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null)}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length&&(u=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>o;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),s.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=b.isFunction(e),this.each(function(n){var s,o=b(this);1===this.nodeType&&(s=i?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===i?b.prop(e,n,r):(o=1!==a||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z)),r===t?s&&o&&"get"in s&&null!==(u=s.get(e,n))?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),null==u?t:u):null!==r?s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&1===e.nodeType)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),s="boolean"==typeof r?Y&&G?null!=i:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},Y&&G||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(
e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0;e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(m&&(l=m.events)){t=(t||"").match(E)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||b.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)b.event.remove(e,p+t[f],n,r,!0);b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+b.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[b.expando]?n:new b.Event(v,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{},o||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!o&&!c.noBubble&&!b.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!(o||n.isDefaultPrevented()||c._default&&c._default.apply(i.ownerDocument,r)!==!1||"click"===v&&b.nodeName(i,"a")||!b.acceptData(i)||!a||!i[v]||b.isWindow(i))){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&s.addEventListener(e,r,!0)},teardown:function(){0===--n&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;if((t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){if(h=!0,v=w,m=t,y=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){(!n||(r=U.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(s=[])),n=!1,(r=z.exec(u))&&(n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length));for(o in i.filter)!(r=V[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&"parentNode"===i,o=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[i])if(1===t.nodeType||s)if(l=t[w]||(t[w]={}),(f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else if(f=l[i]=[c],f[1]=e(t,n,u)||r,f[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:mt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;s>a;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{if(n=i.filter[e[a].type].apply(null,e[a].matches),n[w]){for(r=++a;s>r;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,r>a&&yt(e.slice(a,r)),s>r&&yt(e=e.slice(r)),s>r&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=null==S?1:Math.random()||.1;for(E&&(f=a!==c&&a,r=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!p&&i.relative[o[1].type]){if(t=i.find.ID(a.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){if(a=o[s],i.relative[f=a.type])break;if((l=i.find[f])&&(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=r.length&&pt(o),!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=RegExp("^"+H+"*,"+H+"*"),z=RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=RegExp(q),X=RegExp("^"+j+"$"),V={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),NAME:RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+I),PSEUDO:RegExp("^"+q),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;return n!==c&&9===n.nodeType&&n.documentElement?(c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==L?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,n){return typeof n.getElementsByName!==L?n.getElementsByName(name):t},i.find.CLASS=S.getByClassName&&function(e,n){return typeof n.getElementsByClassName===L||p?t:n.getElementsByClassName(e)},v=[],d=[":focus"],(S.qsa=rt(n.querySelectorAll))&&(ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=RegExp(d.join("|")),v=RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;return e===t?(a=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c):c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']"),!(!S.matchesSelector||p||v&&v.test(t)||d.test(t)))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;if(a=!S.detectDuplicates,e.sort(y),a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[x,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!b(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support
.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(1>=c||"string"!=typeof v||b.support.checkClone)&&Tt.test(v))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c&&(f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,1===f.childNodes.length&&(f=i),i)){for(n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;c>l;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o)for(a=u[u.length-1].ownerDocument,b.map(u,Dt),l=0;o>l;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")));f=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===b.type(s))b.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===b.inArray(s,r))&&(o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;null!=(n=e[u]);u++)if((t||b.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+w+")(.*)$","i"),Jt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=b.camelCase(n),f=e.style;if(n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||b.cssNumber[a]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||b.contains(e.ownerDocument,e)||(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==w&&(w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r)),e>=200&&300>e||304===e?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),204===e?(l=!0,T="nocontent"):304===e?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===w)return x;a=c.global,a&&0===b.active++&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==w){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(2>w))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){if(n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&1!==a&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=("absolute"===r||"fixed"===r)&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window),function(e){function l(e){if(l[e]!=null)return l[e];var n;if(e=="bug-string-char-index")n="a"[0]!="a";else if(e=="json")n=l("json-stringify")&&l("json-parse");else{var r,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(e=="json-stringify"){var o=u.stringify,f=typeof o=="function"&&a;if(f){(r=function(){return 1}).toJSON=r;try{f=o(0)==="0"&&o(new Number)==="0"&&o(new String)=='""'&&o(t)===i&&o(i)===i&&o()===i&&o(r)==="1"&&o([r])=="[1]"&&o([i])=="[null]"&&o(null)=="null"&&o([i,t,null])=="[null,null,null]"&&o({a:[r,true,false,null,"\0\b\n\f\r	"]})==s&&o(null,r)==="1"&&o([1,2],null,1)=="[\n 1,\n 2\n]"&&o(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&o(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&o(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&o(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(c){f=!1}}n=f}if(e=="json-parse"){var h=u.parse;if(typeof h=="function")try{if(h("0")===0&&!h(!1)){r=h(s);var p=r["a"].length==5&&r.a[0]===1;if(p){try{p=!h('"	"')}catch(c){}if(p)try{p=h("01")!==1}catch(c){}}}}catch(c){p=!1}n=p}}return l[e]=!!n}var t={}.toString,n,r,i,s=typeof define=="function"&&define.amd,o=typeof JSON=="object"&&JSON,u=typeof exports=="object"&&exports&&!exports.nodeType&&exports;u&&o?(u.stringify=o.stringify,u.parse=o.parse):u=e.JSON=o||{};var a=new Date(-0xc782b5b800cec);try{a=a.getUTCFullYear()==-109252&&a.getUTCMonth()===0&&a.getUTCDate()===1&&a.getUTCHours()==10&&a.getUTCMinutes()==37&&a.getUTCSeconds()==6&&a.getUTCMilliseconds()==708}catch(f){}l["bug-string-char-index"]=null,l.json=null,l["json-stringify"]=null,l["json-parse"]=null;if(!l("json")){var c="[object Function]",h="[object Date]",p="[object Number]",d="[object String]",v="[object Array]",m="[object Boolean]",g=l("bug-string-char-index");if(!a)var y=Math.floor,b=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(e,t){return b[t]+365*(e-1970)+y((e-1969+(t=+(t>1)))/4)-y((e-1901+t)/100)+y((e-1601+t)/400)};(n={}.hasOwnProperty)||(n=function(e){var r={},i;return(r.__proto__=null,r.__proto__={toString:1},r).toString!=t?n=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(i=r.constructor,n=function(e){var t=(this.constructor||i).prototype;return e in this&&!(e in t&&this[e]===t[e])}),r=null,n.call(this,e)});var E={"boolean":1,number:1,string:1,"undefined":1},S=function(e,t){var n=typeof e[t];return n=="object"?!!e[t]:!E[n]};r=function(e,i){var s=0,o,u,a;(o=function(){this.valueOf=0}).prototype.valueOf=0,u=new o;for(a in u)n.call(u,a)&&s++;return o=u=null,s?s==2?r=function(e,r){var i={},s=t.call(e)==c,o;for(o in e)(!s||o!="prototype")&&!n.call(i,o)&&(i[o]=1)&&n.call(e,o)&&r(o)}:r=function(e,r){var i=t.call(e)==c,s,o;for(s in e)(!i||s!="prototype")&&n.call(e,s)&&!(o=s==="constructor")&&r(s);(o||n.call(e,s="constructor"))&&r(s)}:(u=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(e,r){var i=t.call(e)==c,s,o,a=!i&&typeof e.constructor!="function"&&S(e,"hasOwnProperty")?e.hasOwnProperty:n;for(s in e)(!i||s!="prototype")&&a.call(e,s)&&r(s);for(o=u.length;s=u[--o];a.call(e,s)&&r(s));}),r(e,i)};if(!l("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",N=function(e,t){return(T+(t||0)).slice(-e)},C="\\u00",k=function(e){var t='"',n=0,r=e.length,i=r>10&&g,s;i&&(s=e.split(""));for(;n<r;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=x[o];break;default:if(o<32){t+=C+N(2,o.toString(16));break}t+=i?s[n]:g?e.charAt(n):e[n]}}return t+'"'},L=function(e,s,o,u,a,f,l){var c,g,b,E,S,x,T,C,A,O,M,_,D,P,H,B,j;try{c=s[e]}catch(F){}if(typeof c=="object"&&c){g=t.call(c);if(g==h&&!n.call(c,"toJSON"))if(c>-1/0&&c<1/0){if(w){S=y(c/864e5);for(b=y(S/365.2425)+1970-1;w(b+1,0)<=S;b++);for(E=y((S-w(b,0))/30.42);w(b,E+1)<=S;E++);S=1+S-w(b,E),x=(c%864e5+864e5)%864e5,T=y(x/36e5)%24,C=y(x/6e4)%60,A=y(x/1e3)%60,O=x%1e3}else b=c.getUTCFullYear(),E=c.getUTCMonth(),S=c.getUTCDate(),T=c.getUTCHours(),C=c.getUTCMinutes(),A=c.getUTCSeconds(),O=c.getUTCMilliseconds();c=(b<=0||b>=1e4?(b<0?"-":"+")+N(6,b<0?-b:b):N(4,b))+"-"+N(2,E+1)+"-"+N(2,S)+"T"+N(2,T)+":"+N(2,C)+":"+N(2,A)+"."+N(3,O)+"Z"}else c=null;else typeof c.toJSON=="function"&&(g!=p&&g!=d&&g!=v||n.call(c,"toJSON"))&&(c=c.toJSON(e))}o&&(c=o.call(s,e,c));if(c===null)return"null";g=t.call(c);if(g==m)return""+c;if(g==p)return c>-1/0&&c<1/0?""+c:"null";if(g==d)return k(""+c);if(typeof c=="object"){for(P=l.length;P--;)if(l[P]===c)throw TypeError();l.push(c),M=[],H=f,f+=a;if(g==v){for(D=0,P=c.length;D<P;B||(B=!0),D++)_=L(D,c,o,u,a,f,l),M.push(_===i?"null":_);j=B?a?"[\n"+f+M.join(",\n"+f)+"\n"+H+"]":"["+M.join(",")+"]":"[]"}else r(u||c,function(e){var t=L(e,c,o,u,a,f,l);t!==i&&M.push(k(e)+":"+(a?" ":"")+t),B||(B=!0)}),j=B?a?"{\n"+f+M.join(",\n"+f)+"\n"+H+"}":"{"+M.join(",")+"}":"{}";return l.pop(),j}};u.stringify=function(e,n,r){var i,s,o,u;if(typeof n=="function"||typeof n=="object"&&n)if((u=t.call(n))==c)s=n;else if(u==v){o={};for(var a=0,f=n.length,l;a<f;l=n[a++],(t.call(l)==d||t.call(l)==p)&&(o[l]=1));}if(r)if((u=t.call(r))==p){if((r-=r%1)>0)for(i="",r>10&&(r=10);i.length<r;i+=" ");}else u==d&&(i=r.length<=10?r:r.slice(0,10));return L("",(l={},l[""]=e,l),s,o,i,"",[])}}if(!l("json-parse")){var A=String.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},M,_,D=function(){throw M=_=null,SyntaxError()},P=function(){var e=_,t=e.length,n,r,i,s,o;while(M<t){o=e.charCodeAt(M);switch(o){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return n=g?e.charAt(M):e[M],M++,n;case 34:for(n="@",M++;M<t;){o=e.charCodeAt(M);if(o<32)D();else if(o==92){o=e.charCodeAt(++M);switch(o){case 92:case 34:case 47:case 98:case 116:case 110:case 102:
case 114:n+=O[o],M++;break;case 117:r=++M;for(i=M+4;M<i;M++)o=e.charCodeAt(M),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||D();n+=A("0x"+e.slice(r,M));break;default:D()}}else{if(o==34)break;o=e.charCodeAt(M),r=M;while(o>=32&&o!=92&&o!=34)o=e.charCodeAt(++M);n+=e.slice(r,M)}}if(e.charCodeAt(M)==34)return M++,n;D();default:r=M,o==45&&(s=!0,o=e.charCodeAt(++M));if(o>=48&&o<=57){o==48&&(o=e.charCodeAt(M+1),o>=48&&o<=57)&&D(),s=!1;for(;M<t&&(o=e.charCodeAt(M),o>=48&&o<=57);M++);if(e.charCodeAt(M)==46){i=++M;for(;i<t&&(o=e.charCodeAt(i),o>=48&&o<=57);i++);i==M&&D(),M=i}o=e.charCodeAt(M);if(o==101||o==69){o=e.charCodeAt(++M),(o==43||o==45)&&M++;for(i=M;i<t&&(o=e.charCodeAt(i),o>=48&&o<=57);i++);i==M&&D(),M=i}return+e.slice(r,M)}s&&D();if(e.slice(M,M+4)=="true")return M+=4,!0;if(e.slice(M,M+5)=="false")return M+=5,!1;if(e.slice(M,M+4)=="null")return M+=4,null;D()}}return"$"},H=function(e){var t,n;e=="$"&&D();if(typeof e=="string"){if((g?e.charAt(0):e[0])=="@")return e.slice(1);if(e=="["){t=[];for(;;n||(n=!0)){e=P();if(e=="]")break;n&&(e==","?(e=P(),e=="]"&&D()):D()),e==","&&D(),t.push(H(e))}return t}if(e=="{"){t={};for(;;n||(n=!0)){e=P();if(e=="}")break;n&&(e==","?(e=P(),e=="}"&&D()):D()),(e==","||typeof e!="string"||(g?e.charAt(0):e[0])!="@"||P()!=":")&&D(),t[e.slice(1)]=H(P())}return t}D()}return e},B=function(e,t,n){var r=j(e,t,n);r===i?delete e[t]:e[t]=r},j=function(e,n,i){var s=e[n],o;if(typeof s=="object"&&s)if(t.call(s)==v)for(o=s.length;o--;)B(s,o,i);else r(s,function(e){B(s,e,i)});return i.call(e,n,s)};u.parse=function(e,n){var r,i;return M=0,_=""+e,r=H(P()),P()!="$"&&D(),M=_=null,n&&t.call(n)==c?j((i={},i[""]=r,i),"",n):r}}}s&&define(function(){return u})}(this),function(e){function c(t,n,r,o){var u={data:o||o===0||o===!1?o:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:b,nest:w,wrap:E,html:S,update:x};return t&&e.extend(u,t,{nodes:[],parent:n}),r&&(u.tmpl=r,u._ctnt=u._ctnt||u.tmpl(e,u),u.key=++a,(l.length?s:i)[a]=u),u}function h(t,r,i){var s,o=i?e.map(i,function(e){return typeof e=="string"?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+n+'="'+t.key+'" $2'):e:h(e,t,e._ctnt)}):t;return r?o:(o=o.join(""),o.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,r,i){s=e(r).get(),y(s),n&&(s=p(n).concat(s)),i&&(s=s.concat(p(i)))}),s?s:p(o))}function p(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function d(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,s,o,u){var a=e.tmpl.tag[r],f,l,c;if(!a)throw"Unknown template tag: "+r;return f=a._default||[],o&&!/\w$/.test(s)&&(s+=o,o=""),s?(s=m(s),u=u?","+m(u)+")":o?")":"",l=o?s.indexOf(".")>-1?s+m(o):"("+s+").call($item"+u:s,c=o?l:"(typeof("+s+")==='function'?("+s+").call($item):("+s+"))"):c=l=f.$1||"null",i=m(i),"');"+a[n?"close":"open"].split("$notnull_1").join(s?"typeof("+s+")!=='undefined' && ("+s+")!=null":"true").split("$1a").join(c).split("$1").join(l).split("$2").join(i||f.$2||"")+"__.push('"})+"');}return __;")}function v(t,n){t._wrap=h(t,!0,e.isArray(n)?n:[r.test(n)?n:e(n).html()]).join("")}function m(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function g(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function y(t){function v(t){function v(e){e+=r,p=l[e]=l[e]||c(p,i[p.parent.key+r]||p.parent)}var o,u=t,h,p,d;if(d=t.getAttribute(n)){while(u.parentNode&&(u=u.parentNode).nodeType===1&&!(o=u.getAttribute(n)));o!==d&&(u=u.parentNode?u.nodeType===11?0:u.getAttribute(n)||0:0,(p=i[d])||(p=s[d],p=c(p,i[u]||s[u]),p.key=++a,i[a]=p),f&&v(d)),t.removeAttribute(n)}else f&&(p=e.data(t,"tmplItem"))&&(v(p.key),i[p.key]=p,u=e.data(t.parentNode,"tmplItem"),u=u?u.key:0);if(p){h=p;while(h&&h.key!=u)h.nodes.push(t),h=h.parent;delete p._ctnt,delete p._wrap,e.data(t,"tmplItem",p)}}var r="_"+f,o,u,l={},h,p,d;for(h=0,p=t.length;h<p;h++){if((o=t[h]).nodeType!==1)continue;u=o.getElementsByTagName("*");for(d=u.length-1;d>=0;d--)v(u[d]);v(o)}}function b(e,t,n,r){if(!e)return l.pop();l.push({_:e,tmpl:t,item:this,data:n,options:r})}function w(t,n,r){return e.tmpl(e.template(t),n,r,this)}function E(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function S(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||g(e)})}function x(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var t=e.fn.domManip,n="_tmplitem",r=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,i={},s={},o,u={key:0,data:{}},a=0,f=0,l=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var s=[],u=e(r),a,l,c,h,p=this.length===1&&this[0].parentNode;o=i||{};if(p&&p.nodeType===11&&p.childNodes.length===1&&u.length===1)u[n](this[0]),s=this;else{for(l=0,c=u.length;l<c;l++)f=l,a=(l>0?this.clone(!0):this).get(),e(u[l])[n](a),s=s.concat(a);f=0,s=this.pushStack(s,t,u.selector)}return h=o,o=null,e.tmpl.complete(h),s}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(n,r,s){if(n[0]&&e.isArray(n[0])){var u=e.makeArray(arguments),a=n[0],l=a.length,c=0,h;while(c<l&&!(h=e.data(a[c++],"tmplItem")));h&&f&&(u[2]=function(t){e.tmpl.afterManip(this,t,s)}),t.apply(this,u)}else t.apply(this,arguments);return f=0,!o&&e.tmpl.complete(i),this}}),e.extend({tmpl:function(t,n,r,o){var a,f=!o;if(f)o=u,t=e.template[t]||e.template(null,t),s={};else if(!t)return t=o.tmpl,i[o.key]=o,o.nodes=[],o.wrapped&&v(o,o.wrapped),e(h(o,null,o.tmpl(e,o)));return t?(typeof n=="function"&&(n=n.call(o||{})),r&&r.wrapped&&v(r,r.wrapped),a=e.isArray(n)?e.map(n,function(e){return e?c(r,o,t,e):null}):[c(r,o,t,n)],f?e(h(o,null,a)):a):[]},tmplItem:function(t){var n;t instanceof e&&(t=t[0]);while(t&&t.nodeType===1&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode));return n||u},template:function(t,n){return n?(typeof n=="string"?n=d(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",d(n.innerHTML))),typeof t=="string"?e.template[t]=n:n):t?typeof t!="string"?e.template(null,t):e.template[t]||e.template(null,r.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){i={}},afterManip:function(t,n,r){var i=n.nodeType===11?e.makeArray(n.childNodes):n.nodeType===1?[n]:[];r.call(t,n),y(i),f++}})}(jQuery),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])?!1:(this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(
){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=n.css("overflow")!=="hidden",this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=t.pageX,f=t.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(g<u-v||m>a+v||b<f-v||y>l+v||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width
,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}function r(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||r(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,u,a,f,l,c,h,p,d=null,v=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(d&&e.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],v=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!d)return;if(this.containers.length===1)this.containers[v].containerCache.over||(this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1);else{o=1e4,u=null,p=d.floating||r(this.currentItem),a=p?"left":"top",f=p?"width":"height",l=this.positionAbs[a]+this.offset.click[a];for(s=this.items.length-1;s>=0;s--){if(!e.contains(this.containers[v].element[0],this.items[s].item[0]))continue;if(this.items[s].item[0]===this.currentItem[0])continue;if(p&&!n(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))continue;c=this.items[s].item.offset()[a],h=!1,Math.abs(c-l)>Math.abs(c+this.items[s][f]-l)&&(h=!0,c+=this.items[s][f]),Math.abs(c-l)<o&&(o=Math.abs(c-l),u=this.items[s],this.direction=h?"up":"down")}if(!u&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[v])return;u?this._rearrange(t,u,null,!0):this._rearrange(t,null,this.containers[v].element,!0),this._trigger("change",t,this._uiHash()),this.containers[v]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[v],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!t){this._trigger("beforeStop",e,this._uiHash());for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e
.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),r=this;if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){r.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o;i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("carousel").pause().to(o).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning||this.$element.hasClass("in"))return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning||!this.$element.hasClass("in"))return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=e.extend({},e.fn.collapse.defaults,r.data(),typeof n=="object"&&n);i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){"use strict";function r(){e(".dropdown-backdrop").remove(),e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t,n){t.options=n;var r=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){r.parent().removeClass("open"),t.options&&t.options.onhide&&t.options.onhide()})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o?this.options&&this.options.onhide&&this.options.onhide():("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",r),s.toggleClass("open"),this.options&&this.options.onshow&&this.options.onshow(s)),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;u=i(r),a=u.hasClass("open");if(!a||a&&n.keyCode==27)return n.which==27&&u.find(t).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),n.keyCode==38&&f>0&&f--,n.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown"),s=e.extend({},r.data(),typeof t=="object"&&t);i||r.data("dropdown",i=new n(this,s)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e.fn[this.type].defaults,r={},i;this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+(!e.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),function(e){function c(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function h(e,t,n){return t<e.length?e:Array(t-e.length+1).join(n||" ")+e}function p(e,t,n,r,i,s){return t&&n?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(s?' class="collapse in"':"")+">"+'<div class="datepicker">'+v.template+"</div>"+"</li>"+'<li class="picker-switch accordion-toggle"><a><i class="'+e+'"></i></a></li>'+"<li"+(s?' class="collapse"':"")+">"+'<div class="timepicker">'+m.getTemplate(r,i)+"</div>"+"</li>"+"</ul>"+"</div>":n?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+m.getTemplate(r,i)+"</div>"+"</div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+v.template+"</div>"+"</div>"}function d(){return new Date(Date.UTC.apply(Date,arguments))}var t=window.orientation!=undefined,n=function(e,t){this.id=i++,this.init(e,t)},r=function(e){return typeof e=="string"?new Date(e):e};n.prototype={constructor:n,init:function(t,n){var r;if(!n.pickTime&&!n.pickDate)throw new Error("Must choose at least one picker");this.options=n,this.$element=e(t),this.language=n.language in s?n.language:"en",this.pickDate=n.pickDate,this.pickTime=n.pickTime,this.isInput=this.$element.is("input"),this.component=!1;if(this.$element.find(".input-append")||this.$element.find(".input-prepend"))this.component=this.$element.find(".add-on");this.format=n.format,this.format||(this.isInput?this.format=this.$element.data("format"):this.format=this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(r=this.component.find("i")),this.pickTime&&(r&&r.length&&(this.timeIcon=r.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),r.addClass(this.timeIcon)),this.pickDate&&(r&&r.length&&(this.dateIcon=r.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),r.removeClass(this.timeIcon),r.addClass(this.dateIcon)),this.widget=e(p(this.timeIcon,n.pickDate,n.pickTime,n.pick12HourFormat,n.pickSeconds,n.collapse)).appendTo("body"),this.minViewMode=n.minViewMode||this.$element.data("date-minviewmode")||0;if(typeof this.minViewMode=="string")switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=n.viewMode||this.$element.data("date-viewmode")||0;if(typeof this.viewMode=="string")switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=n.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=this.weekStart===0?6:this.weekStart-1,this.setStartDate(n.startDate||this.$element.data("date-startdate")),this.setEndDate(n.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(e){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){var e=this.widget.find(".collapse");for(var t=0;t<e.length;t++){var n=e.eq(t).data("collapse");if(n&&n.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var e="";this._unset||(e=this.formatDate(this._date));if(!this.isInput){if(this.component){var t=this.$element.find("input");t.val(e),this._resetMaskPos(t)}this.$element.data("date",e)}else this.$element.val(e),this._resetMaskPos(this.$element)},setValue:function(e){e?this._unset=!1:this._unset=!0,typeof e=="string"?this._date=this.parseDate(e):e&&(this._date=new Date(e)),this.set(),this.viewDate=d(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(e){e?this.setValue(e.valueOf()):this.setValue(null)},setStartDate:function(e){e instanceof Date?this.startDate=e:typeof e=="string"?(this.startDate=new d(e),this.startDate.getUTCFullYear()||(this.startDate=-Infinity)):this.startDate=-Infinity,this.viewDate&&this.update()},setEndDate:function(e){e instanceof Date?this.endDate=e:typeof e=="string"?(this.endDate=new d(e),this.endDate.getUTCFullYear()||(this.endDate=Infinity)):this.endDate=Infinity,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var e=this._date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},setLocalDate:function(e){e?this.setValue(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())):this.setValue(null)},place:function(){var t="absolute",n=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(),n.top=n.top+this.height;var r=e(window);this.options.width!=undefined&&this.widget.width(this.options.width),this.options.orientation=="left"&&(this.widget.addClass("left-oriented"),n.left=n.left-this.widget.width()+20),this._isInFixed()&&(t="fixed",n.top-=r.scrollTop(),n.left-=r.scrollLeft()),r.width()<n.left+this.widget.outerWidth()?(n.right=r.width()-n.left-this.width,n.left="auto",this.widget.addClass
("pull-right")):(n.right="auto",this.widget.removeClass("pull-right")),this.widget.css({position:t,top:n.top,left:n.left,right:n.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(e){var t=e;if(!t){this.isInput?t=this.$element.val():t=this.$element.find("input").val(),t&&(this._date=this.parseDate(t));if(!this._date){var n=new Date;this._date=d(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}}this.viewDate=d(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){var t=this.weekStart,n=e("<tr>");while(t<this.weekStart+7)n.append('<th class="dow">'+s[this.language].daysMin[t++%7]+"</th>");this.widget.find(".datepicker-days thead").append(n)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+s[this.language].monthsShort[t++]+"</span>";this.widget.find(".datepicker-months td").append(e)},fillDate:function(){var t=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),r=d(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),i=typeof this.startDate=="object"?this.startDate.getUTCFullYear():-Infinity,o=typeof this.startDate=="object"?this.startDate.getUTCMonth():-1,u=typeof this.endDate=="object"?this.endDate.getUTCFullYear():Infinity,a=typeof this.endDate=="object"?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(s[this.language].months[n]+" "+t);var f=d(t,n-1,28,0,0,0,0),l=v.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(l),f.setUTCDate(l-(f.getUTCDay()-this.weekStart+7)%7),(t==i&&n<=o||t<i)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(t==u&&n>=a||t>u)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var c=new Date(f.valueOf());c.setUTCDate(c.getUTCDate()+42),c=c.valueOf();var h=[],p,m;while(f.valueOf()<c){f.getUTCDay()===this.weekStart&&(p=e("<tr>"),h.push(p)),m="";if(f.getUTCFullYear()<t||f.getUTCFullYear()==t&&f.getUTCMonth()<n)m+=" old";else if(f.getUTCFullYear()>t||f.getUTCFullYear()==t&&f.getUTCMonth()>n)m+=" new";f.valueOf()===r.valueOf()&&(m+=" active"),f.valueOf()+864e5<=this.startDate&&(m+=" disabled"),f.valueOf()>this.endDate&&(m+=" disabled"),p.append('<td class="day'+m+'">'+f.getUTCDate()+"</td>"),f.setUTCDate(f.getUTCDate()+1)}this.widget.find(".datepicker-days tbody").empty().append(h);var g=this._date.getUTCFullYear(),y=this.widget.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");g===t&&y.eq(this._date.getUTCMonth()).addClass("active"),g-1<i&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),g+1>u&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var b=0;b<12;b++)t==i&&o>b||t<i?e(y[b]).addClass("disabled"):(t==u&&a<b||t>u)&&e(y[b]).addClass("disabled");h="",t=parseInt(t/10,10)*10;var w=this.widget.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),i>t&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),u<t+9&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),t-=1;for(var b=-1;b<11;b++)h+='<span class="year'+(b===-1||b===10?" old":"")+(g===t?" active":"")+(t<i||t>u?" disabled":"")+'">'+t+"</span>",t+=1;w.html(h)},fillHours:function(){var e=this.widget.find(".timepicker .timepicker-hours table");e.parent().hide();var t="";if(this.options.pick12HourFormat){var n=1;for(var r=0;r<3;r+=1){t+="<tr>";for(var i=0;i<4;i+=1){var s=n.toString();t+='<td class="hour">'+h(s,2,"0")+"</td>",n++}t+="</tr>"}}else{var n=0;for(var r=0;r<6;r+=1){t+="<tr>";for(var i=0;i<4;i+=1){var s=n.toString();t+='<td class="hour">'+h(s,2,"0")+"</td>",n++}t+="</tr>"}}e.html(t)},fillMinutes:function(){var e=this.widget.find(".timepicker .timepicker-minutes table");e.parent().hide();var t="",n=0;for(var r=0;r<5;r++){t+="<tr>";for(var i=0;i<4;i+=1){var s=n.toString();t+='<td class="minute">'+h(s,2,"0")+"</td>",n+=3}t+="</tr>"}e.html(t)},fillSeconds:function(){var e=this.widget.find(".timepicker .timepicker-seconds table");e.parent().hide();var t="",n=0;for(var r=0;r<5;r++){t+="<tr>";for(var i=0;i<4;i+=1){var s=n.toString();t+='<td class="second">'+h(s,2,"0")+"</td>",n+=3}t+="</tr>"}e.html(t)},fillTime:function(){if(!this._date)return;var e=this.widget.find(".timepicker span[data-time-component]"),t=e.closest("table"),n=this.options.pick12HourFormat,r=this._date.getUTCHours(),i="AM";n&&(r>=12&&(i="PM"),r===0?r=12:r!=12&&(r%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(i)),r=h(r.toString(),2,"0");var s=h(this._date.getUTCMinutes().toString(),2,"0"),o=h(this._date.getUTCSeconds().toString(),2,"0");e.filter("[data-time-component=hours]").text(r),e.filter("[data-time-component=minutes]").text(s),e.filter("[data-time-component=seconds]").text(o)},click:function(t){t.stopPropagation(),t.preventDefault(),this._unset=!1;var n=e(t.target).closest("span, td, th");if(n.length===1&&!n.is(".disabled"))switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var r=this.viewDate,i=v.modes[this.viewMode].navFnc,s=v.modes[this.viewMode].navStep;n[0].className==="prev"&&(s*=-1),r["set"+i](r["get"+i]()+s),this.fillDate(),this.set()}break;case"span":if(n.is(".month")){var o=n.parent().find("span").index(n);this.viewDate.setUTCMonth(o)}else{var u=parseInt(n.text(),10)||0;this.viewDate.setUTCFullYear(u)}this.viewMode!==0&&(this._date=d(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(n.is(".day")){var a=parseInt(n.text(),10)||1,o=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCFullYear();n.is(".old")?o===0?(o=11,u-=1):o-=1:n.is(".new")&&(o==11?(o=0,u+=1):o+=1),this._date=d(u,o,a,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=d(u,o,Math.min(28,a),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(e){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(e){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(e){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(e){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(e){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(e){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(e){var t=this._date.getUTCHours();t>=12?t-=12:t+=12,this._date.setUTCHours(t)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=e(t.target),r=parseInt(n.text(),10);if(this.options.pick12HourFormat){var i=this._date.getUTCHours();i>=12?r!=12&&(r=(r+12)%24):r===12?r=0:r%=12}this._date.setUTCHours(r),this.actions.showPicker.call(this)},selectMinute:function(t){var n=e(t.target),r=parseInt(n.text(),10);this._date.setUTCMinutes(r),this.actions.showPicker.call(this)},selectSecond:function(t){var n=e(t.target),r=parseInt(n.text(),10);this._date.setUTCSeconds(r),this.actions.showPicker.call(this)}},doAction:function(t){t.stopPropagation(),t.preventDefault(),this._date||(this._date=d(1970,0,0,0,0,0,0));var n=e(t.currentTarget).data("action"),r=this.actions[n].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),r},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},keydown:function(t){var n=this,r=t.which,i=e(t.target);(r==8||r==46)&&setTimeout(function(){n._resetMaskPos(i)})},keypress:function(t){var n=t.which;if(n==8||n==46)return;var r=e(t.target),i=String.fromCharCode(n),s=r.val()||"";s+=i;var o=this._mask[this._maskPos];if(!o)return!1;if(o.end!=s.length)return;if(!o.pattern.test(s.slice(o.start))){s=s.slice(0,s.length-1);while((o=this._mask[this._maskPos])&&o.character)s+=o.character,this._maskPos++;return s+=i,o.end!=s.length?(r.val(s),!1):o.pattern.test(s.slice(o.start))?(r.val(s),this._maskPos++,!1):(r.val(s.slice(0,o.start)),!1)}this._maskPos++},change:function(t){var n=e(t.target),r=n.val();this._formatPattern.test(r)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):r&&r.trim()?(this.setValue(this._date.getTime()),this._date?this.set():n.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(n)},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(e){return this.format.replace(l,function(t){var n,r,i,s=t.length;t==="ms"&&(s=1),r=o[t].property;if(r==="Hours12")i=e.getUTCHours(),i===0?i=12:i!==12&&(i%=12);else{if(r==="Period12")return e.getUTCHours()>=12?"PM":"AM";n="get"+r,i=e[n]()}return n==="getUTCMonth"&&(i+=1),n==="getUTCYear"&&(i=i+1900-2e3),h(i.toString(),s,"0")})},parseDate:function(e){var t,n,r,i,s,o={};if(!(t=this._formatPattern.exec(e)))return null;for(n=1;n<t.length;n++){r=this._propertiesByIndex[n];if(!r)continue;s=t[n],/^\d+$/.test(s)&&(s=parseInt(s,10)),o[r]=s}return this._finishParsingDate(o)},_resetMaskPos:function(e){var t=e.val();for(var n=0;n<this._mask.length;n++){if(this._mask[n].end>t.length){this._maskPos=n;break}if(this._mask[n].end===t.length){this._maskPos=n+1;break}}},_finishParsingDate:function(e){var t,n,r,i,s,o,u;return t=e.UTCFullYear,e.UTCYear&&(t=2e3+e.UTCYear),t||(t=1970),e.UTCMonth?n=e.UTCMonth-1:n=0,r=e.UTCDate||1,i=e.UTCHours||0,s=e.UTCMinutes||0,o=e.UTCSeconds||0,u=e.UTCMilliseconds||0,e.Hours12&&(i=e.Hours12),e.Period12&&(/pm/i.test(e.Period12)?i!=12&&(i=(i+12)%24):i%=12),d(t,n,r,i,s,o,u)},_compileFormat:function(){var e,t,n=[],r=[],i=this.format,s={},u=0,a=0;while(e=f.exec(i))t=e[0],t in o?(u++,s[u]=o[t].property,n.push("\\s*"+o[t].getPattern(this)+"\\s*"),r.push({pattern:new RegExp(o[t].getPattern(this)),property:o[t].property,start:a,end:a+=t.length})):(n.push(c(t)),r.push({pattern:new RegExp(c(t)),character:t,start:a,end:++a})),i=i.slice(t.length);this._mask=r,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+n.join("")+"\\s*$"),this._propertiesByIndex=s},_attachDatePickerEvents:function(){var t=this;this.widget.on("click",".datepicker *",e.proxy(this.click,this)),this.widget.on("click","[data-action]",e.proxy(this.doAction,this)),this.widget.on("mousedown",e.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(n){n.stopPropagation();var r=e(this),i=r.closest("ul"),s=i.find(".collapse.in"),o=i.find(".collapse:not(.in)");if(s&&s.length){var u=s.data("collapse");if(u&&u.transitioning)return;s.collapse("hide"),o.collapse("show"),r.find("i").toggleClass(t.timeIcon+" "+t.dateIcon),t.$element.find(".add-on i").toggleClass(t.timeIcon+" "+t.dateIcon)}}),this.isInput?(this.$element.on({focus:e.proxy(this.show,this),change:e.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)})):(this.$element.on({change:e.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",e.proxy(this.show,this)):this.$element.on("click",e.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){e(window).on("resize.datetimepicker"+this.id,e.proxy(this.place,this)),this.isInput||e(document).on("mousedown.datetimepicker"+this.id,e.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){e(window).off("resize.datetimepicker"+this.id),this.isInput||e(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){var t=this.$element.parents(),n=!1;for(var r=0;r<t.length;r++)if(e(t[r]).css("position")=="fixed"){n=!0;break}return n}return!1}},e.fn.datetimepicker=function(t,r){return this.each(function(){var i=e(this),s=i.data("datetimepicker"),o=typeof t=="object"&&t;s||i.data("datetimepicker",s=new n(this,e.extend({},e.fn.datetimepicker.defaults,o))),typeof t=="string"&&s[t](r)})},e.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-Infinity,endDate:Infinity,collapse:!0},e.fn.datetimepicker.Constructor=n;var i=0,s=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},o={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},u=[];for(var a in o)u.push(a);u[u.length-1]+="\\b",u.push(".");var f=new RegExp(u.join("\\b|"));u.pop();var l=new RegExp(u.join("\\b|"),"g"),v={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};v.template='<div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+"</table>"+"</div>";var m={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};m.getTemplate=function(e,t){return'<div class="timepicker-picker"><table class="table-condensed"'+(e?' data-hour-format="12"':"")+">"+"<tr>"+'<td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr>"+"<tr>"+"<td>"+m.hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+m.minuteTemplate+"</td> "+(t?'<td class="separator">:</td><td>'+m.secondTemplate+"</td>":"")+(e?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+"</tr>"+"<tr>"+'<td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr>"+"</table>"+"</div>"+'<div class="timepicker-hours" data-action="selectHour">'+'<table class="table-condensed">'+"</table>"+"</div>"+'<div class="timepicker-minutes" data-action="selectMinute">'+'<table class="table-condensed">'+"</table>"+"</div>"+(t?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="lightbox"]',"click.dismiss.lightbox",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".lightbox-body").load(this.options.remote),this.cloneSize()};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.centerImage(),t.$element.focus().trigger("shown")}):function(){t.centerImage(),t.$element.focus().trigger("shown")}()})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.lightbox"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideLightbox(),n.options.onHide&&n.options.onHide()},enforceFocus:function(){var t=this;e(document).on("focusin.lightbox",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.lightbox",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.lightbox")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideLightbox()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideLightbox()})},hideLightbox:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()},center:function(){var t=this,n=0;t.h=t.$element.height(),t.w=t.$element.width(),t.$element.css({position:"fixed",left:e(window).width()/2-t.w/2,top:e(window).height()/2-t.h/2-n}),t.enforceFocus()},centerImage:function(){var t=this,n=0,r;t.h=t.$element.height(),t.w=t.$element.width();if(t.options.resizeToFit){n=10,r=t.$element.find(".lightbox-content").find("img:first"),r.data("osizew")||r.data("osizew",r.width()),r.data("osizeh")||r.data("osizeh",r.height());var i=r.data("osizew"),s=r.data("osizeh");r.css("max-width","none"),r.css("max-height","none");var o=40;t.$element.find(".lightbox-header").length>0&&(o+=10),r.css("max-width",e(window).width()-o),r.css("max-height",e(window).height()-o),t.w=r.width(),t.h=r.height()}t.$element.css({position:"fixed",left:e(window).width()/2-t.w/2,top:e(window).height()/2-t.h/2-n}),t.enforceFocus()},cloneSize:function(){var t=this;t.$clone=t.$element.filter(":first").clone().css({position:"absolute",top:-2e3,display:"block",visibility:"visible",opacity:100}).removeClass("fade").appendTo("body"),t.h=t.$clone.height(),t.w=t.$clone.width(),t.$clone.remove(),t.$element.css({position:"fixed",left:e(window).width()/2-t.w/2,top:e(window).height()/2-t.h/2})}},e.fn.lightbox=function(n){return this.each(function(){var r=e(this),i=r.data("lightbox"),s=e.extend({},e.fn.lightbox.defaults,r.data(),typeof n=="object"&&n);i||r.data("lightbox",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.lightbox.defaults={backdrop:!0,keyboard:!0,show:!0,resizeToFit:!0},e.fn.lightbox.Constructor=t,e(document).on("click.lightbox.data-api",'[data-toggle="lightbox"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("lightbox")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data()),o=n.attr("data-image")||!1,u;t.preventDefault(),o&&(i.data("original-content",i.find(".lightbox-content").html()),i.find(".lightbox-content").html('<img border="0" src="'+o+'" />')),i.lightbox(s).one("hide",function(){n.focus()}).one("hidden",function(){o&&(i.find(".lightbox-content").html(i.data("original-content")),o=undefined)})})}(window.jQuery),window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function i(e,t){return r(E.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&g[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+x.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+T.join(r+" ")+r).split(" "),a(i,t,n))}function l(){h.input=function(n){for(var r=0,i=n.length;r<i;r++)k[n[r]]=n[r]in y;return k.list&&(k.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),k}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),h.inputtypes=function(e){for(var r=0,i,s,o,u=e.length;r<u;r++)y.setAttribute("type",s=e[r]),i=y.type!=="text",i&&(y.value=b,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&y.style.WebkitAppearance!==n?(d.appendChild(y),o=t.defaultView,i=o.getComputedStyle&&o.getComputedStyle(y,null).WebkitAppearance!=="textfield"&&y.offsetHeight!==0,d.removeChild(y)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=y.checkValidity&&y.checkValidity()===!1:i=y.value!=b)),C[e[r]]=!!i;return C}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c="2.6.2",h={},p=!0,d=t.documentElement,v="modernizr",m=t.createElement(v),g=m.style,y=t.createElement("input"),b=":)",w={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),S="Webkit Moz O ms",x=S.split(" "),T=S.toLowerCase().split(" "),N={},C={},k={},L=[],A=L.slice,O,M=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:v+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),f.id=v,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),d.style.overflow=a),!!o},_=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var o=e in i;return o||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),o=s(i[e],"function"),s(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),D={}.hasOwnProperty,P;!s(D,"undefined")&&!s(D.call,"undefined")?P=function(e,t){return D.call(e,t)}:P=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=A.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(A.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(A.call(arguments)))};return r}),N.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},N.canvastext=function(){return!!h.canvas&&!!s(t.createElement("canvas").getContext("2d").fillText,"function")},N.postmessage=function(){return!!e.postMessage},N.websqldatabase=function(){return!!e.openDatabase},N.indexedDB=function(){return!!f("indexedDB",e)},N.hashchange=function(){return _("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},N.history=function(){return!!e.history&&!!history.pushState},N.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},N.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},N.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},N.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},N.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},N.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},N.webworkers=function(){return!!e.Worker},N.applicationcache=function(){return!!e.applicationCache};for(var H in N)P(N,H)&&(O=H.toLowerCase(),h[O]=N[H](),L.push((h[O]?"":"no-")+O));return h.input||l(),h.addTest=function(e,t){if(typeof e=="object")for(var r in e)P(e,r)&&h.addTest(r,e[r]);else{e=e.toLowerCase();if(h[e]!==n)return h;t=typeof t=="function"?t():t,typeof p!="undefined"&&p&&(d.className+=" "+(t?"":"no-")+e),h[e]=t}return h},r(""),m=y=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=v[e[p]];return t||(t={},d++,e[p]=d,v[d]=t),t}function s(e,n,r){n||(n=t);if(m)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():c.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!l.test(e)?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(m)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function a(e){e||(e=t);var r=i(e);return g.shivCSS&&!h&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||u(e,r),e}var f=e.html5||{},l=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,p="_html5shiv",d=0,v={},m;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,m=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){h=!0,m=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:m,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=g,a(t)}(this,t),h._version=c,h._prefixes=E,h._domPrefixes=T,h._cssomPrefixes=x,h.hasEvent=_,h.testProp=function(e){return u([e])},h.testAllProps=f,h.testStyles=M,d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+L.join(" "):""),h}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(
e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},Date.getMonthNumberFromName=function(e){var t=Date.CultureInfo.monthNames,n=Date.CultureInfo.abbreviatedMonthNames,r=e.toLowerCase();for(var i=0;i<t.length;i++)if(t[i].toLowerCase()==r||n[i].toLowerCase()==r)return i;return-1},Date.getDayNumberFromName=function(e){var t=Date.CultureInfo.dayNames,n=Date.CultureInfo.abbreviatedDayNames,r=Date.CultureInfo.shortestDayNames,i=e.toLowerCase();for(var s=0;s<t.length;s++)if(t[s].toLowerCase()==i||n[s].toLowerCase()==i)return s;return-1},Date.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},Date.getDaysInMonth=function(e,t){return[31,Date.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},Date.getTimezoneOffset=function(e,t){return t||!1?Date.CultureInfo.abbreviatedTimeZoneDST[e.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[e.toUpperCase()]},Date.getTimezoneAbbreviation=function(e,t){var n=t||!1?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,r;for(r in n)if(n[r]===e)return r;return null},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.compareTo=function(e){if(isNaN(this))throw new Error(this);if(e instanceof Date&&!isNaN(e))return this>e?1:this<e?-1:0;throw new TypeError(e)},Date.prototype.equals=function(e){return this.compareTo(e)===0},Date.prototype.between=function(e,t){var n=this.getTime();return n>=e.getTime()&&n<=t.getTime()},Date.prototype.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},Date.prototype.addSeconds=function(e){return this.addMilliseconds(e*1e3)},Date.prototype.addMinutes=function(e){return this.addMilliseconds(e*6e4)},Date.prototype.addHours=function(e){return this.addMilliseconds(e*36e5)},Date.prototype.addDays=function(e){return this.addMilliseconds(e*864e5)},Date.prototype.addWeeks=function(e){return this.addMilliseconds(e*6048e5)},Date.prototype.addMonths=function(e){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(t,this.getDaysInMonth())),this},Date.prototype.addYears=function(e){return this.addMonths(e*12)},Date.prototype.add=function(e){if(typeof e=="number")return this._orient=e,this;var t=e;return(t.millisecond||t.milliseconds)&&this.addMilliseconds(t.millisecond||t.milliseconds),(t.second||t.seconds)&&this.addSeconds(t.second||t.seconds),(t.minute||t.minutes)&&this.addMinutes(t.minute||t.minutes),(t.hour||t.hours)&&this.addHours(t.hour||t.hours),(t.month||t.months)&&this.addMonths(t.month||t.months),(t.year||t.years)&&this.addYears(t.year||t.years),(t.day||t.days)&&this.addDays(t.day||t.days),this},Date._validate=function(e,t,n,r){if(typeof e!="number")throw new TypeError(e+" is not a Number.");if(e<t||e>n)throw new RangeError(e+" is not a valid value for "+r+".");return!0},Date.validateMillisecond=function(e){return Date._validate(e,0,999,"milliseconds")},Date.validateSecond=function(e){return Date._validate(e,0,59,"seconds")},Date.validateMinute=function(e){return Date._validate(e,0,59,"minutes")},Date.validateHour=function(e){return Date._validate(e,0,23,"hours")},Date.validateDay=function(e,t,n){return Date._validate(e,1,Date.getDaysInMonth(t,n),"days")},Date.validateMonth=function(e){return Date._validate(e,0,11,"months")},Date.validateYear=function(e){return Date._validate(e,1,9999,"seconds")},Date.prototype.set=function(e){var t=e;return!t.millisecond&&t.millisecond!==0&&(t.millisecond=-1),!t.second&&t.second!==0&&(t.second=-1),!t.minute&&t.minute!==0&&(t.minute=-1),!t.hour&&t.hour!==0&&(t.hour=-1),!t.day&&t.day!==0&&(t.day=-1),!t.month&&t.month!==0&&(t.month=-1),!t.year&&t.year!==0&&(t.year=-1),t.millisecond!=-1&&Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),t.second!=-1&&Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),t.minute!=-1&&Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),t.hour!=-1&&Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),t.month!==-1&&Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),t.year!=-1&&Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),t.day!=-1&&Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),this},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return e%4===0&&e%100!==0||e%400===0},Date.prototype.isWeekday=function(){return!this.is().sat()&&!this.is().sun()},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},Date.prototype.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(n===0?n+=7*(t||1):n)},Date.prototype.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(n===0?n+=12*(t||1):n)},Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)},Date.prototype.getWeekOfYear=function(e){var t=this.getFullYear(),n=this.getMonth(),r=this.getDate(),i=e||Date.CultureInfo.firstDayOfWeek,s=8-(new Date(t,0,1)).getDay();s==8&&(s=1);var o=(Date.UTC(t,n,r,0,0,0)-Date.UTC(t,0,1,0,0,0))/864e5+1,u=Math.floor((o-s+7)/7);if(u===i){t--;var a=8-(new Date(t,0,1)).getDay();a==2||a==8?u=53:u=52}return u},Date.prototype.isDST=function(){return console.log("isDST"),this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"},Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},Date.prototype.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=Number(e)*-6/10;return this.addMinutes(n-t),this},Date.prototype.setTimezone=function(e){return this.setTimezoneOffset(Date.getTimezoneOffset(e))},Date.prototype.getUTCOffset=function(){var e=this.getTimezoneOffset()*-10/6,t;return e<0?(t=(e-1e4).toString(),t[0]+t.substr(2)):(t=(e+1e4).toString(),"+"+t.substr(1))},Date.prototype.getDayName=function(e){return e?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},Date.prototype.getMonthName=function(e){return e?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(e){var t=this,n=function(t){return t.toString().length==1?"0"+t:t};return e?e.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(e){switch(e){case"hh":return n(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return n(t.getHours());case"H":return t.getHours();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(!0);case"dd":return n(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(!0);case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},Date.now=function(){return new Date},Date.today=function(){return Date.now().clearTime()},Date.prototype._orient=1,Date.prototype.next=function(){return this._orient=1,this},Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this},Date.prototype._is=!1,Date.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var e={};return e[this._dateElement]=this,Date.now().add(e)},Number.prototype.ago=function(){var e={};return e[this._dateElement]=this*-1,Date.now().add(e)},function(){var e=Date.prototype,t=Number.prototype,n="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),r="january february march april may june july august september october november december".split(/\s/),i="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),s,o=function(e){return function(){return this._is?(this._is=!1,this.getDay()==e):this.moveToDayOfWeek(e,this._orient)}};for(var u=0;u<n.length;u++)e[n[u]]=e[n[u].substring(0,3)]=o(u);var a=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}};for(var f=0;f<r.length;f++)e[r[f]]=e[r[f].substring(0,3)]=a(f);var l=function(e){return function(){return e.substring(e.length-1)!="s"&&(e+="s"),this["add"+e](this._orient)}},c=function(e){return function(){return this._dateElement=e,this}};for(var h=0;h<i.length;h++)s=i[h].toLowerCase(),e[s]=e[s+"s"]=l(i[h]),t[s]=t[s+"s"]=c(s)}(),Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)},Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)},Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)},Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)},Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(e){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){var n=[],r=null;while(t.length){try{r=e.call(this,t)}catch(i){n.push(r[0]),t=r[1];continue}break}return[n,t]}},many:function(e){return function(t){var n=[],r=null;while(t.length){try{r=e.call(this,t)}catch(i){return[n,t]}n.push(r[0]),t=r[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(r){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(r){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return n=e.call(this,t),[null,n[1]]}:null},product:function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=[];for(var i=0;i<e.length;i++)r.push(t.each(e[i],n));return r},cache:function(t){var n={},r=null;return function(i){try{r=n[i]=n[i]||t.call(this,i)}catch(s){r=n[i]=s}if(r instanceof e.Exception)throw r;return r}},any:function(){var t=arguments;return function(n){var r=null;for(var i=0;i<t.length;i++){if(t[i]==null)continue;try{r=t[i].call(this,n)}catch(s){r=null}if(r)return r}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){var r=[],i=null;for(var s=0;s<t.length;s++){if(t[s]==null)continue;try{i=t[s].call(this,n)}catch(o){throw new e.Exception(n)}r.push(i[0]),n=i[1]}return[r,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,r,i){return r=r||t.rtoken(/^\s*/),i=i||null,n.length==1?n[0]:function(t){var s=null,o=null,u=[];for(var a=0;a<n.length;a++){try{s=n[a].call(this,t)}catch(f){break}u.push(s[0]);try{o=r.call(this,s[1])}catch(l){o=null;break}t=o[1]}if(!s)throw new e.Exception(t);if(o)throw new e.Exception(o[1]);if(i)try{s=i.call(this,s[1])}catch(h){throw new e.Exception(s[1])}return[u,s?s[1]:t]}},between:function(e,n,i){i=i||e;var s=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=s.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(r)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(r))},set:function(n,r,i){return r=r||t.rtoken(/^\s*/),i=i||null,function(s){var o=null,u=null,a=null,f=null,l=[[],s],h=!1;for(var p=0;p<n.length;p++){a=null,u=null,o=null,h=n.length==1;try{o=n[p].call(this,s)}catch(v){continue}f=[[o[0]],o[1]];if(o[1].length>0&&!h)try{a=r.call(this,o[1])}catch(m){h=!0}else h=!0;!h&&a[1].length===0&&(h=!0);if(!h){var g=[];for(var y=0;y<n.length;y++)p!=y&&g.push(n[y]);u=t.set(g,r).call(this,a[1]),u[0].length>0&&(f[0]=f[0].concat(u[0]),f[1]=u[1])}f[1].length<l[1].length&&(l=f);if(l[1].length===0)break}if(l[0].length===0)return l;if(i){try{a=i.call(this,l[1])}catch(b){throw new e.Exception(l[1])}l[1]=a[1]}return l}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var r=e.call(this,n);return[t,r[1]]}},process:function(e,t){return function(n){var r=e.call(this,n);return[t.call(this,r[0]),r[1]]}},min:function(t,n){return function(r){var i=n.call(this,r);if(i[0].length<t)throw new e.Exception(r);return i}}},n=function(e){return function(){var t=null,n=[];arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]);if(!t)return e.apply(null,arguments);for(var r=0,i=t.shift();r<i.length;r++)return t.unshift(i[r]),n.push(e.apply(null,t)),t.shift(),n}},i="optional not ignore cache".split(/\s/);for(var s=0;s<i.length;s++)t[i[s]]=n(t[i[s]]);var o=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},u="each any all".split(/\s/);for(var a=0;a<u.length;a++)t[u[a]]=o(t[u[a]])}(),function(){var e=function(t){var n=[];for(var r=0;r<t.length;r++)t[r]instanceof Array?n=n.concat(e(t[r])):t[r]&&n.push(t[r]);return n};Date.Grammar={},Date.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=e.length==3?Date.getMonthNumberFromName(e):Number(e)-1}},year:function(e){return function(){var t=Number(e);this.year=e.length>2?t:t+(t+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(e){e=e instanceof Array?e:[e];var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0;for(var n=0;n<e.length;n++)e[n]&&e[n].call(this);this.hour=this.meridian=="p"&&this.hour<13?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){t=t instanceof Array?e(t):[t];if(t.length===0)return null;for(var n=0;n<t.length;n++)typeof t[n]=="function"&&t[n].call(this);if(this.now)return new Date;var r=Date.today(),i=null,s=this.days!=null||!!this.orient||!!this.operator;if(s){var o,u,a;a=this.orient=="past"||this.operator=="subtract"?-1:1,this.weekday&&(this.unit="day",o=Date.getDayNumberFromName(this.weekday)-r.getDay(),u=7,this.days=o?(o+a*u)%u:a*u),this.month&&(this.unit="month",o=this.month-r.getMonth(),u=12,this.months=o?(o+a*u)%u:a*u,this.month=null),this.unit||(this.unit="day");if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this.unit=="week"&&(this.unit="day",this.value=this.value*7),this[this.unit+"s"]=this.value*a;return r.add(this)}return this.meridian&&this.hour&&(this.hour=this.hour<13&&this.meridian=="p"?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=r.addDays(Date.getDayNumberFromName(this.weekday)-r.getDay()).getDate()),this.month&&!this.day&&(this.day=1),r.set(this)}};var t=Date.Parsing.Operators,n=Date.Grammar,r=Date.Translator,i;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/),n.timePartDelimiter=t.stoken(":"),n.whiteSpace=t.rtoken(/^\s*/),n.generalDelimiter=t.rtoken(/^(([\s\,]|at|on)+)/);var s={};n.ctoken=function(e){var n=s[e];if(!n){var r=Date.CultureInfo.regexPatterns,i=e.split(/\s+/),o=[];for(var u=0;u<i.length;u++)o.push(t.replace(t.rtoken(r[i[u]]),i[u]));n=s[e]=t.any.apply(null,o)}return n},n.ctoken2=function(e){return t.rtoken(Date.CultureInfo.regexPatterns[e])},n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),r.hour)),n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),r.hour)),n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),r.hour)),n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),r.hour)),n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),r.minute)),n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),r.minute)),n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),r.second)),n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),r.second)),n.hms=t.cache(t.sequence([n.H,n.mm,n.ss],n.timePartDelimiter)),n.t=t.cache(t.process(n.ctoken2("shortMeridian"),r.meridian)),n.tt=t.cache(t.process(n.ctoken2("longMeridian"),r.meridian)),n.z=t.cache(t.process(t.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),r.timezone)),n.zz=t.cache(t.process(t.rtoken(/^(\+|\-)\s*\d\d\d\d/),r.timezone)),n.zzz=t.cache(t.process(n.ctoken2("timezone"),r.timezone)),n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz])),n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix),n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),r.day)),n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),r.day)),n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),r.month)),n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),r.month)),n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),r.month)),n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),r.year)),n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),r.year)),n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),r.year)),n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),r.year)),i=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))},n.day=i(n.d,n.dd),n.month=i(n.M,n.MMM),n.year=i(n.yyyy,n.yy),n.orientation=t.process(n.ctoken("past future"),function(e){return function(){this.orient=e}}),n.operator=t.process(n.ctoken("add subtract"),function(e){return function(){this.operator=e}}),n.rday=t.process(n.ctoken("yesterday tomorrow today now"),r.rday),n.unit=t.process(n.ctoken("minute hour day week month year"),function(e){return function(){this.unit=e}}),n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]),i=function(){return t.set(arguments,n.datePartDelimiter)},n.mdy=i(n.ddd,n.month,n.day,n.year),n.ymd=i(n.ddd,n.year,n.month,n.day),n.dmy=i(n.ddd,n.day,n.month,n.year),n.date=function(e){return(n[Date.CultureInfo.dateElementOrder]||n.mdy).call(this,e)},n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(e){if(n[e])return n[e];throw Date.Parsing.Exception(e)}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(e){return t.ignore(t.stoken(e))}))),function(e){return t.process(t.each.apply(null,e),r.finishExact)});var o={},u=function(e){return o[e]=o[e]||n.format(e)[0]};n.formats=function(e){if(e instanceof Array){var n=[];for(var r=0;r<e.length;r++)n.push(u(e[r]));return t.any.apply(null,n)}return u(e)},n._formats=n.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]),n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),r.finish),n.start=function(e){try{var t=n._formats.call({},e);if(t[1].length===0)return t}catch(r){}return n._start.call({},e)}}(),Date._parse=Date.parse,Date.parse=function(e){var t=null;if(!e)return null;try{t=Date.Grammar.start.call({},e)}catch(n){return null}return t[1].length===0?t[0]:null},Date.getParseFunction=function(e){var t=Date.Grammar.formats(e);return function(e){var n=null;try{n=t.call({},e)}catch(r){return null}return n[1].length===0?n[0]:null}},Date.parseExact=function(e,t){return Date.getParseFunction(t)(e)},function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var r,i,s;return{send:function(o,u){r=e('<form style="display:none;"></form>'),r.attr("accept-charset",n.formAcceptCharset),s=/\?/.test(n.url)?"&":"?",n.type==="DELETE"?(n.url=n.url+s+"_method=DELETE",n.type="POST"):n.type==="PUT"?(n.url=n.url+s+"_method=PUT",n.type="POST"):n.type==="PATCH"&&(n.url=n.url+s+"_method=PATCH",n.type="POST"),t+=1,i=e('<iframe src="javascript:false;" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,s=e.isArray(n.paramName)?n.paramName:[n.paramName];i.unbind("load").bind("load",function(){var t;try{t=i.contents();if(!t.length||!t[0].firstChild)throw new Error}catch(n){t=undefined}u(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(r),window.setTimeout(function(){r.remove()},0)}),r.prop("target",i.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(r)}),n.fileInput&&n.fileInput.length&&n.type==="POST"&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",s[t]||n.paramName)}),r.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),r.submit(),t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")),i.replaceWith(r)})}),r.append(i).appendTo(document.body)},abort:function(){i&&i.unbind("load").prop("src","javascript".concat(":false;")),r&&r.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!!window.XMLHttpRequestUpload&&!!window.FileReader,e.support.xhrFormDataFileUpload=!!window.FormData,e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n)this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e;return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return typeof t.formData=="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:e.type(t.formData)==="object"?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var n=Date.now?Date.now():(new Date).getTime(),r;if(t._time&&t.progressInterval&&n-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=n,r=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=r-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=r,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(n,r,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n=this,r,i=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:o,value:t.blob}):e.each(t.files,function(e,n){r.push({name:t.paramName[e]||o,value:n})})):(n._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(e,t){r.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',r.append(o,t.blob,i.name)):e.each(t.files,function(e,i){(n._isInstanceOf("File",i)||n._isInstanceOf("Blob",i))&&r.append(t.paramName[e]||o,i,i.name)})),t.data=r):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',t.contentType=i.type,t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;while(i)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){if(!t.form||!t.form.length)t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")));t.paramName=this.
_getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();return n=n||this.options.context||s,t===!0?i.resolveWith(n,r):t===!1&&i.rejectWith(n,r),s.abort=i.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var r=this,i=function(t){return e.Deferred().resolveWith(r,[t]).promise()};n.process=function(e,t){if(e||t)n._processQueue=this._processQueue=(this._processQueue||i(this)).pipe(e,t);return this._processQueue||i(this)},n.submit=function(){return this.state()!=="pending"&&(n.jqXHR=this.jqXHR=r._trigger("submit",t,this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():r._getXHRPromise()},n.state=function(){if(this.jqXHR)return r._getDeferredState(this.jqXHR);if(this._processQueue)return r._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(t,n){var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes=t.uploadedBytes||0,u=t.maxChunkSize||s,a=i.slice||i.webkitSlice||i.mozSlice,f=e.Deferred(),l=f.promise(),c,h;return!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data?!1:n?!0:o>=s?(i.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",i.error])):(h=function(){var n=e.extend({},t),l=n._progress.loaded;n.blob=a.call(i,o,o+u,i.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+o+"-"+(o+n.chunkSize-1)+"/"+s,r._initXHRData(n),r._initProgressListener(n),c=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,u,a){o=r._getUploadedBytes(a)||o+n.chunkSize,l+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o-n.uploadedBytes,total:o-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=o,n.result=i,n.textStatus=u,n.jqXHR=a,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),o<s?h():f.resolveWith(n.context,[i,u,a])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),f.rejectWith(n.context,[e,t,i])})},this._enhancePromise(l),l.abort=function(){return c.abort()},h(),l)},_beforeSend:function(e,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,r,i){var s=i._progress.total,o=i._response;i._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),i),o.result=i.result=t,o.textStatus=i.textStatus=n,o.jqXHR=i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){var i=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),i.jqXHR=r.jqXHR=e,i.textStatus=r.textStatus=t,i.errorThrown=r.errorThrown=n,this._trigger("fail",null,r)},_onAlways:function(e,t,n,r){this._trigger("always",null,r)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var r=this,i,s,o,u,a=r._getAJAXSettings(n),f=function(){return r._sending+=1,a._bitrateTimer=new r._BitrateTimer,i=i||((s||r._trigger("send",t,a)===!1)&&r._getXHRPromise(!1,a.context,s)||r._chunkedUpload(a)||e.ajax(a)).done(function(e,t,n){r._onDone(e,t,n,a)}).fail(function(e,t,n){r._onFail(e,t,n,a)}).always(function(e,t,n){r._onAlways(e,t,n,a),r._sending-=1,r._active-=1;if(a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending){var i=r._slots.shift();while(i){if(r._getDeferredState(i)==="pending"){i.resolve();break}i=r._slots.shift()}}r._active===0&&r._trigger("stop")}),i};return this._beforeSend(t,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),u=o.pipe(f)):u=this._sequence=this._sequence.pipe(f,f),u.abort=function(){return s=[undefined,"abort","abort"],i?i.abort():(o&&o.rejectWith(a.context,s),f())},this._enhancePromise(u)):f()},_onAdd:function(t,n){var r=this,i=!0,s=e.extend({},this.options,n),o=s.limitMultiFileUploads,u=this._getParamName(s),a,f,l,c;if(!s.singleFileUploads&&!o||!this._isXHRUpload(s))l=[n.files],a=[u];else if(!s.singleFileUploads&&o){l=[],a=[];for(c=0;c<n.files.length;c+=o)l.push(n.files.slice(c,c+o)),f=u.slice(c,c+o),f.length||(f=u),a.push(f)}else a=u;return n.originalFiles=n.files,e.each(l||n.files,function(s,o){var u=e.extend({},n);return u.files=l?o:[o],u.paramName=a[s],r._initResponseObject(u),r._initProgressObject(u),r._addConvenienceMethods(t,u),i=r._trigger("add",t,u),i}),i},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?n[0]:r}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var r=this,i=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),i.resolve([e])},o;return n=n||"",t.isFile?t._file?(t._file.relativePath=n,i.resolve(t._file)):t.file(function(e){e.relativePath=n,i.resolve(e)},s):t.isDirectory?(o=t.createReader(),o.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(s)},s)):i.resolve([]),i.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries"),r,i;if(n&&n.length)return this._handleFileTreeEntries(n);r=e.makeArray(t.prop("files"));if(!r.length){i=t.prop("value");if(!i)return e.Deferred().resolve([]).promise();r=[{name:i.replace(/^.*\\/,"")}]}else r[0].name===undefined&&r[0].fileName&&e.each(r,function(e,t){t.name=t.fileName,t.size=t.fileSize});return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&t.length!==1?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(e){r.files=e,n.options.replaceFileInput&&n._replaceFileInput(r.fileInput),n._trigger("change",t,r)!==!1&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};if(n&&n.length){e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)});if(this._trigger("paste",t,r)===!1||this._onAdd(t,r)===!1)return!1}},_onDrop:function(e){var t=this,n=e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer,r={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,t._trigger("drop",e,r)!==!1&&t._onAdd(e,r)}))},_onDragOver:function(t){var n=t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;if(n){if(this._trigger("dragover",t)===!1)return!1;e.inArray("Files",n.types)!==-1&&(n.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=e.inArray(t,this._specialOptions)!==-1;r&&this._destroyEventHandlers(),this._super(t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return t!=="url"&&e.type(n)==="string"&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,r){t._isRegExpOption(e,r)&&(r=t._getRegExp(r)),n[e]=r})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;if(!t||this.options.disabled)return;t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=e.Deferred(),i=r.promise(),s,o;return i.abort=function(){return o=!0,s?s.abort():(r.reject(null,"abort","abort"),i)},this._getFileInputFiles(t.fileInput).always(function(e){if(o)return;t.files=e,s=n._onSend(null,t).then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}),this._enhancePromise(i)}t.files=e.makeArray(t.files);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),jQuery.fn.single_double_click=function(e,t,n){return this.each(function(){var r=0,i=this;jQuery(this).click(function(s){r++,r==1&&setTimeout(function(){r==1?e.call(i,s):t.call(i,s),r=0},n||300)})})},function(){"use strict";var e=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(n){return n.replace(e,t)}}(),t=function(t,n){var r,i,s,o,u,a;window.getComputedStyle?r=window.getComputedStyle(t,null).getPropertyValue(n):(i=e(n),t.currentStyle?r=t.currentStyle[i]:r=t.style[i]);if(n==="cursor")if(!r||r==="auto"){s=t.tagName.toLowerCase(),o=["a"];for(u=0,a=o.length;u<a;u++)if(s===o[u])return"pointer"}return r},n=function(e){if(!d.prototype._singleton)return;e||(e=window.event);var t;this!==window?t=this:e.target?t=e.target:e.srcElement&&(t=e.srcElement),d.prototype._singleton.setCurrent(t)},r=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},i=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},s=function(e,t){if(e.addClass)return e.addClass(t),e;if(t&&typeof t=="string"){var n=(t||"").split(/\s+/);if(e.nodeType===1)if(!e.className)e.className=t;else{var r=" "+e.className+" ",i=e.className;for(var s=0,o=n.length;s<o;s++)r.indexOf(" "+n[s]+" ")<0&&(i+=" "+n[s]);e.className=i.replace(/^\s+|\s+$/g,"")}}return e},o=function(e,t){if(e.removeClass)return e.removeClass(t),e;if(t&&typeof t=="string"||t===undefined){var n=(t||"").split(/\s+/);if(e.nodeType===1&&e.className)if(t){var r=(" "+e.className+" ").replace(/[\n\t]/g," ");for(var i=0,s=n.length;i<s;i++)r=r.replace(" "+n[i]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}else e.className=""}return e},u=function(){var e,t,n,r=1;return typeof document.body.getBoundingClientRect=="function"&&(e=document.body.getBoundingClientRect(),t=e.right-e.left,n=document.body.offsetWidth,r=Math.round(t/n*100)/100),r},a=function(e){var n={left:0,top:0,width:0,height:0,zIndex:999999999},r=t(e,"z-index");r&&r!=="auto"&&(n.zIndex=parseInt(r,10));if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),s,o,a;"pageXOffset"in window&&"pageYOffset"in window?(s=window.pageXOffset,o=window.pageYOffset):(a=u(),s=Math.round(document.documentElement.scrollLeft/a),o=Math.round(document.documentElement.scrollTop/a));var f=document.documentElement.clientLeft||0,l=document.documentElement.clientTop||0;n.left=i.left+s-f,n.top=i.top+o-l,n.width="width"in i?i.width:i.right-i.left,n.height="height"in i?i.height:i.bottom-i.top}return n},f=function(e,t){var n=!t||t.useNoCache!==!1;return n?(e.indexOf("?")===-1?"?":"&")+"nocache="+(new Date).getTime():""},l=function(e){var t=[],n=[];return e.trustedOrigins&&(typeof e.trustedOrigins=="string"?n.push(e.trustedOrigins):typeof e.trustedOrigins=="object"&&"length"in e.trustedOrigins&&(n=n.concat(e.trustedOrigins))),e.trustedDomains&&(typeof e.trustedDomains=="string"?n.push(e.trustedDomains):typeof e.trustedDomains=="object"&&"length"in e.trustedDomains&&(n=n.concat(e.trustedDomains))),n.length&&t.push("trustedOrigins="+encodeURIComponent(n.join(","))),typeof e.amdModuleId=="string"&&e.amdModuleId&&t.push("amdModuleId="+encodeURIComponent(e.amdModuleId)),typeof e.cjsModuleId=="string"&&e.cjsModuleId&&t.push("cjsModuleId="+encodeURIComponent(e.cjsModuleId)),t.join("&")},c=function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},h=function(e){if(typeof e=="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");return e.length?e:[e]},p=function(e,t,n,r,i){i?window.setTimeout(function(){e.call(t,n,r)},0):e.call(t,n,r)},d=function(e,t){e&&(d.prototype._singleton||this).glue(e);if(d.prototype._singleton)return d.prototype._singleton;d.prototype._singleton=this,this.options={};for(var n in y)this.options[n]=y[n];for(var r in t)this.options[r]=t[r];this.handlers={},d.detectFlashSupport()&&E()},v,m=[];d.prototype.setCurrent=function(e){v=e,this.reposition();var n=e.getAttribute("title");n&&this.setTitle(n);var r=this.options.forceHandCursor===!0||t(e,"cursor")==="pointer";return g.call(this,r),this},d.prototype.setText=function(e){return e&&e!==""&&(this.options.text=e,this.ready()&&this.flashBridge.setText(e)),this},d.prototype.setTitle=function(e){return e&&e!==""&&this.htmlBridge.setAttribute("title",e),this},d.prototype.setSize=function(e,t){return this.ready()&&this.flashBridge.setSize(e,t),this},d.prototype.setHandCursor=function(e){return e=typeof e=="boolean"?e:!!e,g.call(this,e),this.options.forceHandCursor=e,this};var g=function(e){this.ready()&&this.flashBridge.setHandCursor(e)};d.version="1.2.1";var y={moviePath:"ZeroClipboard.swf",trustedOrigins:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0,forceHandCursor:!1};d.setDefaults=function(e){for(var t in e)y[t]=e[t]},d.destroy=function(){d.prototype._singleton.unglue(m);var e=d.prototype._singleton.htmlBridge;e.parentNode.removeChild(e),delete d.prototype._singleton},d.detectFlashSupport=function(){var e=!1;if(typeof ActiveXObject=="function")try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){}return!e&&navigator.mimeTypes["application/x-shockwave-flash"]&&(e=!0),e};var b=null,w=null,E=function(){var e=d.prototype._singleton,t=document.getElementById("global-zeroclipboard-html-bridge");if(!t){var n={};for(var r in e.options)n[r]=e.options[r];n.amdModuleId=b,n.cjsModuleId=w;var i=l(n),s='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+e.options.moviePath+f(e.options.moviePath,e.options)+'"/>         <param name="allowScriptAccess" value="'+e.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+i+'"/>         <embed src="'+e.options.moviePath+f(e.options.moviePath,e.options)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+i+'"           scale="exactfit">         </embed>       </object>';t=document.createElement("div"),t.id="global-zeroclipboard-html-bridge",t.setAttribute("class","global-zeroclipboard-container"),t.setAttribute("data-clipboard-ready",!1),t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.width="15px",t.style.height="15px",t.style.zIndex="9999",t.innerHTML=s,document.body.appendChild(t)}e.htmlBridge=t,e.flashBridge=document["global-zeroclipboard-flash-bridge"]||t.children[0].lastElementChild};d.prototype.resetBridge=function(){return this.htmlBridge.style.left="-9999px",this.htmlBridge.style.top="-9999px",this.htmlBridge.removeAttribute("title"),this.htmlBridge.removeAttribute("data-clipboard-text"),o(v,this.options.activeClass),v=null,this.options.text=null,this},d.prototype.ready=function(){var e=this.htmlBridge.getAttribute("data-clipboard-ready");return e==="true"||e===!0},d.prototype.reposition=function(){if(!v)return!1;var e=a(v);return this.htmlBridge.style.top=e.top+"px",this.htmlBridge.style.left=e.left+"px",this.htmlBridge.style.width=e.width+"px",this.htmlBridge.style.height=e.height+"px",this.htmlBridge.style.zIndex=e.zIndex+1,this.setSize(e.width,e.height),this},d.dispatch=function(e,t){d.prototype._singleton.receiveEvent(e,t)},d.prototype.on=function(e,t){var n=e.toString().split(/\s/g);for(var r=0;r<n.length;r++)e=n[r].toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=t);return this.handlers.noflash&&!d.detectFlashSupport()&&this.receiveEvent("onNoFlash",null),this},d.prototype.addEventListener=d.prototype.on,d.prototype.off=function(e,t){var n=e.toString().split(/\s/g);for(var r=0;r<n.length;r++){e=n[r].toLowerCase().replace(/^on/,"");for(var i in this.handlers)i===e&&this.handlers[i]===t&&delete this.handlers[i]}return this},d.prototype.removeEventListener=d.prototype.off,d.prototype.receiveEvent=function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");var n=v,r=!0;switch(e){case"load":if(t&&parseFloat(t.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10){this.receiveEvent("onWrongFlash",{flashVersion:t.flashVersion});return}this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case"mouseover":s(n,this.options.hoverClass);break;case"mouseout":o(n,this.options.hoverClass),this.resetBridge();break;case"mousedown":s(n,this.options.activeClass);break;case"mouseup":o(n,this.options.activeClass);break;case"datarequested":var i=n.getAttribute("data-clipboard-target"),u=i?document.getElementById(i):null;if(u){var a=u.value||u.textContent||u.innerText;a&&this.setText(a)}else{var f=n.getAttribute("data-clipboard-text");f&&this.setText(f)}r=!1;break;case"complete":this.options.text=null}if(this.handlers[e]){var l=this.handlers[e];typeof l=="string"&&typeof window[l]=="function"&&(l=window[l]),typeof l=="function"&&p(l,n,this,t,r)}},d.prototype.glue=function(e){e=h(e);for(var t=0;t<e.length;t++)c(e[t],m)==-1&&(m.push(e[t]),r(e[t],"mouseover",n));return this},d.prototype.unglue=function(e){e=h(e);for(var t=0;t<e.length;t++){i(e[t],"mouseover",n);var r=c(e[t],m);r!=-1&&m.splice(r,1)}return this},typeof define=="function"&&define.amd?define(["require","exports","module"],function(e,t,n){return b=n&&n.id||null,d}):typeof module=="object"&&module&&typeof module.exports=="object"&&module.exports?(w=module.id||null,module.exports=d):window.ZeroClipboard=d}();var mollifyDefaults={language:{"default":"en",options:["en"]},"view-url":!1,"app-element-id":"mollify","service-path":"backend/","limited-http-methods":!1,"list-view-columns":{name:{width:250},size:{},"file-modified":{width:150}},"html5-uploader":{maxChunkSize:0},dnd:{dragimages:{"filesystemitem-file":"css/images/mimetypes64/empty.png","filesystemitem-folder":"css/images/mimetypes64/folder.png","filesystemitem-many":"css/images/mimetypes64/application_x_cpio.png"}}};!function(e){"use strict";function h(e,t,n,r){typeof t=="undefined"&&(t=0),typeof n=="undefined"&&(n=" "),typeof r=="undefined"&&(r=l);if(t+1>=e.length)switch(r){case f:e=(new Array(t+1-e.length)).join(n)+e;break;case c:var i=t-e.length,s=Math.ceil(i/2),o=i-s;e=(new Array(o+1)).join(n)+e+(new Array(s+1)).join(n);break;default:e+=(new Array(t+1-e.length)).join(n)}return e}var t={App:{},view:{},ui:{},events:{},service:{},filesystem:{},plugins:{},features:{},dom:{},templates:{}};t._time=(new Date).getTime(),t._hiddenInd=0,t.settings=!1,t.session=!1,t.App.init=function(n,r){window.Modernizr.testProp("touch"),t.App._initialized=!1,t.App._views={},t.App.pageUrl=t.request.getBaseUrl(window.location.href),t.App.pageParams=t.request.getParams(window.location.href),t.App.mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t.plugins.register(new t.plugin.Core);if(r)for(var i=0,s=r.length;i<s;i++)t.plugins.register(r[i]);t.settings=e.extend({},mollifyDefaults,n),t.service.init(t.settings["limited-http-methods"]);var o=function(){t.service.get("session/info/3").fail(function(){(new t.ui.FullErrorView("Failed to initialize Mollify")).show()}).done(function(e){t.events.dispatch("session/start",e)})};t.events.addEventHandler(function(e){e.type=="session/start"?t.App._onSessionStart(e.payload):e.type=="session/end"&&(t.session=!1,t.filesystem.init([]),o())}),t.settings["view-url"]&&(window.onpopstate=function(e){t.App.onRestoreState(document.location.href,e.state)}),o()},t.App.getElement=function(){return e("#"+t.settings["app-element-id"])},t.App._onSessionStart=function(e){t.session=e,t.session.id=t.session.session_id,t.session.admin=t.session.default_permission=="A",t.filesystem.init(t.session.folders);var n=function(){(new t.ui.FullErrorView("Failed to initialize Mollify")).show()};t.App._initialized?t.ui.initializeLang().done(t.App._start).fail(n):t.ui.initialize().done(function(){t.plugins.initialize().done(function(){t.App._initialized=!0,t.App._start()}).fail(n)}).fail(n)},t.App._start=function(){t.App.activeView=!1,t.App.activeViewId=null;var e=!1;t.App.pageParams.v&&t.App.pageParams.v.length>0&&(e=t.App.pageParams.v.split("/")),t.App._activateView(e)},t.App._activateView=function(e){var n=function(n){n?(t.App.activeView=n,t.App.activeViewId=e[0]):!t.session||!t.session.authenticated?(t.App.activeView=new t.view.LoginView,t.App.activeViewId="login"):(t.App.activeView=new t.view.MainView,t.App.activeViewId="main"),t.App.activeView.init(t.App.getElement(),e)};if(e){var r=!!t.App._views[e[0]],i=r&&t.App.activeViewId==e[0]||!r&&t.App.activeViewId=="main";i?t.App.activeView.onRestoreView(e):t.App._getView(e,n)}else n()},t.App._getView=function(e,n){var r=t.App._views[e[0]];if(r&&r.getView){var i=r.getView(e,t.App.pageParams);i&&i.done?i.done(n):n(i)}else n(!1)},t.App.onRestoreState=function(e,n){if(!t.settings["view-url"])return;if(!t.App.activeView)return;if(!t.session.user_id||t.session.user_id!=n.user_id)return;var r=t.request.getParams(e);if(!r.v||r.v.length<1)return;var i=r.v.split("/");t.App._activateView(i)},t.App.storeView=function(e){if(!t.settings["view-url"])return;var n={user_id:t.session.user_id};window.history&&window.history.pushState(n,"","?v="+e)},t.App.registerView=function(e,n){t.App._views[e]=n},t.App.openPage=function(e){window.location=t.App.getPageUrl(e)},t.App.getPageUrl=function(e){return t.App.pageUrl+"?v="+e},t.getItemDownloadInfo=function(e){if(!e)return!1;var n=!1;return window.isArray(e)?e.length===0&&(n=e[0]):n=e,n&&n.is_file?{name:n.name,url:t.filesystem.getDownloadUrl(n)}:n?t.plugins.exists("plugin-archiver")?{name:n.name+".zip",url:t.plugins.get("plugin-archiver").getDownloadCompressedUrl(e)}:!1:!1},t.resourceUrl=function(e){if(!t.settings["resource-map"])return e;var n=t.helpers.breakUrl(e);if(!n)return e;var r=t.settings["resource-map"][n.path];return r===undefined?e:r===!1?!1:r+n.paramsString},t.request={getParam:function(e){if(e=(new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)")).exec(location.search))return decodeURIComponent(e[1])},getParams:function(){return t.helpers.getUrlParams(location.search)},getBaseUrl:function(e){var t=e.lastIndexOf("?");t>=0&&(e=e.substring(0,t+1));var n=e.lastIndexOf("/");return e.substring(0,n+1)}};var n=t.events;n._handlers=[],n.addEventHandler=function(e){n._handlers.push(e)},n.dispatch=function(t,r){var i={type:t,payload:r};e.each(n._handlers,function(e,t){t(i)})};var r=t.service;r.init=function(e){r._limitedHttpMethods=!!e},r.url=function(e,n){if(e.startsWith("http"))return e;var r=t.settings["service-path"]+"r.php/"+e;return n?t.App.pageUrl+r:r},r.get=function(e,t,n){return r._do("GET",e,null)},r.post=function(e,t){return r._do("POST",e,t)},r.put=function(e,t){return r._do("PUT",e,t)},r.del=function(e,t){return r._do("DELETE",e,t)},r._do=function(n,i,s){var o=n,u=r._limitedHttpMethods&&(o=="PUT"||o=="DELETE");return u&&(o="POST"),e.ajax({type:o,url:r.url(i),processData:!1,data:s?JSON.stringify(s):null,contentType:"application/json",dataType:"json",beforeSend:function(e){t.session&&t.session.id&&e.setRequestHeader("mollify-session-id",t.session.id),(r._limitedHttpMethods||u)&&e.setRequestHeader("mollify-http-method",n)}}).pipe(function(t){return t?t.result:e.Deferred().reject({code:999})},function(n){var r=!1,i=!1;n.responseText&&n.responseText.startsWith("{")&&(r=JSON.parse(n.responseText)),r||(r={code:999});var s={handled:!1};r.code==100&&t.session&&t.session.authenticated&&(t.events.dispatch("session/end"),s.handled=!0);var o=e.Deferred();return setTimeout(function(){o.fail(function(e){s.handled||t.ui.dialogs.showError(e)})},0),o.rejectWith(s,[r])}).promise()};var i=t.filesystem;i.init=function(e){t.filesystem.roots=[],t.filesystem.rootsById={};if(e&&t.session.authenticated){t.filesystem.roots=e;for(var n=0,r=e.length;n<r;n++)t.filesystem.rootsById[e[n].id]=e[n]}},i.getDownloadUrl=function(e){if(!e.is_file)return!1;var n=t.service.url("filesystem/"+e.id,!0);return t.App.mobile&&(n=n+(n.indexOf("?")>=0?"&":"?")+"m=1"),n},i.getUploadUrl=function(e){return!e||e.is_file?null:t.service.url("filesystem/"+e.id+"/files/")+"?format=binary"},i.itemDetails=function(e,n){return t.service.post("filesystem/"+e.id+"/details/",{data:n})},i.folderInfo=function(e,n,r){return t.service.post("filesystem/"+(e?e:"roots")+"/info/"+(n?"?h=1":""),{data:r})},i.findFolder=function(e,n){return t.service.post("filesystem/find/",{folder:e,data:n})},i.folders=function(n){if(n==null){var r=e.Deferred();return r.resolve(i.roots),r.promise()}return t.service.get("filesystem/"+n.id+"/folders/")},i.copy=function(n,r){if(!n)return;if(window.isArray(n)&&n.length>1){if(!r){var s=e.Deferred();return t.ui.dialogs.folderSelector({title:t.ui.texts.get("copyMultipleFileDialogTitle"),message:t.ui.texts.get("copyMultipleFileMessage",[n.length]),actionTitle:t.ui.texts.get("copyFileDialogAction"),handler:{onSelect:function(t){e.when(i._copyMany(n,t)).then(s.resolve,s.reject)},canSelect:function(e){return i.canCopyTo(n,e)}}}),s.promise()}return i._copyMany(n,r)}window.isArray(n)&&(n=n[0]);if(!r){var o=e.Deferred();return t.ui.dialogs.folderSelector({title:t.ui.texts.get("copyFileDialogTitle"),message:t.ui.texts.get("copyFileMessage",[n.name]),actionTitle:t.ui.texts.get("copyFileDialogAction"),handler:{onSelect:function(t){e.when(i._copy(n,t)).then(o.resolve,o.reject)},canSelect:function(e){return i.canCopyTo(n,e)}}}),o.promise()}return i._copy(n,r)},i.copyHere=function(n,r){if(!n)return;if(!r){var s=e.Deferred();return t.ui.dialogs.input({title:t.ui.texts.get("copyHereDialogTitle"),message:t.ui.texts.get("copyHereDialogMessage"),defaultValue:n.name,yesTitle:t.ui.texts.get("copyFileDialogAction"),noTitle:t.ui.texts.get("dialogCancel"),handler:{isAcceptable:function(e){return!!e&&e.length>0&&e!=n.name},onInput:function(t){e.when(i._copyHere(n,t)).then(s.resolve,s.reject)}}}),s.promise()}return i._copyHere(n,r)},i.canCopyTo=function(e,t){if(window.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(!i.canCopyTo(e[n],t))return!1;return!0}return t.is_file?!1:e.id==t.id?!1:e.parent_id==t.id?!1:!0},i.canMoveTo=function(e,t){if(window.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(!i.canMoveTo(e[n],t))return!1;return!0}return t.is_file?!1:!t.is_file&&e.root_id==t.root_id&&t.path.startsWith(e.path)?!1:e.id==t.id?!1:e.parent_id==t.id?!1:!0},i._copyHere=function(e,n){return t.service.post("filesystem/"+e.id+"/copy/",{name:n}).done(function(r){t.events.dispatch("filesystem/copy",{items:[e],name:n})})},i._copy=function(e,n){return t.service.post("filesystem/"+e.id+"/copy/",{folder:n.id}).done(function(r){t.events.dispatch("filesystem/copy",{items:[e],to:n})})},i._copyMany=function(e,n){return t.service.post("filesystem/items/",{action:"copy",items:e,to:n}).done(function(r){t.events.dispatch("filesystem/copy",{items:e,to:n})})},i.move=function(n,r){if(!n)return;if(window.isArray(n)&&n.length>1){if(!r){var s=e.Deferred();return t.ui.dialogs.folderSelector({title:t.ui.texts.get("moveMultipleFileDialogTitle"),message:t.ui.texts.get("moveMultipleFileMessage",[n.length]),actionTitle:t.ui.texts.get("moveFileDialogAction"),handler:{onSelect:function(t){e.when(i._moveMany(n,t)).then(s.resolve,s.reject)},canSelect:function(e){return i.canMoveTo(n,e)}}}),s.promise()}return i._moveMany(n,r)}window.isArray(n)&&(n=n[0]);if(!r){var o=e.Deferred();return t.ui.dialogs.folderSelector({title:t.ui.texts.get("moveFileDialogTitle"),message:t.ui.texts.get("moveFileMessage",[n.name]),actionTitle:t.ui.texts.get("moveFileDialogAction"),handler:{onSelect:function(t){e.when(i._move(n,t)).then(o.resolve,o.reject)},canSelect:function(e){return i.canMoveTo(n,e)}}}),o.promise()}return i._move(n,r)},i._move=function(e,n){return t.service.post("filesystem/"+e.id+"/move/",{id:n.id}).done(function(r){t.events.dispatch("filesystem/move",{items:[e],to:n})})},i._moveMany=function(e,n){return t.service.post("filesystem/items/",{action:"move",items:e,to:n}).done(function(r){t.events.dispatch("filesystem/move",{items:e,to:n})})},i.rename=function(n,r){if(!r||r.length===0){var s=e.Deferred();return t.ui.dialogs.input({title:t.ui.texts.get(n.is_file?"renameDialogTitleFile":"renameDialogTitleFolder"),message:t.ui.texts.get("renameDialogNewName"),defaultValue:n.name,yesTitle:t.ui.texts.get("renameDialogRenameButton"),noTitle:t.ui.texts.get("dialogCancel"),handler:{isAcceptable:function(e){return!!e&&e.length>0&&e!=n.name},onInput:function(t){e.when(i._rename(n,t)).then(s.resolve,s.reject)}}}),s.promise()}return i._rename(n,r)},i._rename=function(e,n){return t.service.put("filesystem/"+e.id+"/name/",{name:n}).done(function(r){t.events.dispatch("filesystem/rename",{items:[e],name:n})})},i._handleDenied=function(n,r,i,s,o){var u=e.Deferred(),a=[],f=function(e){if(!window.isArray(i.target))return i.target;for(var t=0,n=i.target.length;t<n;t++)if(i.target[t].id==e)return i.target[t];return null};for(var l in i.items){var c=t.plugins.get(l);if(!c||!c.actionValidationHandler)return!1;var h=c.actionValidationHandler();a.push(h);var p=i.items[l];for(var d=0,v=p.length;d<v;d++){var m=p[d];m.item=f(m.item)}}var g=[],y=[],b=[],w=!0;for(var E=0,S=a.length;E<S;E++){var x=a[E].getValidationMessages(n,i.items[l],i);for(var T=0,N=x.length;T<N;T++){var C=x[T];b.push(C.acceptKey),g.push(C.message),C.acceptable||y.push(C.message)}}return y.length===0?t.ui.dialogs.confirmActionAccept(o,g,function(){u.resolve(b)},u.reject):(t.ui.dialogs.showActionDeniedMessage(s,y),u.reject()),u},i.del=function(
n){if(!n)return;var r=e.Deferred();return window.isArray(n)&&n.length>1?(i._delMany(n).done(r.resolve).fail(function(e){e.code==109&&e.data&&e.data.items?(this.handled=!0,i._handleDenied("delete",n,e.data,t.ui.texts.get("actionDeniedDeleteMany"),t.ui.texts.get("actionAcceptDeleteMany",n.length)).done(function(e){i._delMany(n,e).done(r.resolve).fail(r.reject)}).fail(function(){r.reject(e)})):r.reject(e)}),r.promise()):(window.isArray(n)&&(n=n[0]),i._del(n).done(r.resolve).fail(function(e){e.code==109&&e.data&&e.data.items?(this.handled=!0,i._handleDenied("delete",n,e.data,t.ui.texts.get("actionDeniedDelete",n.name),t.ui.texts.get("actionAcceptDelete",n.name)).done(function(e){i._del(n,e).done(r.resolve).fail(r.reject)}).fail(function(){r.reject(e)})):r.reject(e)}),r.promise())},i._del=function(e,n){return t.service.del("filesystem/"+e.id,n?{acceptKeys:n}:null).done(function(n){t.events.dispatch("filesystem/delete",{items:[e]})})},i._delMany=function(e,n){return t.service.post("filesystem/items/",{action:"delete",items:e,acceptKeys:n?n:null}).done(function(n){t.events.dispatch("filesystem/delete",{items:e})})},i.createFolder=function(e,n){return t.service.post("filesystem/"+e.id+"/folders/",{name:n}).done(function(r){t.events.dispatch("filesystem/createfolder",{items:[e],name:n})})};var s=t.plugins;s._list={},s.register=function(e){var t=e.id;if(!t)return;s._list[t]=e},s.initialize=function(n){var r=e.Deferred(),i=[];for(var o in s._list){var u=s._list[o];u.initialize&&u.initialize();if(u.resources){var a=u.backendPluginId||o;u.resources.texts&&(t.settings.texts_js?i.push(t.dom.importScript(t.plugins.getJsLocalizationUrl(a))):i.push(t.ui.texts.loadPlugin(a))),u.resources.css&&t.dom.importCss(t.plugins.getStyleUrl(a))}}return i.length===0?r.resolve().promise():(e.when.apply(e,i).done(r.resolve).fail(r.reject),r.promise())},s.get=function(e){return window.def(e)?s._list[e]:s._list},s.exists=function(e){return!!s._list[e]},s.url=function(e,n,r){var i=t.settings["service-path"]+"plugin/"+e;return n?i+(r?"/admin/":"/client/")+n:i},s.adminUrl=function(e,t){return s.url(e)+"/admin/"+t},s.getLocalizationUrl=function(e){return t.settings["service-path"]+"plugin/"+e+"/localization/texts_"+t.ui.texts.locale+".json"},s.getStyleUrl=function(e,t){return s.url(e,"style.css",t)},s.getItemContextRequestData=function(e){var t={};for(var n in s._list){var r=s._list[n];if(!r.itemContextRequestData)continue;var i=r.itemContextRequestData(e);if(!i)continue;t[n]=i}return t},s.getItemContextPlugins=function(e,t){var n={};if(!t)return n;var r=t.details;if(!r||!r.plugins)return n;for(var i in s._list){var o=s._list[i];if(!o.itemContextHandler)continue;var u=o.itemContextHandler(e,t,r.plugins[i]);u&&(n[i]=u)}return n},s.getItemCollectionPlugins=function(e,t){var n={};if(!e||!window.isArray(e)||e.length<1)return n;for(var r in s._list){var i=s._list[r];if(!i.itemCollectionHandler)continue;var o=i.itemCollectionHandler(e,t);o&&(n[r]=o)}return n},s.getMainViewPlugins=function(){var e=[];for(var t in s._list){var n=s._list[t];if(!n.mainViewHandler)continue;e.push(n)}return e},s.getFileViewPlugins=function(){var e=[];for(var t in s._list){var n=s._list[t];if(!n.fileViewHandler)continue;e.push(n)}return e},s.getConfigViewPlugins=function(){var e=[];for(var t in s._list){var n=s._list[t];if(!n.configViewHandler)continue;e.push(n)}return e};var o=t.features;o.hasFeature=function(e){return t.session.features&&t.session.features[e]};var u=t.templates;u._loaded=[],u.url=function(e){var n=t.settings["template-url"]||"templates/";return t.helpers.noncachedUrl(t.resourceUrl(n+e))},u.load=function(n,r){var i=e.Deferred();return u._loaded.indexOf(n)>=0?i.resolve():(e.get(r?t.resourceUrl(r):u.url(n)).done(function(t){u._loaded.push(n),e("body").append(t),i.resolve()}).fail(function(e){i.reject()}),i)};var a=t.dom;a._hiddenLoaded=[],a.importScript=function(n){var r=t.resourceUrl(n);if(!r)return e.Deferred().resolve().promise();var i=e.Deferred();return e.getScript(r,i.resolve).fail(i.reject),i.promise()},a.importCss=function(n){var r=t.resourceUrl(n);if(!r)return;var i=e("<link>");i.attr({type:"text/css",rel:"stylesheet",href:t.helpers.noncachedUrl(r)}),e("head").append(i)},a.loadContent=function(n,r,i){if(a._hiddenLoaded.indexOf(n)>=0){i&&i();return}var s=t.resourceUrl(r);if(!s){i&&i();return}var o="mollify-tmp-"+t._hiddenInd++;e('<div id="'+o+'" style="display:none"/>').appendTo(e("body")).load(t.helpers.noncachedUrl(s),function(){a._hiddenLoaded.push(n),i&&i()})},a.loadContentInto=function(e,n,r,i){var s=t.resourceUrl(n);if(!s)return;e.load(t.helpers.noncachedUrl(s),function(){i&&t.ui.process(e,i,r),typeof r=="function"?r():r.onLoad&&r.onLoad(e)})},a.template=function(n,r,i){var s=n;return t.settings["resource-map"]&&t.settings["resource-map"]["template:"+n]&&(s=t.settings["resource-map"]["template:"+n]),e("#"+s).tmpl(r,i)},t.helpers={getPluginActions:function(t){var n=[];if(t)for(var r in t){var i=t[r];i.actions&&(n.push({title:"-",type:"separator"}),e.merge(n,i.actions))}var s=[],o=-1;for(var u=0,a=n.length;u<a;u++){var f=n[u];f.group=="download"&&(o<0&&(o=u),s.push(f))}if(s.length>1){for(var l=1,c=s.length;l<c;l++)n.remove(s[l]);n[o]={type:"submenu",items:s,title:s[0].title,group:s[0].group,primary:s[0]}}return n},getPrimaryActions:function(e){if(!e)return[];var t=[],n=function(e){for(var n=0,r=e.length;n<r;n++){var i=e[n];(i.type=="primary"||i.group=="download")&&t.push(i)}};return n(e),t},getSecondaryActions:function(e){if(!e)return[];var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s.id=="download"||s.type=="primary")continue;n.push(s)}return t.helpers.cleanupActions(n)},cleanupActions:function(e){if(!e)return[];var t=-1;for(var n=e.length-1,r=0;n>=r;n--){var i=e[n];if(i.type!="separator"&&i.title!="-"){t=n;break}}if(t<0)return[];var s=-1;for(var o=0;o<=t;o++){var u=e[o];if(u.type!="separator"&&u.title!="-"){s=o;break}}e=e.splice(s,t-s+1);var a=!1;for(var f=e.length-1,l=0;f>=l;f--){var c=e[f],h=c.type=="separator"||c.title=="-";h&&a&&e.splice(f,1),a=h}return e},breakUrl:function(e){var n=e.split("?");return{path:n[0],params:t.helpers.getUrlParams(e),paramsString:n.length>1?"?"+n[1]:""}},getUrlParams:function(t){var n={};return e.each(t.substring(1).split("&"),function(e,t){var r=t.split("=");if(!r||r.length<2)return;n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}),n},urlWithParam:function(e,t,n){var r=t;return n&&(r=t+"="+encodeURIComponent(n)),e+(window.strpos(e,"?")?"&":"?")+r},noncachedUrl:function(e){return t.helpers.urlWithParam(e,"_="+t._time)},formatDateTime:function(e,t){var n=e.toString(t);return n},parseInternalTime:function(e){if(!e||e==null||typeof e!="string"||e.length!=14)return null;var t=new Date;return t.setYear(e.substring(0,4)),t.setMonth(e.substring(4,6)-1),t.setDate(e.substring(6,8)),t.setHours(e.substring(8,10)),t.setMinutes(e.substring(10,12)),t.setSeconds(e.substring(12,14)),t},formatInternalTime:function(e){return e?t.helpers.formatDateTime(e,"yyyyMMddHHmmss"):null},mapByKey:function(e,t){var n={};if(!e)return n;for(var r=0,i=e.length;r<i;r++){var s=e[r];if(!window.def(s))continue;var o=s[t];if(!window.def(o))continue;n[o]=s}return n},extractValue:function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];n.push(s[t])}return n},filter:function(t,n){var r=[];return e.each(t,function(e,t){n(t)&&r.push(t)}),r},arrayize:function(e){var t=[];return window.isArray(e)?e:(t.push(e),t)}},window.mollify=t,window.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(e){return!e||e.length===0?!1:this.substring(0,e.length)==e}),window.def=function(e){return typeof e!="undefined"},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),Array.prototype.remove||(Array.prototype.remove=function(e,t){typeof t=="undefined"&&typeof e=="object"&&(e=this.indexOf(e));var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)}),window.strpos=function(e,t,n){var r=(e+"").indexOf(t,n||0);return r===-1?!1:r};var f=1,l=2,c=3;window.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=window.Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=window.Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length){r=e.charCodeAt(n);if(r<128)t+=String.fromCharCode(r),n++;else if(r>191&&r<224)s=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|s&63),n+=2;else{s=e.charCodeAt(n+1);var o=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63),n+=3}}return t}}}(window.jQuery),!function(e,t){"use strict";t.ui.texts={};var n=t.ui.texts;n.locale=null,n._dict={},n._pluginTextsLoaded=[],n.load=function(t){var r=e.Deferred();return n.locale?r.resolve():n._load("localization/texts_"+(t||"en")+".json",r)},n.clear=function(){n.locale=null,n._dict={},n._pluginTextsLoaded=[]},n.loadPlugin=function(r){return n._pluginTextsLoaded.indexOf(r)>=0?e.Deferred().resolve():n._load(t.plugins.getLocalizationUrl(r),e.Deferred()).done(function(){n._pluginTextsLoaded.push(r)})},n._load=function(r,i){var s=t.resourceUrl(r);return s?(e.ajax({type:"GET",dataType:"text",url:s}).done(function(e){if(!e||typeof e!="string"){i.reject();return}var r=!1;try{r=JSON.parse(e)}catch(o){(new t.ui.FullErrorView("<b>Localization file syntax error</b> (<code>"+s+"</code>)","<code>"+o.message+"</code>")).show();return}if(!n.locale)n.locale=r.locale;else if(n.locale!=r.locale){i.reject();return}n.add(r.locale,r.texts),i.resolve(r.locale)}).fail(function(e){if(e.status==404){(new t.ui.FullErrorView("Localization file missing: <code>"+s+"</code>",'Either create the file or use <a href="https://code.google.com/p/mollify/wiki/ClientResourceMap">client resource map</a> to load it from different location, or to ignore it')).show();return}i.reject()}),i):i.resolve()},n.add=function(e,t){if(!e||!t)return;if(!n.locale)n.locale=e;else if(e!=n.locale)return;for(var r in t)n._dict[r]=t[r]},n.get=function(e,t){if(!e)return"";var r=n._dict[e];if(!r)return"!"+n.locale+":"+e;if(t){window.isArray(t)||(t=[t]);for(var i=0,s=t.length;i<s;i++)r=r.replace("{"+i+"}",t[i])}return r},n.has=function(e){return!!n._dict[e]},t.ui.formatters={ByteSize:function(e){this.format=function(n){if(!window.def(n))return"";var r=n;if(typeof n=="string"){r=parseInt(r,10);if(isNaN(r))return""}else if(typeof n!="number")return"";if(r<1024)return r==1?t.ui.texts.get("sizeOneByte"):t.ui.texts.get("sizeInBytes",e.format(r));if(r<1048576){var i=r/1024;return i==1?t.ui.texts.get("sizeOneKilobyte"):t.ui.texts.get("sizeInKilobytes",e.format(i))}if(r<1073741824){var s=r/1048576;return t.ui.texts.get("sizeInMegabytes",e.format(s))}var o=r/1073741824;return t.ui.texts.get("sizeInGigabytes",e.format(o))}},Timestamp:function(e){this.format=function(n){return n==null?"":(typeof n=="string"&&(n=t.helpers.parseInternalTime(n)),n.toString(e))}},Number:function(e,t,n){this.format=function(r){if(!window.def(r)||typeof r!="number")return"";var i=Math.pow(10,e),s=Math.floor(r*i)/i,o=s.toString();return n&&(o=o.replace(".",n)),t?o+" "+t:o}}},t.ui.uploader=!1,t.ui.draganddrop=!1,t.ui._activePopup=!1,t.ui.initialize=function(){var n=[];n.push(t.ui.initializeLang()),e("body").append('<div style="width: 0px; height: 0px; overflow: hidden;"><iframe id="mollify-download-frame" src=""></iframe></div>'),e(window).click(function(n){if(t.ui._activePopup){if(n&&n.toElement&&t.ui._activePopup.element){var r=t.ui._activePopup.element();if(r.has(e(n.toElement)).length>0)return}t.ui.hideActivePopup()}}),n.push(t.templates.load("dialogs.html")),t.ui.draganddrop||(t.ui.draganddrop=window.Modernizr.draganddrop?new t.MollifyHTML5DragAndDrop:new t.MollifyJQueryDragAndDrop),t.ui.uploader||(t.ui.uploader=new t.MollifyHTML5Uploader),t.ui.clipboard||new t.ZeroClipboard(function(e){t.ui.clipboard=e});var r=e.Deferred();return e.when.apply(e,n).done(r.resolve).fail(r.reject),r},t.ui.initializeLang=function(){var n=e.Deferred(),r=t.session.lang||t.settings.language["default"]||"en";if(t.ui.texts.locale&&t.ui.texts.locale==r)return n.resolve();var i=t.ui.texts._pluginTextsLoaded;t.ui.texts.locale&&(t.App.getElement().removeClass("lang-"+t.ui.texts.locale),t.ui.texts.clear());var s=[];return s.push(t.ui.texts.load(r).done(function(n){e("html").attr("lang",n),t.App.getElement().addClass("lang-"+n)})),i&&e.each(i,function(e,n){s.push(t.ui.texts.loadPlugin(n))}),e.when.apply(e,s).done(n.resolve).fail(n.reject),n},t.ui.hideActivePopup=function(){t.ui._activePopup&&t.ui._activePopup.hide(),t.ui._activePopup=!1},t.ui.activePopup=function(e){if(e===undefined)return t.ui._activePopup;if(t.ui._activePopup){if(e.parentPopupId&&t.ui._activePopup.id==e.parentPopupId)return;t.ui._activePopup.hide()}return t.ui._activePopup=e,t.ui._activePopup.id||(t.ui._activePopup.id=(new Date).getTime()),t.ui._activePopup.id},t.ui.isActivePopup=function(e){return t.ui._activePopup&&t.ui._activePopup.id==e},t.ui.removeActivePopup=function(e){if(!e||!t.ui.isActivePopup(e))return;t.ui._activePopup=!1},t.ui.download=function(n){t.App.mobile?window.open(n):e("#mollify-download-frame").attr("src",n)},t.ui.itemContext=function(n){var r={};return r._activeItemContext=!1,r.open=function(n){var i=n.item,s=n.element,o=n.viewport,u=n.container,a=n.folder,f="mainview-itemcontext-"+i.id;if(t.ui.isActivePopup(f))return;var l=!1;r._activeItemContext&&(l=r._activeItemContext.item.id,r._activeItemContext.close(),r._activeItemContext=!1);if(i.id==l)return;var c=u||s.parent(),h=t.dom.template("mollify-tmpl-main-itemcontext",i,{})[0].outerHTML;s.popover({title:i.name,html:!0,placement:"bottom",trigger:"manual",template:'<div class="popover mollify-itemcontext-popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>',content:h,container:c}).bind("shown",function(a){var l={id:f,hide:function(){s.popover("destroy")}};l.close=l.hide,t.ui.activePopup(l);var h=e("#mollify-itemcontext-"+i.id),p=h.closest(".popover"),d=o.outerWidth(),v=p.offset().left-c.offset().left,m=p.outerWidth();v<0?v=0:v+m>d&&(v=d-m-10),p.css("left",v+"px");var g=s.offset().left-c.offset().left+s.outerWidth()/2;g=Math.max(0,g-v),p.find(".arrow").css("left",g+"px"),p.find(".popover-title").append(e('<button type="button" class="close">×</button>').click(l.close));var y=h.find(".mollify-itemcontext-content");t.filesystem.itemDetails(i,t.plugins.getItemContextRequestData(i)).done(function(e){if(!e){u.hide();return}var t={details:e,folder:n.folder,folder_permission:n.folder_permission};r.renderItemContext(l,y,i,t)})}).bind("hidden",function(){s.unbind("shown").unbind("hidden"),t.ui.removeActivePopup(f)}),s.popover("show")},r.renderItemContext=function(n,r,i,s){var o=t.features.hasFeature("descriptions")&&t.session.admin,u=o||!!s.details.description,a=t.plugins.getItemContextPlugins(i,s),f=t.helpers.getPluginActions(a),l=t.helpers.getPrimaryActions(f),c=t.helpers.getSecondaryActions(f),h={item:i,details:s.details,showDescription:u,description:s.details.description||"",session:t.session,plugins:a,primaryActions:l};r.removeClass("loading").empty().append(t.dom.template("mollify-tmpl-main-itemcontext-content",h,{title:function(e){var n=e;return n.type=="submenu"&&(n=n.primary),n.title?n.title:t.ui.texts.get(n["title-key"])}})),r.click(function(e){return e.preventDefault(),!1}),t.ui.process(r,["localize"]),o&&t.ui.controls.editableLabel({element:e("#mollify-itemcontext-description"),hint:t.ui.texts.get("itemcontextDescriptionHint"),onedit:function(e){t.service.put("filesystem/"+i.id+"/description/",{description:e})}});if(l){var p=r.find(".mollify-itemcontext-primary-action-button");p.each(function(e,r){var i=l[e];i.type=="submenu"&&t.ui.controls.dropdown({element:r,items:i.items,hideDelay:0,style:"submenu",parentPopupId:n.id,onItem:function(){n.hide()},onBlur:function(e){e.hide()}})}),p.click(function(t){var r=p.index(e(this)),i=l[r];if(i.type=="submenu")return;n.close(),i.callback()})}if(a){var d=e("#mollify-itemcontext-details-selectors"),v=e("#mollify-itemcontext-details-content"),m={},g=function(t){e(".mollify-itemcontext-details-selector").removeClass("active"),e("#mollify-itemcontext-details-selector-"+t).addClass("active"),v.find(".mollify-itemcontext-plugin-content").hide();var r=m[t]?m[t]:!1;r||(r=e('<div class="mollify-itemcontext-plugin-content"></div>'),a[t].details["on-render"](n,r),m[t]=r,v.append(r)),r.show()},y=!1,b=function(){var t=e(this).tmplItem().data;g(t.id)};for(var w in a){var E=a[w];if(!E.details)continue;y||(y=w);var S=E.details.title?E.details.title:E.details["title-key"]?t.ui.texts.get(E.details["title-key"]):w,x=t.dom.template("mollify-tmpl-main-itemcontext-details-selector",{id:w,title:S,data:E}).appendTo(d).click(b)}y&&g(y)}t.ui.controls.dropdown({element:r.find("#mollify-itemcontext-secondary-actions"),items:c,hideDelay:0,style:"submenu",parentPopupId:n.id,onItem:function(){n.hide()},onBlur:function(e){e.hide()}})},{open:r.open}},t.ui.assign=function(e,t,n){if(!e||!t||!n)return;e.controls||(e.controls={}),e.controls[t]=n},t.ui.process=function(n,r,i){e.each(r,function(e,r){t.ui.handlers[r]&&t.ui.handlers[r](n,i)})},t.ui.handlers={localize:function(n,r){n.find(".localized").each(function(){var n=e(this),r=n.attr("title-key");r&&(n.attr("title",t.ui.texts.get(r)),n.removeAttr("title-key")),r=n.attr("text-key"),r&&(n.prepend(t.ui.texts.get(r)),n.removeAttr("text-key"))}),n.find("input.hintbox").each(function(){var n=e(this),r=t.ui.texts.get(n.attr("hint-key"));n.attr("placeholder",r).removeAttr("hint-key")})},center:function(t,n){t.find(".center").each(function(){var t=e(this),n=(t.parent().width()-t.outerWidth(!0))/2;t.css({position:"relative",left:n})})},hover:function(t){t.find(".hoverable").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")})},bubble:function(n,r){n.find(".bubble-trigger").each(function(){var n=e(this),i=t.ui.controls.bubble({element:n,handler:r});t.ui.assign(r,n.attr("id"),i)})},radio:function(n,r){n.find(".mollify-radio").each(function(){var n=e(this),i=t.ui.controls.radio(n,r);t.ui.assign(r,n.attr("id"),i)})}},t.ui.window={open:function(e){window.open(e)}},t.ui.preloadImages=function(t){e.each(t,function(){e("<img/>")[0].src=this})},t.ui.FullErrorView=function(e,n){this.show=function(){this.init(t.App.getElement())},this.init=function(r){if(t.App._initialized)t.dom.template("mollify-tmpl-fullpage-error",{title:e,message:n}).appendTo(r.empty());else{var i="<h1>"+e+"</h1><p>"+n+"</p>";r.html(i)}}};var r=function(n){e.each(n,function(e,n){if(n.type=="submenu"){r(n.items);return}if(n.title)return;n["title-key"]&&(n.title=t.ui.texts.get(n["title-key"]))})},i=function(e){var n=e||[];return r(n),t.dom.template("mollify-tmpl-popupmenu",{items:n})},s=function(t,n,r){t.find(".dropdown-item").click(function(){var i=e(this),s=t.find(".dropdown-menu"),o=[];for(;;){i.hasClass("dropdown-menu")||o.push(i.index()),i=i.parent();if(i[0]==s[0])break}var u=!1,a=n;return e.each(o.reverse(),function(e,t){u=a[t],u.type=="submenu"&&(a=u.items)}),r?r(u,u.callback?u.callback():null):u.callback&&u.callback(),!1})};t.ui.controls={dropdown:function(n){var r=e(n.element),o=!1,u=!1,a=n.items,f=function(){if(!o)return;n.onHide&&n.onHide(),o.parent().removeClass("open"),t.ui.removeActivePopup(u)},l=function(e,t){f(),n.onItem&&n.onItem(e,t)},c={hide:f,items:function(e){o.remove(),o=i(e),r.removeClass("loading").append(o),s(r,e,l),a=e}};n.parentPopupId&&(c.parentPopupId=n.parentPopupId);var h=r.find(".dropdown-toggle");if(h.length!=1)return;h.parent().append(i(n.items)),h.dropdown({onshow:function(r){o||(o=e(r.find(".dropdown-menu")[0])),n.parentPopupId||(u=t.ui.activePopup(c)),a||o.addClass("loading"),n.onShow&&n.onShow(c,a)},onhide:function(){f(),n.dynamic&&(a=!1)}}),s(r,n.items,l)},popupmenu:function(n){var r=!1,o=e(n.element),u=o.offset(),a=e('<div class="mollify-popupmenu" style="position: absolute; top: '+(u.top+o.outerHeight())+"px; left:"+u.left+'px;"></div>'),f=n.items,l=function(){n.onHide&&n.onHide(),a.remove(),t.ui.removeActivePopup(r)},c=function(e,t){l(),n.onItem&&n.onItem(e,t)};n.items||a.addClass("loading"),a.append(i(n.items).css("display","block")),n.style&&a.addClass(n.style),t.App.getElement().append(a);var h={hide:l,items:function(e){a.empty().removeClass("loading").append(i(e).css("display","block")),s(a,e,c)}};return n.items&&s(a,n.items,c),r=t.ui.activePopup(h),h},bubble:function(n){var r=n.element,i=r.attr("id");if(!i)return;var s=e("#"+i+"-bubble");if(!s||s.length===0)return;var o=s.html();s.remove();var u=!1,a=!1,f={hide:function(){r.popover("hide")},close:this.hide},l=e('<div class="popover mollify-bubble-popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>');r.popover({title:!1,html:!0,placement:"bottom",trigger:"manual",template:l,content:o}).bind("shown",function(e){u=l,t.ui.activePopup(f),a||(n.handler&&n.handler.onRenderBubble&&n.handler.onRenderBubble(i,f),a=!0),n.handler&&n.handler.onShowBubble&&n.handler.onShowBubble(i,f)}).bind("hidden",function(){t.ui.removeActivePopup(f.id)}),r.click(function(e){return e.preventDefault(),r.popover("show"),!1})},dynamicBubble:function(n){var r=n.element,i=function(t){return t?typeof t=="string"?t:e("<div/>").append(t).html():""},s=n.content?i(n.content):'<div class="loading"></div>',o=!1,u=n.container||r.parent(),a=n.viewport||u,f=function(){var e=c.closest(".popover"),t=a.outerWidth(),n=e.offset().left-u.offset().left,i=e.outerWidth();n<0?n=0:n+i>t&&(n=t-i-10),e.css("left",n+"px");var s=r.offset().left-u.offset().left+r.outerWidth()/2-10;s=Math.max(0,s-n),e.find(".arrow").css("left",s+"px")},l={show:function(){r.popover("show")},hide:function(e){e?o.hide():r.popover("destroy")},element:function(){return o},getContent:function(){return o.find(".popover-content")},content:function(e){var t=o.find(".popover-content");typeof e=="string"?t.html(e):t.empty().append(e),f()},position:f};l.close=l.hide;var c=e('<div class="popover mollify-bubble-popover"><div class="arrow"></div>'+(n.title?'<h3 class="popover-title"></h3>':"")+'<div class="popover-content"></div></div>');return r.popover({title:n.title?n.title:!1,html:!0,placement:"bottom",trigger:"manual",template:c,content:s,container:u}).bind("shown",function(r){o=c,t.ui.activePopup(l),o.click(function(e){e.stopPropagation()}),n.title&&o.find(".popover-title").append(e('<button type="button" class="close">×</button>').click(function(){l.close()})),t.ui.handlers.localize(o),n.handler&&n.handler.onRenderBubble&&n.handler.onRenderBubble(l)}).bind("hidden",function(){r.unbind("shown").unbind("hidden"),t.ui.removeActivePopup(l.id)}),r.popover("show"),l},table:function(n,r){var i=typeof n=="string"?e("#"+n):e(n);if(i.length===0||!r.columns)return!1;var s=e.Callbacks();i.addClass("mollify-table"),r.id&&i.addClass("mollify-table-"+r.id),r.onSelectionChanged&&s.add(r.onSelectionChanged),i.addClass("table"),r.narrow&&i.addClass("table-condensed"),r.hilight&&i.addClass("hilight");var o=!1,u=!1,a=r.remote&&r.remote.paging?r.remote.paging.max||50:50,f=function(){var t=u.find("ul").empty(),n=o?Math.ceil(o.total/a):0;if(n<2)return;var r=o?Math.floor(o.start/a)+1:0,i=r+Math.floor((n-r)/2),s=function(t){return e('<li class="page-btn page-nr'+(r==t?" active":"")+'"><a href="javascript:void(0);">'+t+"</a></li>")};t.append(e('<li class="page-btn page-prev'+(r<=1?" disabled":"")+'"><a href="javascript:void(0);">&laquo;</a></li>'));if(n<=10)for(var f=1;f<=n;f++)t.append(s(f));else r!=1&&t.append(s(1)),r>2&&t.append(s(2)),r>3&&t.append("<li class='page-break'>...</li>"),r>4&&t.append(s(r-2)),r>3&&t.append(s(r-1)),t.append(s(r)),r<n-2&&t.append(s(r+1)),r<n-1&&t.append(s(r+2)),r<n-2&&t.append("<li class='page-break'>...</li>"),r<n-1&&t.append(s(n-1)),r!=n&&t.append(s(n));t.append(e('<li class="page-btn page-next'+(r>=n?" disabled":"")+'"><a href="javascript:void(0);">&raquo;</a></li>'))};if(r.remote&&r.remote.paging){var l=r.remote.paging.controls||e("<div class='mollify-table-pager'></div>").insertAfter(i);u=e('<div class="pagination"><ul></ul></div>').appendTo(l),l.delegate(".page-btn > a","click",function(t){if(!o)return;var n=e(this),r=n.parent();if(r.hasClass("disabled"))return;var i=Math.floor(o.start/a)+1,s=Math.ceil(o.total/a);r.hasClass("page-next")?i++:r.hasClass("page-prev")?i--:i=parseInt(n.text(),10);if(i<1||i>s)return;o.start=(i-1)*a,M.refresh()}),f()}var c=function(t){var n=!1;return N.find("tr").each(function(){var r=e(this),i=r[0].data;if(t==i)return n=r,!1}),n},h=function(){var t=[];return i.find(".mollify-tableselect:checked").each(function(n,r){var i=e(r).parent().parent()[0].data;t.push(i)}),t},p=function(e,t){var n=c(e);n.find(".mollify-tableselect").prop("checked",t),s.fire()},d=function(){var e=N.children().length,t=e>0&&h().length==e;t?i.find(".mollify-tableselect-header").prop("checked",!0):i.find(".mollify-tableselect-header").prop("checked",!1)};s.add(d);var v=function(e){i.find(".mollify-tableselect").prop("checked",e)},m=e("<tr></tr>").appendTo(e("<thead></thead>").appendTo(i)),g=!1,y=function(e){var t=N.children().length,n=t>0&&h().length==t;v(!n),s.fire()};for(var b=0,w=r.columns.length;b<w;b++){var E,S=r.columns[b];S.type=="selectrow"?E=e('<input class="mollify-tableselect-header" type="checkbox"></input>').click(y):(E=e("<th>"+(S.type=="action"?"":S.title?S.title:"")+"</th>"),E[0].colId=S.id,S.sortable&&(E.append("<span class='mollify-tableheader-sort'></span>").addClass("sortable"),g||(g=S.id))),S.id&&E.addClass("col-"+S.id),E.appendTo(m)}var x=!1;g&&(x={id:g,asc:!0}),r.defaultSort&&(x=r.defaultSort);var T=function(){i.find("th.sortable > .mollify-tableheader-sort").empty();if(!x)return;var t=e("th.col-"+x.id+" > .mollify-tableheader-sort");t.html("<i class='"+(x.asc?"icon-caret-up":"icon-caret-down")+"'></i>")};i.delegate("th.sortable","click",function(t){var n=e(this),r=n[0].colId;x&&x.id==r?x.asc=!x.asc:x={id:r,asc:!0},T(),M.refresh()}),T();var N=e("<tbody></tbody>").appendTo(i),C=!1;r.emptyHint&&(C=e("<tr class='mollify-table-empty-hint'><td colspan='"+r.columns.length+"'>"+r.emptyHint+"</td></tr>")),i.delegate(".mollify-tableselect","change",function(e){return s.fire(),!1}),i.delegate("a.mollify-tableaction","click",function(t){var n=e(this).parent(),i=n.parent(),s=n[0].colId,o=i[0].data;return t.stopPropagation(),r.onRowAction&&r.onRowAction(s,o),!1}),r.hilight&&i.delegate("tr","click",function(t){if(t.target&&e(t.target).hasClass("mollify-tableselect"))return;var n=e(this),o=n[0].data;if(!o)return;n.hasClass("info")?(n.removeClass("info"),n.find(".mollify-tableselect").prop("checked",!1),o=null):(i.find("tr").removeClass("info"),v(!1),n.find(".mollify-tableselect").prop("checked",!0),n.addClass("info")),s.fire(),r.onHilight&&r.onHilight(o)});var k=function(n,i,s){n[0].colId=i.id;var o=s[i.id];i.cellClass&&n.addClass(i.cellClass);if(i.type=="selectrow")var u=e('<input class="mollify-tableselect" type="checkbox"></input>').appendTo(n);else if(i.type=="action"){var a=i.content;i.valueMapper&&(a=i.valueMapper(s,o)),a&&e("<a class='mollify-tableaction' title='"+i.title+"'></a>").html(a).appendTo(n)}else if(i.type=="input"){var f=e('<input type="text"></input>').appendTo(n).change(function(){var e=f.val();n[0].ctrlVal=e,r.selectOnEdit&&p(s,!0),i.onChange&&i.onChange(s,e)});n[0].ctrl=f;var l=o;i.valueMapper&&(l=i.valueMapper(s,o)),f.val(l)}else if(i.type=="select"){var c=t.ui.controls.select(e("<select></select>").appendTo(n),{values:i.options,title:"title",onChange:function(e){n[0].ctrlVal=e,r.selectOnEdit&&p(s,!0),i.onChange&&i.onChange(s,e)}});n[0].ctrl=c;var h=o;i.valueMapper&&(h=i.valueMapper(s,o)),c.select(h)}else i.type=="static"?n.html(i.content||""):i.renderer?i.renderer(s,o,n):i.valueMapper?n.html(i.valueMapper(s,o)):i.formatter?n.html(i.formatter.format(o)):n.html(o)},L=function(t){C&&C.detach();var n=e("<tr></tr>").appendTo(N);n[0].data=t,r.onRow&&r.onRow(n,t);for(var i=0,s=r.columns.length;i<s;i++){var o=e("<td></td>").appendTo(n);k(o,r.columns[i],t)}},A=function(t){t.find("td").each(function(){var n=e(this),i=n.index();k(n,r.columns[i],t[0].data)})},O=function(){if(!C)return;var e=N.find("tr").length;e===0?C.appendTo(N):C.hide()},M={findByKey:function(t){if(!r.key)return!1;var n=!1;return N.find("tr").each(function(){var i=e(this)[0].data;if(i[r.key]==t)return n=i,!1}),n},onSelectionChanged:function(e){s.add(e)},getSelected:function(){return h()},getValues:function(){var t={};return N.find("td").each(function(){var n=e(this),i=n[0].ctrlVal;if(!i)return;var s=n.parent(),o=s[0].data,u=o[r.key];t[u]||(t[u]={}),t[u][n[0].colId]=i}),t},set:function(t){C&&C.detach(),N.empty(),e.each(t,function(e,t){L(t)}),O(),s.fire()},add:function(e){if(!e)return;if(window.isArray(e))for(var t=0,n=e.length;t<n;t++)L(e[t]);else L(e);O()},update:function(e){if(!e)return;var t=c(e);if(!t)return;A(t)},remove:function(e){if(!e)return;var t=c(e);if(!t)return;t.remove(),O()},refresh:function(){var n=e.Deferred();if(!r.remote||!r.remote.path)return n.resolve();var i={count:a,start:o?o.start:0,sort:x};if(r.remote.queryParams){var s=r.remote.queryParams(o);s&&(i=e.extend(i,s))}var u=t.service.post(r.remote.path,i).done(function(e){r.remote.paging?(o={start:e.start,count:e.count,total:e.total},f()):o=!1,M.set(e.data),n.resolve()}).fail(n.reject);return r.remote.onLoad&&r.remote.onLoad(u),n}};return M},select:function(t,n){var r=typeof t=="string"?e("#"+t):t;if(!r||r.length===0)return!1;var i=function(t){var i=e("<option></option>").appendTo(r);if(t==n.none)i.html(t);else if(n.renderer)n.renderer(t,i);else{var s;typeof t=="string"||!n.title?(s=t,n.valueMapper&&(s=n.valueMapper(t))):s=t[n.title],i.html(s)}i[0].data=t},s=function(){var e=r.find("option:selected");if(!e||e.length===0)return null;var t=e[0].data;return t==n.none?null:t};n.onChange&&r.change(function(){n.onChange(s())});var o={add:function(e){if(!e)return;if(window.isArray(e))for(var t=0,n=e.length;t<n;t++)i(e[t]);else i(e)},select:function(t){var i=r.find("option");if(typeof t=="number"){if(i.length>=t)return;e(i[t]).prop("selected",!0);return}var s=t;n.none&&!s&&(s=n.none);for(var o=0,u=i.length;o<u;o++)if(i[o].data==s){e(i[o]).prop("selected",!0);return}},get:s,set:this.select,selected:s};return n.none&&o.add(n.none),n.values&&o.add(n.values),o},radio:function(t,n){var r=t.addClass("btn-group").attr("id"),i=t.find("button"),s=function(e){i.removeClass("active"),e.addClass("active")};return i.click(function(){var t=e(this),o=i.index(t);s(t);var u=t.attr("id");n&&r&&n.onRadioChanged&&n.onRadioChanged(r,u,o)}),{set:function(t){s(e(i[t]))}}},datepicker:function(n,r){if(!n)return!1;r||(r={});var i=typeof n=="string"?e("#"+n):n;e.fn.datetimepicker.dates.mollify||(e.fn.datetimepicker.dates.mollify={days:t.ui.texts.get("days"),daysShort:t.ui.texts.get("daysShort"),daysMin:t.ui.texts.get("daysMin"),months:t.ui.texts.get("months"),monthsShort:t.ui.texts.get("monthsShort"),today:t.ui.texts.get("today"),weekStart:t.ui.texts.get("weekStart")});var s=r.value||null,o=r.format||t.ui.texts.get("shortDateTimeFormat");o=o.replace(/\b[h]\b/,"hh"),o=o.replace(/\b[M]\b/,"MM"),o=o.replace(/\b[d]\b/,"dd"),o=o.replace("tt","PP");var u=i.datetimepicker({format:o,language:"mollify",pickTime:r.time||!0,pickSeconds:o.indexOf("s")>=0}).on("changeDate",function(e){s=e.date}),a=u.data("datetimepicker");s&&a.setDate(s);var f={get:function(){return s?new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes
(),s.getUTCSeconds()):s},set:function(e){s=e!=null?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())):null,a.setDate(s)}};return u.data("mollify-datepicker",f),f},editableLabel:function(t){var n=e(t.element),r=n.attr("id"),i=t.value||n.html().trim();if(!r)return;n.addClass("editable-label").hover(function(){n.addClass("hover")},function(){n.removeClass("hover")});var s=e("<label></label>").appendTo(n.empty()),o=e("<input></input>").appendTo(n),u={value:function(e){i=e,i||!t.hint?(n.removeClass("hint"),s.html(i)):(n.addClass("hint"),s.html(t.hint)),o.val(i)}};u.value(i);var a=function(){var e=o.val();if(t.isvalid&&!t.isvalid(e))return;o.hide(),s.show(),i!=e&&(t.onedit&&t.onedit(e),u.value(e))},f=function(){o.hide(),s.show(),u.value(i)};return o.hide().bind("blur",a).keyup(function(e){e.which==13?a():e.which==27&&f()}),s.bind("click",function(){s.hide(),o.show().focus()}),u},slidePanel:function(n,r){if(!n)return;var i=t.dom.template("mollify-tmpl-slidepanel").appendTo(n);r.relative&&i.addClass("relative");var s=i.find(".mollify-slidepanel-content");r.resizable&&i.resizable({handles:"n"}).bind("resize",function(t,n){e(this).css("top","auto")});var o={getContentElement:function(){return s},show:function(e,t){e&&s.empty().append(e),s.parent().scrollTop(0),i.animate({height:t+"px"},500)},hide:function(){i.animate({height:"0px"},500)},remove:function(){i.remove()}};return i.find(".close").click(o.hide),o}},t.ui.dialogs={};var o=t.ui.dialogs;o._dialogDefaults={title:"Mollify"},o.closeActiveDialog=function(){if(!o._activeDialog)return;o._activeDialog.close()},o.info=function(t){o.custom({title:t.title,content:e("#mollify-tmpl-dialog-info").tmpl({message:t.message}),buttons:[{id:"ok","title-key":"ok",cls:"btn-primary"}],"on-button":function(e,n){n.close(),t.callback&&t.callback()}})},o.showActionDeniedMessage=function(e,n){var r="<p>"+e+"</p><p><ul>";for(var i=0,s=n.length;i<s;i++)r=r+"<li>"+n[i]+"</li>";r+="</ul></p>",t.ui.dialogs.error({title:t.ui.texts.get("errorDialogTitle"),message:r})},o.confirmActionAccept=function(e,n,r,i){var s="<p>"+e+"</p><p><ul>";for(var u=0,a=n.length;u<a;u++)s=s+"<li>"+n[u]+"</li>";s+="</ul></p>",o.custom({title:t.ui.texts.get("errorDialogTitle"),content:s,buttons:[{id:"yes","title-key":"yes",cls:"btn-primary"},{id:"no","title-key":"no"}],"on-button":function(e,t){t.close(),e.id==="yes"&&(r?r():i&&i())}})},o.showError=function(n){var r="errorDialogMessage_"+n.code;t.ui.texts.has(r)||(r="errorDialogUnknownError"),t.session.admin&&n.trace?o.custom({title:t.ui.texts.get("errorDialogTitle"),content:e("#mollify-tmpl-dialog-error-debug").tmpl({title:t.ui.texts.get("errorDialogTitle"),message:t.ui.texts.get(r),debug:n.trace.join("<br/>")}),buttons:[{id:"ok","title-key":"ok",cls:"btn-primary"}],"on-button":function(e,t){t.close()}}):t.ui.dialogs.error({title:t.ui.texts.get("errorDialogTitle"),message:t.ui.texts.get(r)})},o.select=function(n){var r=!1;o.custom({title:n.title,initSize:n.initSize,content:e("#mollify-tmpl-dialog-select").tmpl({message:n.message}),buttons:[{id:"ok","title-key":"ok",cls:"btn-primary"},{id:"cancel","title-key":"dialogCancel"}],"on-button":function(e,t){var i;if(e.id=="ok"){i=r.getSelected();if(!i||i.length===0)return}t.close(),e.id=="ok"&&n.onSelect&&n.onSelect(i,r.getValues())},"on-show":function(i,s){var o=e(s.find(".mollify-selectdialog-table")[0]);r=t.ui.controls.table(o,{key:n.key,selectOnEdit:!0,columns:[{type:"selectrow"}].concat(n.columns)}),r.set(n.list)}})},o.error=function(t){o.custom({title:t.title,content:e("#mollify-tmpl-dialog-error").tmpl({message:t.message}),buttons:[{id:"ok","title-key":"ok",cls:"btn-primary"}],"on-button":function(e,n){n.close(),t.callback&&t.callback()}})},o.confirmation=function(e){o.custom({title:e.title,content:e.message,buttons:[{id:"yes","title-key":"yes"},{id:"no","title-key":"no"}],"on-button":function(t,n){n.close(),e.callback&&t.id==="yes"&&e.callback()}})},o.input=function(t){var n=!1;o.custom({title:t.title,content:e("#mollify-tmpl-dialog-input").tmpl({message:t.message}),buttons:[{id:"yes",title:t.yesTitle,cls:"btn-primary"},{id:"no",title:t.noTitle}],"on-button":function(e,r){if(e.id==="yes"){if(!t.handler||!t.handler.isAcceptable)return;if(!t.handler.isAcceptable(n.val()))return}r.close(),e.id==="yes"&&t.handler.onInput(n.val())},"on-show":function(e,r){n=r.find(".mollify-inputdialog-input"),t.defaultValue&&n.val(t.defaultValue),n.focus()}})},o.wait=function(n){var r=n&&n.target?e("#"+n.target):e("body"),i=t.dom.template("mollify-tmpl-wait",e.extend(n,o._dialogDefaults)).appendTo(r).show();return{close:function(){i.remove()}}},o.notification=function(n){if(t.App.activeView&&t.App.activeView.onNotification&&t.App.activeView.onNotification(n))return;var r=n&&n.target?typeof n.target=="string"?e("#"+n.target):n.target:e("#mollify-notification-container");r.length===0&&(r=e("body"));var i=t.dom.template("mollify-tmpl-notification",e.extend(n,o._dialogDefaults)).hide().appendTo(r).fadeIn(300);setTimeout(function(){i.fadeOut(300),n["on-finish"]&&n["on-finish"]()},n.time|3e3)},o.custom=function(n){var r=function(e){e.css("margin-left",-e.outerWidth()/2),e.css("margin-top",-e.outerHeight()/2),e.css("top","50%"),e.css("left","50%")},i=n;i["title-key"]&&(i.title=t.ui.texts.get(i["title-key"]));var s=e("#mollify-tmpl-dialog-custom").tmpl(e.extend(o._dialogDefaults,i),{getContent:function(){if(n.html)return n.html;if(n.content){var t=n.content;return typeof t=="string"?t:e("<div/>").append(t.clone()).html()}return""},getButtonTitle:function(e){return e.title?e.title:e["title-key"]?t.ui.texts.get(e["title-key"]):""}});n.element&&s.find(".modal-body").append(n.element),t.ui.handlers.localize(s),s.on("hidden",function(e){if(e.target!=s[0])return;s.remove()}).modal({backdrop:"static",show:!0,keyboard:!0});var u={close:function(){s.modal("hide"),o._activeDialog=!1},center:function(){r(s)}};s.find(".modal-footer .btn").click(function(t){t.preventDefault();var r=e(this).tmplItem().data,i=r.buttons[e(this).index()];n["on-button"]&&n["on-button"](i,u)});if(n.resizable){var a=s.find(".modal-header"),f=s.find(".modal-body"),l=s.find(".modal-footer"),c=30;f.css({"max-height":"none","max-width":"none"});var h=function(){r(s);var e=s.innerHeight()-a.outerHeight()-l.outerHeight()-c;f.css("height",e)};s.css({"max-height":"none","max-width":"none","min-height":s.outerHeight()+"px","min-width":s.outerWidth()+"px"}).on("resize",h).resizable(),n.initSize&&s.css({width:n.initSize[0]+"px",height:n.initSize[1]+"px"}),h()}return n["on-show"]&&n["on-show"](u,s),o._activeDialog=u,u},o.folderSelector=function(n){var r=!1,i=e("#mollify-tmpl-dialog-folderselector").tmpl({message:n.message}),s=!1,u={},a=function(n,r){if(u[r?r.id:"root"])return;s.addClass("loading"),t.filesystem.folders(r).done(function(t){s.removeClass("loading"),u[r?r.id:"root"]=!0;if(!t||t.length===0){n&&n.find(".mollify-folderselector-folder-indicator").empty();return}var i=0,o=[];if(r){var f=r.path.match(/\//g);f?i=f.length+1:i=1;for(var l=0;l<i;l++)o.push({})}var c=e("#mollify-tmpl-dialog-folderselector-folder").tmpl(t,{cls:i===0?"root":"",levels:o});n?(n.after(c),n.addClass("loaded"),n&&n.find(".mollify-folderselector-folder-indicator").find("i").removeClass("icon-caret-right").addClass("icon-caret-down")):s.append(c),!r&&t.length==1&&a(e(c[0]),t[0])})};o.custom({title:n.title,content:i,buttons:[{id:"action",title:n.actionTitle,cls:"btn-primary"},{id:"cancel","title-key":"dialogCancel"}],"on-button":function(e,t){if(e.id==="action")if(!r||!n.handler||!n.handler.canSelect(r))return;t.close(),e.id==="action"&&n.handler.onSelect(r)},"on-show":function(t,i){s=i.find(".mollify-folderselector-tree"),s.on("click",".mollify-folderselector-folder-indicator",function(t){var n=e(this).parent(),r=n.tmplItem().data;return a(n,r),!1}),s.on("click",".mollify-folderselector-folder",function(t){var i=e(this),s=e(this).tmplItem().data;n.handler.canSelect(s)&&(r=s,e(".mollify-folderselector-folder").removeClass("selected"),i.addClass("selected"))}),a(null,null)}})},o.tableView=function(e){t.ui.dialogs.custom({resizable:!0,initSize:[600,400],title:e.title,content:t.dom.template("mollify-tmpl-tableview"),buttons:e.buttons,"on-button":function(t,n){e.onButton(t,n)},"on-show":function(n,r){var i=r.find("#mollify-tableview-content");n.center();var s=t.ui.controls.table("mollify-tableview-list",{key:e.table.key,columns:e.table.columns,onRowAction:function(t,r){e.onTableRowAction&&e.onTableRowAction(n,s,t,r)}});e.onRender(n,i,s)}})},t.MollifyHTML5DragAndDrop=function(){var n=this;n.dragObj=!1,n.dragEl=!1,n.dragListener=!1;var r=function(e){n.dragEl&&(n.dragEl.removeClass("dragged"),n.dragListener&&n.dragListener.onDragEnd&&n.dragListener.onDragEnd(n.dragEl,e),n.dragEl=!1),n.dragObj=!1,n.dragListener=!1};e("body").bind("dragover",function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="none",!1}),setTimeout(function(){var e=[];for(var n in t.settings.dnd.dragimages){if(!t.settings.dnd.dragimages.hasOwnProperty(n))continue;var r=t.settings.dnd.dragimages[n];if(!r)continue;if(e.indexOf(r)>=0)continue;e.push(r)}e&&t.ui.preloadImages(e)},0);var i={enableDragToDesktop:function(e,n){if(!e)return;var r=t.getItemDownloadInfo(e);r&&n.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",r.name,r.url].join(":"))},enableDrag:function(s,o){s.attr("draggable","true").bind("dragstart",function(r){n.dragObj=!1,r.originalEvent.dataTransfer.effectAllowed="none";if(!o.onDragStart)return!1;n.dragObj=o.onDragStart(e(this),r);if(!n.dragObj)return!1;var s=n.dragObj.type;if(n.dragObj.type=="filesystemitem"){var u=n.dragObj.payload;if(!window.isArray(u)||u.length==1){var a=window.isArray(u)?u[0]:u;a.is_file?s="filesystemitem-file":s="filesystemitem-folder"}else s="filesystemitem-many";i.enableDragToDesktop(u,r)}n.dragEl=e(this),n.dragListener=o,n.dragEl.addClass("dragged"),r.originalEvent.dataTransfer.effectAllowed="copyMove";if(t.settings.dnd.dragimages[s]){var f=document.createElement("img");f.src=t.settings.dnd.dragimages[s],r.originalEvent.dataTransfer.setDragImage(f,0,0)}return}).bind("dragend",function(e){r(e)})},enableDrop:function(t,i){t.addClass("droppable").bind("drop",function(t){t.stopPropagation&&t.stopPropagation();if(!i.canDrop||!i.onDrop||!n.dragObj)return;var s=e(this);i.canDrop(s,t,n.dragObj)&&(i.onDrop(s,t,n.dragObj),s.removeClass("dragover")),r(t)}).bind("dragenter",function(t){if(!i.canDrop||!n.dragObj)return!1;var r=e(this);i.canDrop(r,t,n.dragObj)&&r.addClass("dragover")}).bind("dragover",function(t){t.preventDefault&&t.preventDefault();var r="none";if(i.canDrop&&i.dropType&&n.dragObj){var s=e(this);if(i.canDrop(s,t,n.dragObj)){var o=i.dropType(s,t,n.dragObj);o&&(r=o)}}return t.originalEvent.dataTransfer.dropEffect=r,!1}).bind("dragleave",function(t){var r=e(this);r.removeClass("dragover"),n.dragTarget=!1})}};return i},t.MollifyJQueryDragAndDrop=function(){return{enableDragToDesktop:function(e,t){},enableDrag:function(t,n){t.draggable({revert:"invalid",distance:10,addClasses:!1,zIndex:2700,start:function(t){n.onDragStart&&n.onDragStart(e(this),t)}})}}},t.ZeroClipboard=function(t){if(!t||!window.ZeroClipboard)return!1;window.ZeroClipboard.setDefaults({moviePath:"js/lib/ZeroClipboard.swf",hoverClass:"hover",activeClass:"active",forceHandCursor:!0});var n=e('<div id="zeroclipboard-test" style="width=0px; height=0px;"></div>').appendTo(e("body")),r=new window.ZeroClipboard(n[0]);r.on("load",function(e){var n={enableCopy:function(e,t,n){var r=e.data("mollify-zeroclipboard");r||(r=new window.ZeroClipboard(e),e.data("mollify-zeroclipboard",r),n&&e.data("mollify-zeroclipboard-listener",n)),t&&e.data("mollify-zeroclipboard-text",t)}};t(n)}),r.on("dataRequested",function(){var t=e(this),n=t.data("mollify-zeroclipboard-listener"),i=!1;n&&n.onGetText&&(i=n.onGetText(t)),i||(i=t.data("mollify-zeroclipboard-text")),i&&r.setText(i)}),r.on("mouseover",function(){var t=e(this),n=t.data("mollify-zeroclipboard-listener");n&&n.onMouseOver&&n.onMouseOver(t,r)}),r.on("mouseout",function(){var t=e(this),n=t.data("mollify-zeroclipboard-listener");n&&n.onMouseOut&&n.onMouseOut(t)}),r.on("complete",function(t,n){var r=e(this),i=r.data("mollify-zeroclipboard-listener");i&&i.onCopy&&i.onCopy(r,n.text)})}}(window.jQuery,window.mollify),!function(e,t){"use strict";t.view.MainView=function(){var n=this;this._mainFileView=!1,this._mainConfigView=!1,this._views=[],this._currentView=!1,this.init=function(r,i){n._mainFileView=new t.view.MainViewFileView,n._mainConfigView=new t.view.MainViewConfigView,n._views=[this._mainFileView,this._mainConfigView],e.each(t.plugins.getMainViewPlugins(),function(e,t){if(!t.mainViewHandler)return;var r=t.mainViewHandler();n._views.push(r)}),n.itemContext=new t.ui.itemContext,t.dom.loadContentInto(r,t.templates.url("mainview.html"),function(){n.onLoad(i)},["localize"])},this.onLoad=function(r){e(window).resize(n.onResize),n.onResize(),t.dom.template("mollify-tmpl-main-username",t.session).appendTo("#mollify-mainview-user"),t.session.authenticated&&t.ui.controls.dropdown({element:e("#mollify-username-dropdown"),items:n.getSessionActions()});var i=[];e.each(n._views,function(e,t){t.init(n),i.push({icon:t.icon,title:t.title})});var s=e("#mollify-mainview-menu"),o=t.dom.template("mollify-tmpl-main-menubar",i).appendTo(s);o.click(function(){var t=o.index(e(this));n.activateView(n._views[t])});if(n._views.length>0){var u=!1;if(r){u=n._findView(r[0]),r=r.slice(1);if(r.length===0||r.length==1&&r[0]==="")r=!1}u||(u=n._views[0],r=!1),n.activateView(u,r)}},this._findView=function(t){var r=!1;return e.each(n._views,function(e,n){if(n.viewId==t)return r=n,!1}),r},this.onRestoreView=function(e){var t=e[0];if(n._currentView&&n._currentView.viewId==t)n._currentView.onRestoreView(e.slice(1));else{var r=n._findView(t);if(r){t=e.slice(1);if(t.length===0||t.length==1&&t[0]==="")t=!1;n.activateView(r,t)}}},this.activateView=function(r,i){t.ui.hideActivePopup(),n._currentView&&n._currentView.onDeactivate&&n._currentView.onDeactivate(),e("#mollify-mainview-navlist-parent").empty(),n._currentView=r,e("#mollify-mainview-navbar").empty(),r.onActivate({id:i,content:e("#mollify-mainview-viewcontent").empty(),tools:e("#mollify-mainview-viewtools").empty(),addNavBar:n.addNavBar,mainview:n,fileview:n._mainFileView});var s=e("#mollify-mainview-menu"),o=s.find(".mollify-mainview-menubar-item").removeClass("active"),u=n._views.indexOf(r);e(o.get(u)).addClass("active")},this.onNotification=function(n){var r=n&&n.target?typeof n.target=="string"?e("#"+n.target):n.target:e("#mollify-mainview-content"),i=t.dom.template("mollify-tmpl-main-notification",n).hide().appendTo(r).fadeIn(300);return setTimeout(function(){i.fadeOut(300),setTimeout(i.remove,300),n["on-finish"]&&n["on-finish"]()},n.time|3e3),!0},this.getActiveView=function(){return n._currentView},this.addNavBar=function(n){var r=t.dom.template("mollify-tmpl-main-navbar",n).appendTo(e("#mollify-mainview-navlist-parent")),i=n.items,s=function(){var s=r.find(".mollify-mainview-navbar-item");n.classes&&s.addClass(n.classes),n.dropdown&&s.each(function(r,o){var u=i[s.index(this)],a=e('<li class="mollify-mainview-navbar-dropdown"><a href="#" class="dropdown-toggle"><i class="icon-cog"></i></a></li>').appendTo(e(o)),f=[];typeof n.dropdown.items!="function"&&(f=n.dropdown.items),t.ui.controls.dropdown({element:a,items:f,onShow:function(e,t){if(t.length>0)return;typeof n.dropdown.items=="function"&&e.items(n.dropdown.items(u.obj))}})}),s.click(function(){var e=i[s.index(this)];e.callback&&e.callback()}),n.onRender&&n.onRender(r,s,function(e){var t=s.index(e);return i[t].obj})};return s(),{element:r,setActive:function(t){var n=r.find(".mollify-mainview-navbar-item");n.removeClass("active");if(!t)return;e.each(n,function(n,r){var s=i[n].obj;if(!s)return;var u=window.def(t.id)?t.id==s.id:t==s;if(u)return e(r).addClass("active"),!1})},update:function(e){i=e,r.find(".mollify-mainview-navbar-item").remove(),t.dom.template("mollify-tmpl-main-navbar-item",i).appendTo(r),s()}}},this.onResize=function(){n._currentView&&n._currentView.onResize()},this.getSessionActions=function(){var e=[];return t.features.hasFeature("change_password")&&(e.push({"title-key":"mainViewChangePasswordTitle",callback:n.changePassword}),e.push({title:"-"})),e.push({"title-key":"mainViewLogoutTitle",callback:n.onLogout}),e},this.onLogout=function(){t.service.post("session/logout").done(function(e){t.events.dispatch("session/end")})},this.changePassword=function(){var n=!1,r=!1,i=!1,s=!1,o=t.ui.texts.get("mainviewChangePasswordErrorValueMissing"),u=t.ui.texts.get("mainviewChangePasswordErrorConfirm"),a=function(e,r,i){t.service.put("configuration/users/current/password/",{old:window.Base64.encode(e),"new":window.Base64.encode(r)}).done(function(e){i(),t.ui.dialogs.notification({message:t.ui.texts.get("mainviewChangePasswordSuccess")})}).fail(function(e){this.handled=!0,e.code==107?t.ui.dialogs.notification({message:t.ui.texts.get("mainviewChangePasswordError"),type:"error",cls:"full",target:n.find(".modal-footer")}):this.handled=!1})};t.ui.dialogs.custom({title:t.ui.texts.get("mainviewChangePasswordTitle"),content:e("#mollify-tmpl-main-changepassword").tmpl({message:t.ui.texts.get("mainviewChangePasswordMessage")}),buttons:[{id:"yes",title:t.ui.texts.get("mainviewChangePasswordAction"),cls:"btn-primary"},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(e,t){var f=!1,l=!1,c=!1;if(e.id==="yes"){n.find(".control-group").removeClass("error"),n.find(".help-inline").text(""),f=r.find("input").val(),l=i.find("input").val(),c=s.find("input").val(),f||(r.addClass("error"),r.find(".help-inline").text(o)),l||(i.addClass("error"),i.find(".help-inline").text(o)),c||(s.addClass("error"),s.find(".help-inline").text(o)),l&&c&&l!=c&&(i.addClass("error"),s.addClass("error"),i.find(".help-inline").text(u),s.find(".help-inline").text(u));if(!f||!l||!c||l!=c)return}e.id==="yes"?a(f,l,t.close):t.close()},"on-show":function(t,o){n=o,r=e("#mollify-mainview-changepassword-old"),i=e("#mollify-mainview-changepassword-new1"),s=e("#mollify-mainview-changepassword-new2"),r.find("input").focus()}})}},t.view.MainViewFileView=function(){var s=this;this.viewId="files",this._currentFolder=!1,this._currentFolderData=!1,this._viewStyle=0,this._selected=[],this._customFolderTypes={},this._selectedItems=[],this._formatters={byteSize:new t.ui.formatters.ByteSize(new t.ui.formatters.Number(2,!1,t.ui.texts.get("decimalSeparator"))),timestamp:new t.ui.formatters.Timestamp(t.ui.texts.get("shortDateTimeFormat")),uploadSpeed:new t.ui.formatters.Number(1,t.ui.texts.get("dataRateKbps"),t.ui.texts.get("decimalSeparator"))},this._filelist={columns:[],addColumn:function(e){s._filelist.columns[e.id]=e}},this._filelist.addColumn({id:"name","title-key":"fileListColumnTitleName",sort:function(e,t,n,r){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())*n},content:function(e,t){return e.name}}),this._filelist.addColumn({id:"path","title-key":"fileListColumnTitlePath",sort:function(e,n,r,i){var s=t.filesystem.rootsById[e.root_id].name+e.path,o=t.filesystem.rootsById[n.root_id].name+n.path;return s.toLowerCase().localeCompare(o.toLowerCase())*r},content:function(e,n){return'<span class="item-path-root">'+t.filesystem.rootsById[e.root_id].name+'</span>: <span class="item-path-val">'+e.path+"</span>"}}),this._filelist.addColumn({id:"type","title-key":"fileListColumnTitleType",sort:function(e,t,n,r){var i=e.is_file?e.extension||"":"",s=t.is_file?t.extension||"":"";return i.toLowerCase().localeCompare(s.toLowerCase())*n},content:function(e,t){return e.is_file?e.extension||"":""}}),this._filelist.addColumn({id:"size","title-key":"fileListColumnTitleSize","min-width":75,sort:function(e,t,n,r){var i=e.is_file?parseInt(e.size,10):0,s=t.is_file?parseInt(t.size,10):0;return(i-s)*n},content:function(e,t){return e.is_file?s._formatters.byteSize.format(e.size):""}}),this._filelist.addColumn({id:"file-modified","request-id":"core-file-modified","title-key":"fileListColumnTitleLastModified",width:180,sort:function(e,t,n,r){if(!e.is_file&&!t.is_file)return 0;if(!r||!r["core-file-modified"])return 0;var i=r["core-file-modified"][e.id]?r["core-file-modified"][e.id]*1:0,s=r["core-file-modified"][t.id]?r["core-file-modified"][t.id]*1:0;return(i>s?1:-1)*n},content:function(e,n){return!e.id||!e.is_file||!n||!n["core-file-modified"]||!n["core-file-modified"][e.id]?"":s._formatters.timestamp.format(t.helpers.parseInternalTime(n["core-file-modified"][e.id]))}}),this._filelist.addColumn({id:"item-description","request-id":"core-item-description","title-key":"fileListColumnTitleDescription",sort:function(e,t,n,r){if(!e.is_file&&!t.is_file)return 0;if(!r||!r["core-item-description"])return 0;var i=r["core-item-description"][e.id]?r["core-item-description"][e.id]:"",s=r["core-item-description"][t.id]?r["core-item-description"][t.id]:"";return(i>s?1:-1)*n},content:function(e,t){if(!e.id||!t||!t["core-item-description"]||!t["core-item-description"][e.id])return"";var n=t["core-item-description"][e.id],r=n.replace(/<\/?[^>]+(>|$)/g,"");return'<div class="item-description-container" title="'+r+'">'+n+"</div>"}}),this._filelist.addColumn({id:"go-into-folder",title:"",width:25,sort:function(e,t,n,r){return 0},content:function(e,t){return e.is_file?"":'<div class="go-into-folder"><i class="icon-level-down"></i></div>'},"on-init":function(t){t.$i.delegate(".go-into-folder","click",function(n){var r=t.getItemForElement(e(this));if(!r||r.is_file)return;return s.changeToFolder(r),!1})}}),this.init=function(n){s.title=t.ui.texts.get("mainviewMenuTitle"),s.icon="icon-file-alt",t.events.addEventHandler(s.onEvent),s.addCustomFolderType("search",{getFolderInfo:function(n){var r=e.Deferred();return t.service.post("filesystem/search",{text:n.value,rq_data:s.getDataRequest()}).done(function(e){var t=[];for(var n in e.matches)t.push(e.matches[n].item);r.resolve({items:t,data:e.data,info:e})}),r.promise()},onRenderFolderView:function(n,r,i,o){t.dom.template("mollify-tmpl-main-searchresults",{folder:n,info:r}).appendTo(i),e("#mollify-searchresults-title-text").text(t.ui.texts.get("mainViewSearchResultsTitle",[""+r.info.count])),e("#mollify-searchresults-desc-text").text(t.ui.texts.get("mainViewSearchResultsDesc",[n.value]));var u=e("#mollify-fileview-folder-actions");s.addCommonFileviewActions(u)},onItemListRendered:function(n,r,i){var s=function(t){var n="",r=!0;return e.each(t,function(e,t){r||(n+=", "),n+=t.type,r=!1}),n},o=t.ui.texts.get("mainViewSearchResultTooltipMatches");e(".mollify-filelist-item").each(function(){var n=e(this),i=n.tmplItem().data,u=t.filesystem.rootsById[i.root_id].name+"/"+i.path+", "+o+s(r.info.matches[i.id].matches);n.tooltip({placement:"bottom",title:u,trigger:"hover"})})}}),e.each(t.plugins.getFileViewPlugins(),function(e,t){t.fileViewHandler.onInit&&t.fileViewHandler.onInit(s);if(!t.fileViewHandler.filelistColumns)return;var n=t.fileViewHandler.filelistColumns();if(!n)return;for(var r=0;r<n.length;r++)s._filelist.addColumn(n[r])}),s.itemContext=new t.ui.itemContext},this.addCustomFolderType=function(e,t){this._customFolderTypes[e]=t},this.onResize=function(){},this.onActivate=function(r){t.dom.template("mollify-tmpl-fileview").appendTo(r.content),s.showProgress();var i=[];e.each(t.session.folders,function(e,t){i.push({title:t.name,obj:t,callback:function(){s.changeToFolder(t)}})}),s.rootNav=r.addNavBar({title:t.ui.texts.get("mainViewRootsTitle"),items:i,onRender:t.ui.draganddrop?function(e,n,r){t.ui.draganddrop.enableDrop(n,{canDrop:function(e,t,n){if(!n||n.type!="filesystemitem")return!1;var i=n.payload,o=r(e);return s.canDragAndDrop(o,i)},dropType:function(e,t,n){if(!n||n.type!="filesystemitem")return!1;var i=n.payload,o=r(e);return s.dropType(o,i)},onDrop:function(e,t,n){if(!n||n.type!="filesystemitem")return;var i=n.payload,o=r(e);s.onDragAndDrop(o,i)}})}:!1}),s.initViewTools(r.tools),s.initList(),s.uploadProgress=new n(e("#mollify-mainview-progress")),s._dndUploader=!1,t.ui.uploader&&t.ui.uploader.initDragAndDropUploader&&(s._dndUploader=t.ui.uploader.initDragAndDropUploader({container:t.App.getElement(),dropElement:e("#mollify-folderview"),handler:s._getUploadHandler()})),s._scrollOutThreshold=1e5,s._scrollInThreshold=0,e(window).bind("scroll",s._updateScroll),e.each(t.plugins.getFileViewPlugins(),function(t,n){n.fileViewHandler.onActivate&&n.fileViewHandler.onActivate(e("#mollify"),r)});if(t.filesystem.roots.length===0){s.showNoRoots();return}var o=t.request.getParams();if(o.path){t.filesystem.findFolder({path:o.path},s.getDataRequest()).done(function(e){var t=e.folder;s.changeToFolder(t)}).fail(function(e){e.code==203&&(t.ui.dialogs.error({message:t.ui.texts.get("mainviewFolderNotFound",o.path)}),this.handled=!0),s.hideProgress(),s.openInitialFolder()});return}r.id?s.changeToFolder(r.id.join("/")).fail(function(){this.handled=!0,s.hideProgress(),s.openInitialFolder()}):s.openInitialFolder()},this.onRestoreView=function(e){s.changeToFolder(e.join("/"),!0)},this._getUploadHandler=function(e){return{start:function(e,n){s.uploadProgress.show(t.ui.texts.get(e.length>1?"mainviewUploadProgressManyMessage":"mainviewUploadProgressOneMessage",e.length),function(){n()})},progress:function(e,t){var n="";t&&(n=s._formatters.uploadSpeed.format(t/1024)),s.uploadProgress.set(e,n)},finished:function(){e&&e.close(),s.uploadProgress.hide(),t.ui.dialogs.notification({message:t.ui.texts.get("mainviewFileUploadComplete"),type:"success"}),s.refresh()},failed:function(){e&&e.close(),s.uploadProgress.hide(),t.ui.dialogs.notification({message:t.ui.texts.get("mainviewFileUploadFailed"),type:"error"})}}},this._updateScroll=function(){var t=e(window).scrollTop(),n=e("#mollify-folderview"),r=n.hasClass("detached"),i=!r&&t>s._scrollOutThreshold||r&&t<s._scrollInThreshold;if(!i)return;r?e("#mollify-folderview").removeClass("detached"):e("#mollify-folderview").addClass("detached")},this.openInitialFolder=function(){t.filesystem.roots.length===0?s.showNoRoots():t.filesystem.roots.length==1?s.changeToFolder(t.filesystem.roots[0]):s.changeToFolder(null)},this.onDeactivate=function(){e(window).unbind("scroll"),s._dndUploader&&s._dndUploader.destroy(),e.each(t.plugins.getFileViewPlugins(),function(e,t){t.fileViewHandler.onDeactivate&&t.fileViewHandler.onDeactivate()})},this.initViewTools=function(n){t.dom.template("mollify-tmpl-fileview-tools").appendTo(n),t.ui.process(n,["radio"],s),s.controls["mollify-fileview-style-options"].set(s._viewStyle);var r=function(){var t=e("#mollify-fileview-search-input").val();if(!t||t.length===0)return;e("#mollify-fileview-search-input").val(""),s.changeToFolder({type:"search",value:t})};e("#mollify-fileview-search-input").keyup(function(e){e.which==13&&r()}),e("#mollify-fileview-search > button").click(r)},this.getDataRequest=function(){var t=!s._currentFolder||!s._currentFolder.type?{"core-parent-description":{}}:{};return e.extend(t,s.itemWidget.getDataRequest?s.itemWidget.getDataRequest():{})},this.getCurrentFolder=function(){return s._currentFolder},this.onEvent=function(e){if(!e.type.startsWith("filesystem/"))return;s.refresh()},this.onRadioChanged=function(e,t,n){e=="mollify-fileview-style-options"&&s.onViewStyleChanged(t,n)},this.onViewStyleChanged=function(e,t){s._viewStyle=t,s.initList(),s.refresh()},this.showNoRoots=function(){s._currentFolder=!1,s._currentFolderData={items:t.filesystem.roots},s._updateUI()},this.showProgress=function(){e("#mollify-folderview-items").addClass("loading")},this.hideProgress=function(){e("#mollify-folderview-items").removeClass("loading")},this.changeToFolder=function(e,n){var r=e;return e&&typeof e!="string"&&(r=s._getFolderPublicId(e)),n||t.App.storeView("files/"+r),s._currentFolder&&s._currentFolder.type&&s._customFolderTypes[s._currentFolder.type]&&s._customFolderTypes[s._currentFolder.type].onFolderDeselect&&s._customFolderTypes[s._currentFolder.type].onFolderDeselect(s._currentFolder),window.scrollTo(0,0),s._selectedItems=[],s._currentFolder=!1,s._currentFolderData=!1,s.rootNav.setActive(!1),s._onSelectFolder(r)},this._getFolderPublicId=function(e){return e?e.type&&s._customFolderTypes[e.type]?e.type+"/"+e.id:e.id:""},this._onSelectFolder=function(n){var r=function(){s.hideProgress()};t.ui.hideActivePopup(),s.showProgress();var i=n?n.split("/"):[];return i.length>1&&s._customFolderTypes[i[0]]?s._customFolderTypes[i[0]].onSelectFolder(i[1]).done(s._setFolder).fail(r):!n||i.length==1?t.filesystem.folderInfo(n?i[0]:null,!0,s.getDataRequest()).done(function(e){var t=e.folder,n=e;n.items=e.folders.slice(0).concat(e.files),s._setFolder(t,n)}).fail(r):(s.hideProgress(),e.Deferred().reject())},this.refresh=function(){if(!s._currentFolder)return;s._onSelectFolder(s._getFolderPublicId(s._currentFolder))},this._setFolder=function(e,t){s._currentFolder=e,s._currentFolderData=t,s.hideProgress(),s._updateUI()},this._canWrite=function(){return s._currentFolderData?s._currentFolderData.permission=="RW"||s._currentFolderData.permission=="WD":!1},this.onRetrieveUrl=function(e){if(!s._currentFolder)return;s.showProgress(),t.service.post("filesystem/"+s._currentFolder.id+"/retrieve",{url:e}).done(function(e){s.hideProgress(),s.refresh()}).fail(function(n){s.hideProgress(),n.code==301&&(this.handled=!0,t.ui.views.dialogs.error({message:t.ui.texts.get("mainviewRetrieveFileResourceNotFound",[e])}))})},this.dropType=function(e,t){var n=!1;window.isArray(t)?t.length===0&&(n=t[0]):n=t;var r=!n||e.root_id!=n.root_id;return r?"copy":"move"},this.canDragAndDrop=function(e,n){var r=!1;window.isArray(n)?n.length===0&&(r=n[0]):r=n;if(r)return s.dropType(e,r)=="copy"?t.filesystem.canCopyTo(r,e):t.filesystem.canMoveTo(r,e);var i=!0;for(var o=0;o<n.length;o++){var u=n[o];if(s.dropType(e,u)=="copy"?!t.filesystem.canCopyTo(u,e):!t.filesystem.canMoveTo(u,e)){i=!1;break}}return i},this.onDragAndDrop=function(e,n){var r=s.dropType(e,n)=="copy";r?t.filesystem.copy(n,e):t.filesystem.move(n,e)},this._updateUI=function(){var n={title:function(){return this.data.title?this.data.title:t.ui.texts.get(this.data["title-key"])}},r=e("#mollify-folderview-header-content").empty();if(s._currentFolder&&s._currentFolder.type)s._customFolderTypes[s._currentFolder.type]&&s._customFolderTypes[s._currentFolder.type].onRenderFolderView(s._currentFolder,s._currentFolderData,r,o);else{var i=s._currentFolderData&&s._currentFolderData.hierarchy?s._currentFolderData.hierarchy[0]:!1;s.rootNav.setActive(i),s._currentFolder?t.dom.template("mollify-tmpl-fileview-header",{canWrite:s._canWrite(),folder:s._currentFolder}).appendTo(r):t.dom.template("mollify-tmpl-main-rootfolders").appendTo(r);var o=e("#mollify-fileview-folder-tools").empty(),u=e("#mollify-fileview-folder-actions");if(s._currentFolder){if(s._canWrite()){t.dom.template("mollify-tmpl-fileview-foldertools-action",{icon:"icon-folder-close"},n).appendTo(o).click(function(){return t.ui.controls.dynamicBubble({element:e(this),content:t.dom.template("mollify-tmpl-main-createfolder-bubble"),handler:{onRenderBubble:function(n){var r=e("#mollify-mainview-createfolder-name-input"),i=function(){var e=r.val();if(!e)return;n.hide(),t.filesystem.createFolder(s._currentFolder,e)};e("#mollify-mainview-createfolder-button").click(i),r.bind("keypress",function(e){(e.keyCode||e.which)==13&&i()}).focus()}}}),!1}),t.ui.uploader&&t.dom.template("mollify-tmpl-fileview-foldertools-action",{icon:"icon-download-alt"},n).appendTo(o).click(function(){return t.ui.controls.dynamicBubble({element:e(this),content:t.dom.template("mollify-tmpl-main-addfile-bubble"),handler:{onRenderBubble:function(n){t.ui.uploader.initUploadWidget(e("#mollify-mainview-addfile-upload"),{url:t.filesystem.getUploadUrl(s._currentFolder),handler:s._getUploadHandler(n)}),t.features.hasFeature("retrieve_url")||e("#mollify-mainview-addfile-retrieve").remove();var r=function(){var t=e("#mollify-mainview-addfile-retrieve-url-input").val();if(!t||t.length<1||t.substring(0,4).toLowerCase().localeCompare("http")!==0)return!1;n.close(),s.onRetrieveUrl(t)};e("#mollify-mainview-addfile-retrieve-url-input").bind("keypress",function(e){(e.keyCode||e.which)==13&&r()}),e("#mollify-mainview-addfile-retrieve-button").click(r)}}}),!1});var a=t.dom.template("mollify-tmpl-fileview-foldertools-action",{icon:"icon-cog",dropdown:!0},n).appendTo(u);t.ui.controls.dropdown({element:a,items:!1,hideDelay:0,style:"submenu",onShow:function(e,t){if(t)return;s.getItemActions(s._currentFolder,function(t){if(!t){e.hide();return}e.items(t)})}})}s.setupHierarchy(s._currentFolderData.hierarchy,o),s.showProgress()}s._dndUploader&&s._dndUploader.setUrl(s._canWrite()?t.filesystem.getUploadUrl(s._currentFolder):!1),s.addCommonFileviewActions(u)}t
.ui.process(r,["localize"]),s._scrollOutThreshold=e("#mollify-folderview-header").outerHeight()+40,s._scrollInThreshold=s._scrollOutThreshold-60,e("#mollify-folderview-detachholder").css("height",s._scrollInThreshold+40+"px"),e("#mollify-folderview").removeClass("detached"),s.onResize(),s._updateSelect();var f=s._currentFolderData.data&&s._currentFolderData.data["core-parent-description"];f&&e("#mollify-folder-description").text(s._currentFolderData.data["core-parent-description"]);var l=e("#mollify-folder-description"),c=s._currentFolder&&!s._currentFolder.type&&l.length>0&&t.session.features.descriptions&&t.session.admin;c?t.ui.controls.editableLabel({element:l,hint:t.ui.texts.get("mainviewDescriptionHint"),onedit:function(e){t.service.put("filesystem/"+s._currentFolder.id+"/description/",{description:e})}}):f||l.hide(),s._updateList(),s.hideProgress()},this.addCommonFileviewActions=function(e){var n={title:function(){return this.data.title?this.data.title:t.ui.texts.get(this.data["title-key"])}};s._selectModeBtn=t.dom.template("mollify-tmpl-fileview-foldertools-action",{icon:"icon-check",dropdown:!0,style:"narrow",action:!0},n).appendTo(e).click(s._onToggleSelect),t.ui.controls.dropdown({element:s._selectModeBtn,items:!1,hideDelay:0,style:"submenu",onShow:function(e){s._getSelectionActions(function(t){if(!t){e.hide();return}e.items(t)})}}),t.dom.template("mollify-tmpl-fileview-foldertools-action",{icon:"icon-refresh"},n).appendTo(e).click(s.refresh)},this._getViewItems=function(){return s._currentFolderData.items},this._getSelectionActions=function(e){var n=[];if(s._selectMode&&s._selectedItems.length>0){var r=t.plugins.getItemCollectionPlugins(s._selectedItems);n=t.helpers.getPluginActions(r),n.length>0&&n.unshift({title:"-"})}n.unshift({"title-key":"mainViewFileViewSelectNone",callback:function(){s._updateSelect([])}}),n.unshift({"title-key":"mainViewFileViewSelectAll",callback:function(){s._updateSelect(s._getViewItems())}}),e(t.helpers.cleanupActions(n))},this._onToggleSelect=function(){s._selectMode=!s._selectMode,s._updateSelect()},this._updateSelect=function(e){e!==undefined&&(s._selectedItems=e,s._selectMode=!0),s._selectMode?s._selectModeBtn.addClass("active"):s._selectModeBtn.removeClass("active"),s.itemWidget.setSelectMode(s._selectMode),s._selectMode&&s.itemWidget.setSelection(s._selectedItems)},this._getRootItems=function(){var e=[],n=function(e){return function(){s.changeToFolder(e)}};for(var r=0,i=t.session.folders.length;r<i;r++){var o=t.session.folders[r];e.push({title:o.name,callback:n(o)})}return e},this.setupHierarchy=function(n,r){var i=n,o=r.append(t.dom.template("mollify-tmpl-fileview-folder-hierarchy",{items:i}));t.ui.controls.dropdown({element:e("#mollify-folder-hierarchy-item-root"),items:s._getRootItems(),hideDelay:0,style:"submenu"});var u=e(".mollify-folder-hierarchy-item").click(function(){var t=e(this).tmplItem().data;s.changeToFolder(t)});t.ui.draganddrop&&t.ui.draganddrop.enableDrop(u.find("a"),{canDrop:function(e,t,n){if(!n||n.type!="filesystemitem")return!1;var r=n.payload,i=e.parent().tmplItem().data;return s.canDragAndDrop(i,r)},dropType:function(e,t,n){if(!n||n.type!="filesystemitem")return!1;var r=n.payload,i=e.tmplItem().data;return s.dropType(i,r)},onDrop:function(e,t,n){if(!n||n.type!="filesystemitem")return;var r=n.payload,i=e.parent().tmplItem().data;s.onDragAndDrop(i,r)}})},this.isListView=function(){return s._viewStyle===0},this._handleCustomAction=function(n,r,i){if(!t.settings["file-view"]||!t.settings["file-view"].actions)return!1;var o=t.settings["file-view"].actions;if(!o[n]||typeof o[n]!="function")return!1;var u={item:r,viewtype:s.isListView()?"list":"icon",target:i,element:s.itemWidget.getItemContextElement(r),viewport:s.itemWidget.getContainerElement(),container:e("#mollify-folderview-items"),folder:s._currentFolder,folder_permission:s._currentFolderData?s._currentFolderData.permission:!1},a=o[n](r,u);return a?(typeof a=="string"&&(a=="open_popup"?s.itemContext.open(u):a=="open_menu"?s.showActionMenu(r,u.element):!r.is_file&&a=="go_into_folder"&&s.changeToFolder(r)),!0):!1},this.initList=function(){var n=e("#mollify-folderview-header-items").empty();if(s.isListView()){var o=t.settings["list-view-columns"];s.itemWidget=new i("mollify-folderview-items",n,"main",this._filelist,o)}else{var u=!!t.session.features.thumbnails;s.itemWidget=new r("mollify-folderview-items",n,"main",s._viewStyle==1?"iconview-small":"iconview-large",u)}s.itemWidget.init({onFolderSelected:s.onFolderSelected,canDrop:s.canDragAndDrop,dropType:s.dropType,onDrop:s.onDragAndDrop,onClick:function(t,n,r){if(s._handleCustomAction("onClick",t,n))return;if(s.isListView()&&n!="icon"){var i=s._filelist.columns[n];if(i["on-click"]){i["on-click"](t,s._currentFolderData.data);return}}var o=!1;if(s.isListView()){if(!t.is_file)n=="name"?s.changeToFolder(t):n=="icon"&&(o=!0);else if(n=="name"||n=="icon")o=!0}else n=="info"||t.is_file?o=!0:s.changeToFolder(t);if(o){var u={item:t,viewtype:s.isListView()?"list":"icon",target:n,element:s.itemWidget.getItemContextElement(t),viewport:s.itemWidget.getContainerElement(),container:e("#mollify-folderview-items"),folder:s._currentFolder,folder_permission:s._currentFolderData?s._currentFolderData.permission:!1};s.itemContext.open(u)}},onDblClick:function(e){if(s._handleCustomAction("onDblClick",e))return;if(e.is_file)return;s.changeToFolder(e)},onRightClick:function(e,t,n){if(s._handleCustomAction("onRightClick",e,t))return;s.showActionMenu(e,s.itemWidget.getItemContextElement(e))},onContentRendered:function(e,t){s._currentFolder&&s._currentFolder.type&&s._customFolderTypes[s._currentFolder.type]&&s._customFolderTypes[s._currentFolder.type].onItemListRendered&&s._customFolderTypes[s._currentFolder.type].onItemListRendered(s._currentFolder,s._currentFolderData,e)},getSelectedItems:function(){return!s._selectMode||s._selectedItems.length===0?!1:s._selectedItems},onSelectUnselect:function(e){s._selectedItems.indexOf(e)>=0?s._selectedItems.remove(e):s._selectedItems.push(e),s.itemWidget.setSelection(s._selectedItems)}})},this._updateList=function(){s._items=s._currentFolderData.items,s._itemsById=t.helpers.mapByKey(s._items,"id");if(s._selectedItems){var n=[],r={};e.each(s._selectedItems,function(e,t){var i=s._itemsById[t.id];if(!i||r[t.id])return;n.push(i),r[t.id]=!0}),s._selectedItems=n}s.itemWidget.content(s._items,s._currentFolderData.data),s._selectMode&&s.itemWidget.setSelection(s._selectedItems)},this.showActionMenu=function(e,n){n.addClass("open");var r=t.ui.controls.popupmenu({element:n,onHide:function(){n.removeClass("open"),s.itemWidget.removeHover()}});s.getItemActions(e,function(e){if(!e){r.hide();return}r.items(e)})},this.getItemActions=function(e,n){t.filesystem.itemDetails(e,t.plugins.getItemContextRequestData(e)).done(function(r){if(!r){n([]);return}var i={details:r,folder:s._currentFolder,folder_permission:r.parent_permission};n(t.helpers.cleanupActions(t.helpers.getPluginActions(t.plugins.getItemContextPlugins(e,i))))})}};var n=function(e){var t=this;return this._h=e.height(),t._$title=e.find(".title"),t._$speed=e.find(".speed"),t._$bar=e.find(".bar"),{show:function(n,r){e.css("bottom",0-t._h+"px"),t._$title.text(n?n:""),t._$speed.text(""),t._$bar.css("width","0%"),e.show().animate({bottom:"0"},500,r)},set:function(e,n){t._$bar.css("width",e+"%"),t._$speed.text(n?n:"")},hide:function(n){setTimeout(function(){e.animate({bottom:0-t._h+"px"},500,function(){t._$bar.css("width","0%"),e.hide(),n&&n()})},1e3)}}},r=function(n,r,i,s,o){var u=this;u.$c=e("#"+n),u.viewId="mollify-iconview-"+i,this.init=function(n){u.p=n,r.append("<div class='mollify-iconview-header'></div>"),t.dom.template("mollify-tmpl-iconview",{viewId:u.viewId}).appendTo(u.$c.empty()),u.$l=e("#"+u.viewId),s&&u.$l.addClass(s)},this.content=function(n,r){u.items=n,u.data=r;var i=["jpg","png","gif","jpeg"];t.dom.template("mollify-tmpl-iconview-item",n,{showThumb:function(e){return!o||!e.is_file?!1:i.indexOf(e.extension)>=0},thumbUrl:function(e){return t.service.url("filesystem/"+e.id+"/thumbnail/")},typeClass:function(e){var t=e.is_file?"item-file":"item-folder";return e.is_file&&e.extension?t+=" item-type-"+e.extension:!e.is_file&&e.id==e.root_id&&(t+=" item-root-folder"),t}}).appendTo(u.$l.empty());var s=u.$l.find(".mollify-iconview-item").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}).bind("contextmenu",function(t){t.preventDefault();var n=e(this);return u.p.onRightClick(n.tmplItem().data,"",n),!1}).single_double_click(function(t){var n=e(this),r=n.tmplItem().data,i=e(t.target);if(i.hasClass("mollify-iconview-item-sel-option")){u.p.onSelectUnselect(r);return}var s="";i.parent().hasClass("mollify-iconview-item-info")&&(s="info"),u.p.onClick(r,s,n)},function(){u.p.onDblClick(e(this).tmplItem().data)}).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"});t.ui.draganddrop&&(t.ui.draganddrop.enableDrag(s,{onDragStart:function(e,t){var n=e.tmplItem().data,r=u.p.getSelectedItems();return r?r.indexOf(n)<0&&r.push(n):r=n,{type:"filesystemitem",payload:r}}}),t.ui.draganddrop.enableDrop(u.$l.find(".mollify-iconview-item.item-folder"),{canDrop:function(e,t,n){if(!u.p.canDrop||!n||n.type!="filesystemitem")return!1;var r=n.payload,i=e.tmplItem().data;return u.p.canDrop(i,r)},dropType:function(e,t,n){if(!u.p.dropType||!n||n.type!="filesystemitem")return!1;var r=n.payload,i=e.tmplItem().data;return u.p.dropType(i,r)},onDrop:function(e,t,n){if(!n||n.type!="filesystemitem")return;var r=n.payload,i=e.tmplItem().data;u.p.onDrop&&u.p.onDrop(i,r)}})),u.p.onContentRendered(n,r)},this.getItemContextElement=function(e){return u.$l.find("#mollify-iconview-item-"+e.id)},this.getContainerElement=function(){return u.$l},this.removeHover=function(){u.$l.find(".mollify-iconview-item.hover").removeClass("hover")},this.setSelectMode=function(e){u.$l.find(".mollify-iconview-item.selected").removeClass("selected"),e?u.$l.addClass("select"):u.$l.removeClass("select")},this.setSelection=function(t){u.$l.find(".mollify-iconview-item.selected").removeClass("selected"),e.each(t,function(e,t){u.$l.find("#mollify-iconview-item-"+t.id).addClass("selected")})}},i=function(n,r,i,s,o){var u=this;u.minColWidth=25,u.$c=e("#"+n),u.$hc=r,u.listId="mollify-filelist-"+i,u.cols=[],u.sortCol=!1,u.sortOrderAsc=!0,u.colWidths={};for(var a in o){var f=s.columns[a];if(!f)continue;var l=e.extend({},f,o[a]);u.cols.push(l)}this.init=function(n){u.p=n,t.dom.template("mollify-tmpl-filelist-header",{listId:u.listId}).appendTo(u.$hc.empty()),t.dom.template("mollify-tmpl-filelist",{listId:u.listId}).appendTo(u.$c.empty()),u.$l=e("#"+u.listId),u.$h=e("#"+u.listId+"-header-cols"),u.$i=e("#"+u.listId+"-items"),t.dom.template("mollify-tmpl-filelist-headercol",u.cols,{title:function(e){var n=e["title-key"];return n?t.ui.texts.get(n):""}}).appendTo(u.$h),u.$h.find(".mollify-filelist-col-header").each(function(t){var n=e(this),r=n.index();if(r<=1)return;var i=u.cols[r-2],s=i["min-width"]||u.minColWidth;n.css("min-width",s),i.width&&n.css("width",i.width),n.find(".mollify-filelist-col-header-title").click(function(){u.onSortClick(i)}),t!=u.cols.length-1&&n.resizable({handles:"e",minWidth:s,start:function(e,t){var r=u.$c.width()-u.cols.length*u.minColWidth;n.resizable("option","maxWidth",r)},stop:function(e,t){var r=n.width();u.colWidths[i.id]=r,u.updateColWidth(i.id,r)}}),i["on-init"]&&i["on-init"](u)}),u.items=[],u.data={},u.onSortClick(u.cols[0])},this.updateColWidths=function(){for(var e in u.colWidths)u.updateColWidth(e,u.colWidths[e])},this.updateColWidth=function(t,n){e(".mollify-filelist-col-"+t).width(n)},this.onSortClick=function(e){e.id!=u.sortCol.id?(u.sortCol=e,u.sortOrderAsc=!0):u.sortOrderAsc=!u.sortOrderAsc,u.refreshSortIndicator(),u.content(u.items,u.data)},this.sortItems=function(){var e=u.sortCol.sort;u.items.sort(function(t,n){return e(t,n,u.sortOrderAsc?1:-1,u.data)})},this.refreshSortIndicator=function(){u.$h.find(".mollify-filelist-col-header").removeClass("sort-asc").removeClass("sort-desc"),e("#mollify-filelist-col-header-"+u.sortCol.id).addClass("sort-"+(u.sortOrderAsc?"asc":"desc"))},this.getDataRequest=function(){var e={};for(var t=0,n=u.cols.length;t<n;t++){var r=u.cols[t];r["request-id"]&&(e[r["request-id"]]={})}return e},this.content=function(n,r){u.items=n,u.data=r,u.sortItems(),t.dom.template("mollify-tmpl-filelist-item",n,{cols:u.cols,typeClass:function(e){var t=e.is_file?"item-file":"item-folder";return e.is_file&&e.extension?t+=" item-type-"+e.extension:!e.is_file&&e.id==e.root_id&&(t+=" item-root-folder"),t},col:function(e,t){return t.content(e,u.data)},itemColStyle:function(e,t){var n="min-width:"+(t["min-width"]||u.minColWidth)+"px";return t.width&&(n=n+";width:"+t.width+"px"),n}}).appendTo(u.$i.empty());for(var i=0,s=u.cols.length;i<s;i++){var o=u.cols[i];o["on-render"]&&o["on-render"](u)}var a=u.$i.find(".mollify-filelist-item");a.hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}).bind("contextmenu",function(t){return t.preventDefault(),u.onItemClick(e(this),e(t.toElement||t.target),!1),!1}).single_double_click(function(t){return t.preventDefault(),t.stopPropagation(),u.onItemClick(e(this),e(t.toElement||t.target),!0),!1},function(){u.p.onDblClick(e(this).tmplItem().data)}),t.ui.draganddrop&&(t.ui.draganddrop.enableDrag(a,{onDragStart:function(e,t){var n=e.tmplItem().data,r=u.p.getSelectedItems();return r?r.indexOf(n)<0&&r.push(n):r=n,{type:"filesystemitem",payload:r}}}),t.ui.draganddrop.enableDrop(u.$i.find(".mollify-filelist-item.item-folder"),{canDrop:function(e,t,n){if(!u.p.canDrop||!n||n.type!="filesystemitem")return!1;var r=n.payload,i=e.tmplItem().data;return u.p.canDrop(i,r)},dropType:function(e,t,n){if(!u.p.dropType||!n||n.type!="filesystemitem")return!1;var r=n.payload,i=e.tmplItem().data;return u.p.dropType(i,r)},onDrop:function(e,t,n){if(!n||n.type!="filesystemitem")return;var r=n.payload,i=e.tmplItem().data;u.p.onDrop&&u.p.onDrop(i,r)}})),u.updateColWidths(),u.p.onContentRendered(n,r)},this.onItemClick=function(e,t,n){var r=e.find(".mollify-filelist-col").index(t.closest(".mollify-filelist-col"));if(r<0)return;var i=e.tmplItem().data;if(r===0){u.p.onSelectUnselect(i);return}var s=r===1?"icon":u.cols[r-2].id;n?u.p.onClick(i,s,e):u.p.onRightClick(i,s,e)},this.getItemContextElement=function(e){var t=u.$i.find("#mollify-filelist-item-"+e.id);return t.find(".mollify-filelist-col-name")||t},this.getItemForElement=function(e){return e.tmplItem().data},this.getContainerElement=function(){return u.$i},this.removeHover=function(){u.$i.find(".mollify-filelist-item.hover").removeClass("hover")},this.setSelectMode=function(e){u.$i.find(".mollify-filelist-item.selected").removeClass("selected"),e?(u.$l.addClass("select"),u.$h.addClass("select")):(u.$l.removeClass("select"),u.$h.removeClass("select"))},this.setSelection=function(t){u.$i.find(".mollify-filelist-item.selected").removeClass("selected"),e.each(t,function(e,t){u.$i.find("#mollify-filelist-item-"+t.id).addClass("selected")})}}}(window.jQuery,window.mollify),!function(e,t){"use strict";t.view.MainViewConfigView=function(){var n=this;this.viewId="admin",this._views=[],this._adminViews=[],this._adminViewsLoaded=!1,this.init=function(r){n.title=t.ui.texts.get("configviewMenuTitle"),n.icon="icon-cogs",n._views.push(new t.view.config.user.AccountView(r)),e.each(t.plugins.getConfigViewPlugins(),function(t,r){if(!r.configViewHandler.views)return;var i=r.configViewHandler.views();if(!i)return;e.each(i,function(e,t){n._views.push(t)})})},this.onResize=function(){},this.onActivate=function(r){t.templates.load("configview",t.templates.url("configview.html")).done(function(){t.dom.template("mollify-tmpl-configview").appendTo(r.content),n.showLoading(!0);var i=[];e.each(n._views,function(e,t){i.push({title:t.title,obj:t,callback:function(){n._activateView(t)}})}),n._userNav=r.addNavBar({title:t.ui.texts.get("configViewUserNavTitle"),items:i}),n.onResize();if(t.session.admin)if(n._adminViewsLoaded)n._initAdminViews(r);else{n._adminViewsLoaded=!0,n._adminViews.push(new t.view.config.admin.FoldersView),n._adminViews.push(new t.view.config.admin.UsersView),n._adminViews.push(new t.view.config.admin.GroupsView);var s=[];for(var o in t.session.plugins){if(!t.session.plugins[o]||!t.session.plugins[o].admin)continue;s.push(o)}t.admin={plugins:[]},n._loadAdminPlugins(s).done(function(){n._initAdminViews(r)})}})},this._loadAdminPlugins=function(r){var i=e.Deferred(),s=[];s.push(t.service.get("configuration/settings").done(function(e){n._settings=e}));for(var o=0,u=r.length;o<u;o++)s.push(t.dom.importScript(t.plugins.url(r[o],"plugin.js",!0)));return e.when.apply(e,s).done(function(){var r=[],s=function(e,t){n._adminViews.push(t)};for(var o in t.admin.plugins){var u=t.admin.plugins[o];if(!u||!u.views)continue;u.resources&&u.resources.texts&&r.push(t.ui.texts.loadPlugin(o)),e.each(u.views,s)}e.when.apply(e,r).done(i.resolve)}),i},this._initAdminViews=function(r){if(!t.session.admin||n._adminViews.length===0)return;e.each(n._adminViews,function(e,t){t.init&&t.init(n._settings,n)});var i=[];e.each(n._adminViews,function(e,t){i.push({title:t.title,obj:t,callback:function(){n._activateView(t,!0)}})}),n._adminNav=r.addNavBar({title:t.ui.texts.get("configViewAdminNavTitle"),items:i});if(r.id){var s=n._findView(r.id[0]);s&&n._activateView(s.view,s.admin)}else n._activateView(n._views[0])},this._findView=function(t){var r=!1;return e.each(n._views,function(e,n){if(n.viewId==t)return r={view:n,admin:!1},!1}),r||e.each(n._adminViews,function(e,n){if(n.viewId==t)return r={view:n,admin:!0},!1}),r},this.onRestoreView=function(e){var t=n._findView(e[0]);t&&n._activateView(t.view,t.admin,!0)},this._activateView=function(r,i,s){n._activeView&&(n._activeView.onDeactivate&&n._activeView.onDeactivate(),n._adminNav&&n._adminNav.setActive(!1),n._userNav.setActive(!1)),i?n._adminNav.setActive(r):n._userNav.setActive(r),n.showLoading(!1),n._activeView=r,!s&&n._activeView.viewId&&t.App.storeView("admin/"+n._activeView.viewId),e("#mollify-configview-header").html(r.title),r.onActivate(n._getContentElement().empty(),n)},this._getContentElement=function(){return e("#mollify-configview-content")},this.onDeactivate=function(){n._activeView&&n._activeView.onDeactivate&&n._activeView.onDeactivate()},this.showLoading=function(e){e?n._getContentElement().find(".mollify-configlistview").addClass("loading"):n._getContentElement().find(".mollify-configlistview").removeClass("loading")}},t.view.ConfigListView=function(n,r){t.dom.template("mollify-tmpl-configlistview",{title:r.title,actions:r.actions||!1}).appendTo(n);var i=n.find(".mollify-configlistview-table"),s=t.ui.controls.table(i,r.table),o=function(e,t){t?n.find("#mollify-configlistview-action-"+e).removeClass("disabled"):n.find("#mollify-configlistview-action-"+e).addClass("disabled")};return r.actions&&(s.onSelectionChanged(function(){var t=s.getSelected(),n=t.length>0,i=t.length==1,u=t.length>1;e.each(r.actions,function(e,t){if(!t.depends)return;t.depends=="table-selection"?o(t.id,n):t.depends=="table-selection-one"?o(t.id,i):t.depends=="table-selection-many"&&o(t.id,u)})}),n.find(".mollify-configlistview-actions > .mollify-configlistview-action").click(function(){if(e(this).hasClass("disabled"))return;var t=e(this).tmplItem().data;if(!t.callback)return;var n;t.depends&&t.depends.startsWith("table-selection")&&(n=s.getSelected()),t.callback(n)})),{table:s,enableAction:o}},t.view.config={user:{},admin:{}},t.view.config.user.AccountView=function(n){var r=this;this.viewId="account",this.title=t.ui.texts.get("configUserAccountNavTitle"),this.onActivate=function(r){t.dom.template("mollify-tmpl-config-useraccountview",t.session).appendTo(r),t.ui.process(r,["localize"]),e("#user-account-change-password-btn").click(n.changePassword)}},t.view.config.admin.UsersView=function(){var n=this;this.viewId="users",this.init=function(e,r){n._cv=r,n.title=t.ui.texts.get("configAdminUsersNavTitle"),n._permissionOptions=["a","rw","wd","ro","no"],n._permissionTexts={a:t.ui.texts.get("configAdminUsersPermissionModeAdmin"),rw:t.ui.texts.get("pluginPermissionsValueRW"),wd:t.ui.texts.get("pluginPermissionsValueWD"),ro:t.ui.texts.get("pluginPermissionsValueRO"),no:t.ui.texts.get("pluginPermissionsValueNO")},n._authenticationOptions=e.authentication_methods,n._authFormatter=function(e){return e},n._defaultAuthMethod=e.authentication_methods[0],n._langFormatter=function(e){return t.ui.texts.get("language_"+e)}},this.onActivate=function(r){var i=!1,s=!1;n._details=t.ui.controls.slidePanel(e("#mollify-mainview-viewcontent"),{resizable:!0});var o=function(t){var n={criteria:{}},r=e("#mollify-admin-user-searchoptions-name").val();r&&r.length>0&&(n.criteria.name=r);var i=e("#mollify-admin-user-searchoptions-email").val();return i&&i.length>0&&(n.criteria.email=i),n},u=function(){n._cv.showLoading(!0),s.table.refresh().done(function(){n._cv.showLoading(!1)})},a=function(){n._details.hide(),u()};s=new t.view.ConfigListView(r,{actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:function(){n.onAddEditUser(!1,a)}},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminUsersRemoveUsersConfirmationTitle"),message:t.ui.texts.get("configAdminUsersRemoveUsersConfirmationMessage",[e.length]),callback:function(){n._removeUsers(e).done(a)}})}},{id:"action-refresh",content:'<i class="icon-refresh"></i>',callback:u}],table:{id:"config-admin-users",key:"id",narrow:!0,hilight:!0,remote:{path:"configuration/users/query",paging:{max:50},queryParams:o,onLoad:function(e){r.addClass("loading"),e.done(function(){r.removeClass("loading")})}},columns:[{type:"selectrow"},{id:"icon",title:"",type:"static",content:'<i class="icon-user"></i>'},{id:"name",title:t.ui.texts.get("configAdminUsersNameTitle"),sortable:!0},{id:"permission_mode",title:t.ui.texts.get("configAdminUsersPermissionTitle"),sortable:!0,valueMapper:function(e,t){var r=t.toLowerCase();return n._permissionTexts[r]?n._permissionTexts[r]:t}},{id:"email",title:t.ui.texts.get("configAdminUsersEmailTitle"),sortable:!0},{id:"edit",title:t.ui.texts.get("configAdminActionEditTitle"),type:"action",content:'<i class="icon-edit"></i>'},{id:"pw",title:t.ui.texts.get("configAdminUsersActionChangePasswordTitle"),type:"action",content:'<i class="icon-key"></i>'},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(e,r){e=="edit"?t.service.get("configuration/users/"+r.id).done(function(e){n.onAddEditUser(e,a)}):e=="pw"?n.onChangePassword(r):e=="remove"&&t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminUsersRemoveUserConfirmationTitle"),message:t.ui.texts.get("configAdminUsersRemoveUserConfirmationMessage",[r.name]),callback:function(){t.service.del("configuration/users/"+r.id).done(a)}})},onHilight:function(e){e?(n._showUserDetails(e,n._details.getContentElement().empty(),n._allGroups,n._allFolders),n._details.show(!1,400)):n._details.hide()}}}),n._cv.showLoading(!0);var f=r.find(".mollify-configlistview-options");t.dom.template("mollify-tmpl-config-admin-user-searchoptions").appendTo(f),t.ui.process(f,["localize"]);var l=t.service.get("configuration/usergroups").done(function(e){n._allGroups=e}),c=t.service.get("configuration/folders").done(function(e){n._allFolders=e});e.when(l,c).done(u)},this.onChangePassword=function(r,i){var s=!1,o=!1,u=!1;t.ui.dialogs.custom({resizable:!0,initSize:[600,200],title:t.ui.texts.get("configAdminUsersChangePasswordDialogTitle",r.name),content:t.dom.template("mollify-tmpl-config-admin-userchangepassworddialog",{user:r}),buttons:[{id:"yes",title:t.ui.texts.get("dialogSave")},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(e,n){if(e.id=="no"){n.close();return}var s=u.val();if(!s||s.length===0)return;t.service.put("configuration/users/"+r.id+"/password",{"new":window.Base64.encode(s)}).done(n.close).done(i)},"on-show":function(i,o){e("#change-password-title").text(t.ui.texts.get("configAdminUsersChangePasswordTitle",r.name)),s=o.find("#mollify-config-admin-userchangepassworddialog-content"),u=o.find("#passwordField"),e("#generatePasswordBtn").click(function(){return u.val(n._generatePassword()),!1}),u.focus(),i.center()}})},this.onDeactivate=function(){n._details.remove()},this._showUserDetails=function(n,r,i,s){t.dom.template("mollify-tmpl-config-admin-userdetails",{user:n}).appendTo(r),t.ui.process(r,["localize"]);var o=r.find(".mollify-config-admin-userdetails-groups"),u=r.find(".mollify-config-admin-userdetails-folders"),a=!1,f=!1,l=!1,c=!1,h=function(){o.addClass("loading"),t.service.get("configuration/users/"+n.id+"/groups/").done(function(e){o.removeClass("loading"),c=e,f.table.set(c)})},p=function(){u.addClass("loading"),t.service.get("configuration/users/"+n.id+"/folders/").done(function(e){u.removeClass("loading"),l=e,a.table.set(l)})},d=function(){var r=t.helpers.extractValue(l,"id"),i=t.helpers.filter(s,function(e){return r.indexOf(e.id)<0});t.ui.dialogs.select({title:t.ui.texts.get("configAdminUserAddFolderTitle"),message:t.ui.texts.get("configAdminUserAddFolderMessage"),key:"id",initSize:[600,400],columns:[{id:"icon",title:"",type:"static",content:'<i class="icon-folder"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersFolderDefaultNameTitle")},{id:"user_name",title:t.ui.texts.get("configAdminUsersFolderNameTitle"),type:"input"},{id:"path",title:t.ui.texts.get("configAdminFoldersPathTitle")}],list:i,onSelect:function(r,i){var s=[];e.each(r,function(e,t){var n={id:t.id},r=i[t.id]?i[t.id].user_name:!1;r&&t.name!=r&&(n.name=r),s.push(n)}),t.service.post("configuration/users/"+n.id+"/folders/",s).done(p)}})},v=function(){var e=t.helpers.extractValue(c,"id"),r=t.helpers.filter(i,function(t){return e.indexOf(t.id)<0});t.ui.dialogs.select({title:t.ui.texts.get("configAdminUserAddGroupTitle"),message:t.ui.texts.get("configAdminUserAddGroupMessage"),key:"id",initSize:[600,400],columns:[{id:"icon",title:"",type:"static",content:'<i class="icon-folder"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersGroupNameTitle")},{id:"description",title:t.ui.texts.get("configAdminGroupsDescriptionTitle")}],list:r,onSelect:function(e,r){t.service.post("configuration/users/"+n.id+"/groups/",t.helpers.extractValue(e,"id")).done(h)}})};a=new t.view.ConfigListView(r.find(".mollify-config-admin-userdetails-folders"),{title:t.ui.texts.get("configAdminUsersFoldersTitle"),actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:d},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.service.del("configuration/users/"+n.id+"/folders/",{ids:t.helpers.extractValue(e,"id")}).done(p)}}],table:{id:"config-admin-userfolders",key:"id",narrow:!0,columns:[{type:"selectrow"},{id:"icon",title:"",type:"static",content:'<i class="icon-folder"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersFolderNameTitle"),valueMapper:function(e,n){var r=e.name;return r&&r.length>0?r:t.ui.texts.get("configAdminUsersFolderDefaultName",e.default_name)}},{id:"path",title:t.ui.texts.get("configAdminFoldersPathTitle")},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(e,r){e=="remove"&&t.service.del("configuration/users/"+n.id+"/folders/"+r.id).done(p)}}}),f=new t.view.ConfigListView(r.find(".mollify-config-admin-userdetails-groups"),{title:t.ui.texts.get("configAdminUsersGroupsTitle"),actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:v},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.service.del("configuration/users/"+n.id+"/groups/",{ids:t.helpers.extractValue(e,"id")}).done(h)}}],table:{id:"config-admin-usergroups",key:"id",narrow:!0,columns:[{type:"selectrow"},{id:"icon",title:"",type:"static",content:'<i class="icon-user"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersGroupNameTitle")},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(e,r){e=="remove"&&t.service.del("configuration/users/"+n.id+"/groups/"+r.id).done(h)}}}),h(),p()},this._generatePassword=function(){var e=8,t="",r;for(var i=0;i<e;i++){for(;;){r=parseInt(Math.random()*1e3,10)%94+33;if(n._isValidPasswordChar(r))break}t+=String.fromCharCode(r)}return t},this._isValidPasswordChar=function(e){return e>=33&&e<=47?!1:e>=58&&e<=64?!1:e>=91&&e<=96?!1:e>=123&&e<=126?!1:!0},this._removeUsers=function(e){return t.service.del("configuration/users",{ids:t.helpers.extractValue(e,"id")})},this.onAddEditUser=function(r,i){var s=!1,o=!1,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=t.settings.language.options&&t.settings.language.options.length>1;t.ui.dialogs.custom({resizable:!0,initSize:[600,400],title:t.ui.texts.get(r?"configAdminUsersUserDialogEditTitle":"configAdminUsersUserDialogAddTitle"),content:t.dom.template("mollify-tmpl-config-admin-userdialog",{user:r,showLanguages:p}),buttons:[{id:"yes",title:t.ui.texts.get("dialogSave")},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(e,n){if(e.id=="no"){n.close();return}var s=o.val(),d=u.val(),v=f.selected(),m=t.helpers.formatInternalTime(h.get()),g=l.selected();if(!s||s.length===0)return;var y=null;p&&(y=c.selected());var b={name:s,email:d,permission_mode:v,expiration:m,auth:g,lang:y};if(r)t.service.put("configuration/users/"+r.id,b).done(n.close).done(i);else{var w=a.val();if(!w||w.length===0)return;b.password=window.Base64.encode(w),t.service.post("configuration/users",b).done(n.close).done(i)}},"on-show":function(i,d){s=d.find("#mollify-config-admin-userdialog-content"),o=d.find("#usernameField"),u=d.find("#emailField"),a=d.find("#passwordField"),e("#generatePasswordBtn").click(function(){return a.val(n._generatePassword()),!1}),f=t.ui.controls.select("permissionModeField",{values:n._permissionOptions,valueMapper:function(e){return n._permissionTexts[e]}}),l=t.ui.controls.select("authenticationField",{values:n._authenticationOptions,none:t.ui.texts.get("configAdminUsersUserDialogAuthDefault",n._defaultAuthMethod),valueMapper:n._authFormatter}),p&&(c=t.ui.controls.select("languageField",{values:t.settings.language.options,none:t.ui.texts.get("configAdminUsersUserDialogLangDefault",t.settings.language["default"]||"en"),valueMapper:n._langFormatter})),h=t.ui.controls.datepicker("expirationField",{format:t.ui.texts.get("shortDateTimeFormat"),time:!0}),r?(o.val(r.name),u.val(r.email||""),f.select(r.permission_mode.toLowerCase()),l.select(r.auth?r.auth.toLowerCase():null),h.set(t.helpers.parseInternalTime(r.expiration)),p&&r.lang&&c.select(r.lang)):f.select("no"),o.focus(),i.center()}})}},t.view.config.admin.GroupsView=function(){var n=this;this.viewId="groups",this.init=function(e,r){n._cv=r,n.title=t.ui.texts.get("configAdminGroupsNavTitle")},this.onActivate=function(r){var i=!1,s=!1;n._details=t.ui.controls.slidePanel(e("#mollify-mainview-viewcontent"),{resizable:!0});var o=function(){n._details.hide(),n._cv.showLoading(!0),t.service.get("configuration/usergroups/").done(function(e){n._cv.showLoading(!1),i=e,s.table.set(i)})};s=new t.view.ConfigListView(r,{actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:function(){n.onAddEditGroup(!1,o)}},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminGroupsRemoveGroupsConfirmationTitle"),message:t.ui.texts.get("configAdminGroupsRemoveGroupsConfirmationMessage",[e.length]),callback:function(){n._removeGroups(e).done(o)}})}},{id:"action-refresh",content:'<i class="icon-refresh"></i>',callback:o}],table:{id:"config-admin-groups",key:"id",narrow:!0,hilight:!0,columns:[{type:"selectrow"},{id:"icon",title:"",type:"static",content:'<i class="icon-user"></i>'},{id:"name",title:t.ui.texts.get("configAdminUsersNameTitle")},{id:"description",title:t.ui.texts.get("configAdminGroupsDescriptionTitle")},{id:"edit",title:t.ui.texts.get("configAdminActionEditTitle"),type:"action",content:'<i class="icon-edit"></i>'},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'
}],onRowAction:function(e,r){e=="edit"?n.onAddEditGroup(r,o):e=="remove"&&t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminGroupsRemoveGroupConfirmationTitle"),message:t.ui.texts.get("configAdminGroupsRemoveGroupConfirmationMessage",[r.name]),callback:function(){t.service.del("configuration/usergroups/"+r.id).done(o)}})},onHilight:function(e){e?(n._showGroupDetails(e,n._details.getContentElement().empty(),n._allUsers,n._allFolders),n._details.show(!1,400)):n._details.hide()}}}),o(),n._cv.showLoading(!0);var u=t.service.get("configuration/users").done(function(e){n._allUsers=e}),a=t.service.get("configuration/folders").done(function(e){n._allFolders=e});e.when(u,a).done(function(){n._cv.showLoading(!1)})},this.onDeactivate=function(){n._details.remove()},this._showGroupDetails=function(n,r,i,s){t.dom.template("mollify-tmpl-config-admin-groupdetails",{group:n}).appendTo(r),t.ui.process(r,["localize"]);var o=r.find(".mollify-config-admin-groupdetails-users"),u=r.find(".mollify-config-admin-groupdetails-folders"),a=!1,f=!1,l=!1,c=!1,h=function(){o.addClass("loading"),t.service.get("configuration/usergroups/"+n.id+"/users/").done(function(e){o.removeClass("loading"),c=e,f.table.set(c)})},p=function(){u.addClass("loading"),t.service.get("configuration/users/"+n.id+"/folders/").done(function(e){u.removeClass("loading"),l=e,a.table.set(l)})},d=function(){var e=t.helpers.extractValue(c,"id"),r=t.helpers.filter(i,function(t){return e.indexOf(t.id)<0});t.ui.dialogs.select({title:t.ui.texts.get("configAdminGroupAddUserTitle"),message:t.ui.texts.get("configAdminGroupAddUserMessage"),key:"id",initSize:[600,400],columns:[{id:"icon",title:"",type:"static",content:'<i class="icon-folder"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersNameTitle")}],list:r,onSelect:function(e,r){t.service.post("configuration/usergroups/"+n.id+"/users/",t.helpers.extractValue(e,"id")).done(h)}})},v=function(){var r=t.helpers.extractValue(l,"id"),i=t.helpers.filter(s,function(e){return r.indexOf(e.id)<0});t.ui.dialogs.select({title:t.ui.texts.get("configAdminGroupAddFolderTitle"),message:t.ui.texts.get("configAdminGroupAddFolderMessage"),key:"id",initSize:[600,400],columns:[{id:"icon",title:"",type:"static",content:'<i class="icon-folder"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersFolderDefaultNameTitle")},{id:"user_name",title:t.ui.texts.get("configAdminUsersFolderNameTitle"),type:"input"},{id:"path",title:t.ui.texts.get("configAdminFoldersPathTitle")}],list:i,onSelect:function(r,i){var s=[];e.each(r,function(e,t){var n={id:t.id},r=i[t.id]?i[t.id].user_name:!1;r&&t.name!=r&&(n.name=r),s.push(n)}),t.service.post("configuration/users/"+n.id+"/folders/",s).done(p)}})};a=new t.view.ConfigListView(u,{title:t.ui.texts.get("configAdminGroupsFoldersTitle"),actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:v},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.service.del("configuration/users/"+n.id+"/folders/",{ids:t.helpers.extractValue(e,"id")}).done(p)}}],table:{id:"config-admin-groupfolders",key:"id",narrow:!0,columns:[{type:"selectrow"},{id:"icon",title:"",type:"static",content:'<i class="icon-folder"></i>'},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersFolderNameTitle"),valueMapper:function(e,n){var r=e.name;return r&&r.length>0?r:t.ui.texts.get("configAdminUsersFolderDefaultName",e.default_name)}},{id:"path",title:t.ui.texts.get("configAdminFoldersPathTitle")},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(e,r){e=="remove"&&t.service.del("configuration/users/"+n.id+"/folders/"+r.id).done(p)}}}),f=new t.view.ConfigListView(o,{title:t.ui.texts.get("configAdminGroupsUsersTitle"),actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:d},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.service.post("configuration/usergroups/"+n.id+"/remove_users/",t.helpers.extractValue(e,"id")).done(h)}}],table:{id:"config-admin-groupusers",key:"id",narrow:!0,columns:[{type:"selectrow"},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUsersNameTitle")},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(e,r){e=="remove"&&t.service.post("configuration/usergroups/"+n.id+"/remove_users/",[r.id]).done(h)}}}),h(),p()},this._removeGroups=function(e){return t.service.del("configuration/usergroups",{ids:t.helpers.extractValue(e,"id")})},this.onAddEditGroup=function(e,n){var r=!1,i=!1,s=!1;t.ui.dialogs.custom({resizable:!0,initSize:[600,400],title:t.ui.texts.get(e?"configAdminGroupsDialogEditTitle":"configAdminGroupsDialogAddTitle"),content:t.dom.template("mollify-tmpl-config-admin-groupdialog",{group:e}),buttons:[{id:"yes",title:t.ui.texts.get("dialogSave")},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(r,o){if(r.id=="no"){o.close();return}var u=i.val();if(!u||u.length===0)return;var a=s.val(),f={name:u,description:a};e?t.service.put("configuration/usergroups/"+e.id,f).done(o.close).done(n):t.service.post("configuration/usergroups",f).done(o.close).done(n)},"on-show":function(t,n){r=n.find("#mollify-config-admin-groupdialog-content"),i=n.find("#nameField"),s=n.find("#descriptionField"),e&&(i.val(e.name),s.val(e.description||"")),i.focus(),t.center()}})}},t.view.config.admin.FoldersView=function(){var n=this;this.viewId="folders",this.init=function(e,r){n._cv=r,n._settings=e,n.title=t.ui.texts.get("configAdminFoldersNavTitle")},this.onActivate=function(r){var i=!1,s=!1;n._details=t.ui.controls.slidePanel(e("#mollify-mainview-viewcontent"),{resizable:!0});var o=function(){n._cv.showLoading(!0),t.service.get("configuration/folders/").done(function(e){n._cv.showLoading(!1),i=e,s.table.set(i)})};s=new t.view.ConfigListView(r,{actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:function(){n.onAddEditFolder(!1,o)}},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(e){t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminFoldersRemoveFoldersConfirmationTitle"),message:t.ui.texts.get("configAdminFoldersRemoveFoldersConfirmationMessage",[e.length]),callback:function(){n._removeFolders(e).done(o)}})}},{id:"action-refresh",content:'<i class="icon-refresh"></i>',callback:o}],table:{id:"config-admin-folders",key:"id",narrow:!0,hilight:!0,columns:[{type:"selectrow"},{id:"icon",title:"",type:"static",content:'<i class="icon-folder-close"></i>'},{id:"name",title:t.ui.texts.get("configAdminFoldersNameTitle")},{id:"path",title:t.ui.texts.get("configAdminFoldersPathTitle")},{id:"edit",title:t.ui.texts.get("configAdminActionEditTitle"),type:"action",content:'<i class="icon-edit"></i>'},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(e,r){e=="edit"?n.onAddEditFolder(r,o):e=="remove"&&t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminFoldersRemoveFolderConfirmationTitle"),message:t.ui.texts.get("configAdminFoldersRemoveFolderConfirmationMessage",[r.name]),callback:function(){t.service.del("configuration/folders/"+r.id).done(o)}})},onHilight:function(e){e?(n._showFolderDetails(e,n._details.getContentElement().empty(),n._allGroups,n._allUsers),n._details.show(!1,400)):n._details.hide()}}}),o(),n._cv.showLoading(!0);var u=t.service.get("configuration/usersgroups").done(function(e){n._allUsers=e.users,n._allGroups=e.groups,n._cv.showLoading(!1)})},this.onDeactivate=function(){n._details.remove()},this._showFolderDetails=function(e,n,r,i){t.dom.template("mollify-tmpl-config-admin-folderdetails",{folder:e}).appendTo(n),t.ui.process(n,["localize"]);var s=n.find(".mollify-config-admin-folderdetails-usersandgroups"),o=!1,u=!1,a=r.concat(i),f=function(){s.addClass("loading"),t.service.get("configuration/folders/"+e.id+"/users/").done(function(e){s.removeClass("loading"),u=e,o.table.set(e)})},l=function(){var n=t.helpers.extractValue(u,"id"),r=t.helpers.filter(a,function(e){return n.indexOf(e.id)<0});t.ui.dialogs.select({title:t.ui.texts.get("configAdminFolderAddUserTitle"),message:t.ui.texts.get("configAdminFolderAddUserMessage"),key:"id",initSize:[600,400],columns:[{id:"icon",title:"",valueMapper:function(e,t){return e.is_group==1?"<i class='icon-user'></i><i class='icon-user'></i>":"<i class='icon-user'></i>"}},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUserDialogUsernameTitle")}],list:r,onSelect:function(n,r){t.service.post("configuration/folders/"+e.id+"/users/",t.helpers.extractValue(n,"id")).done(f)}})};o=new t.view.ConfigListView(s,{title:t.ui.texts.get("configAdminFolderUsersTitle"),actions:[{id:"action-add",content:'<i class="icon-plus"></i>',callback:l},{id:"action-remove",content:'<i class="icon-trash"></i>',cls:"btn-danger",depends:"table-selection",callback:function(n){t.service.post("configuration/folders/"+e.id+"/remove_users/",t.helpers.extractValue(n,"id")).done(f)}}],table:{id:"config-admin-folderusers",key:"id",narrow:!0,columns:[{type:"selectrow"},{id:"icon",title:"",valueMapper:function(e,t){return e.is_group==1?"<i class='icon-user'></i><i class='icon-user'></i>":"<i class='icon-user'></i>"}},{id:"id",title:t.ui.texts.get("configAdminTableIdTitle")},{id:"name",title:t.ui.texts.get("configAdminUserDialogUsernameTitle")},{id:"remove",title:t.ui.texts.get("configAdminActionRemoveTitle"),type:"action",content:'<i class="icon-trash"></i>'}],onRowAction:function(n,r){n=="remove"&&t.service.post("configuration/folders/"+e.id+"/remove_users/",[r.id]).done(f)}}}),f()},this._removeFolders=function(e){return t.service.del("configuration/folders",{ids:t.helpers.extractValue(e,"id")})},this._isValidPath=function(e){if(!e)return!1;if(e.indexOf("..")>=0)return!1;if(n._settings.published_folders_root)if(e.indexOf("/")===0||e.indexOf(":\\")===0)return!1;return!0},this.onAddEditFolder=function(e,r){var i=!1,s=!1,o=!1;t.ui.dialogs.custom({resizable:!0,initSize:[500,300],title:t.ui.texts.get(e?"configAdminFoldersFolderDialogEditTitle":"configAdminFoldersFolderDialogAddTitle"),content:t.dom.template("mollify-tmpl-config-admin-folderdialog",{folder:e}),buttons:[{id:"yes",title:t.ui.texts.get("dialogSave")},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(u,a){if(u.id=="no"){a.close();return}i.find(".control-group").removeClass("error");var l=s.val();l||s.closest(".control-group").addClass("error");var c=o.val(),h=n._isValidPath(c);h||o.closest(".control-group").addClass("error");if(!l){s.focus();return}if(!h){o.focus();return}var p={name:l,path:c},d=function(n){n.code==105&&(this.handled=!0,t.ui.dialogs.confirmation({title:t.ui.texts.get("configAdminFoldersFolderDialogAddTitle"),message:t.ui.texts.get("configAdminFoldersFolderDialogAddFolderDoesNotExist"),callback:function(){p.create=!0,e?t.service.put("configuration/folders/"+e.id,p).done(a.close).done(r):t.service.post("configuration/folders",p).done(a.close).done(r)}}))};e?t.service.put("configuration/folders/"+e.id,p).done(a.close).done(r).fail(d):t.service.post("configuration/folders",p).done(a.close).done(r).fail(d)},"on-show":function(t,n){i=n.find("#mollify-config-admin-folderdialog-content"),s=n.find("#nameField"),o=n.find("#pathField"),e&&(s.val(e.name),o.val(e.path)),s.focus(),t.center()}})}}}(window.jQuery,window.mollify),!function(e,t){"use strict";t.view.LoginView=function(){var n=this;n.init=function(e){t.dom.loadContentInto(e,t.templates.url("loginview.html"),n,["localize","bubble"])},n.onLoad=function(){t.features.hasFeature("lost_password")&&e("#mollify-login-forgot-password").show(),t.features.hasFeature("registration")&&t.plugins.exists("plugin-registration")&&e("#mollify-login-register").click(function(){t.plugins.get("plugin-registration").show()}).show(),e("#mollify-login-name, #mollify-login-password").bind("keypress",function(e){(e.keyCode||e.which)==13&&n.onLogin()}),e("#mollify-login-button").click(n.onLogin),e("#mollify-login-name").focus()},n.onRenderBubble=function(e,t){},n.onShowBubble=function(r,i){r==="mollify-login-forgot-password"&&(e("#mollify-login-forgot-button").click(function(){var r=e("#mollify-login-forgot-email").val();if(!r)return;i.hide(),n.wait=t.ui.dialogs.wait({target:"mollify-login-main"}),n.onResetPassword(r)}),e("#mollify-login-forgot-email").val("").focus())},n.onLogin=function(){var r=e("#mollify-login-name").val(),i=e("#mollify-login-password").val(),s=e("#mollify-login-remember-cb").is(":checked");if(!r||r.length<1){e("#mollify-login-name").focus();return}if(!i||i.length<1){e("#mollify-login-password").focus();return}n.wait=t.ui.dialogs.wait({target:"mollify-login-main"}),t.service.post("session/authenticate",{protocol_version:3,username:r,password:window.Base64.encode(i),remember:s}).done(function(e){t.events.dispatch("session/start",e)}).fail(function(e){e.code==107&&(this.handled=!0),n.showLoginError()})},n.onResetPassword=function(e){t.service.post("lostpassword",{email:e}).done(function(e){n.wait.close(),t.ui.dialogs.notification({message:t.ui.texts.get("resetPasswordPopupResetSuccess")})}).fail(function(e){this.handled=!0,n.wait.close(),t.ui.dialogs.info({message:t.ui.texts.get("resetPasswordPopupResetFailed")})})},n.showLoginError=function(){n.wait.close(),t.ui.dialogs.notification({message:t.ui.texts.get("loginDialogLoginFailedMessage")})}}}(window.jQuery,window.mollify),!function(e,t){"use strict";t.MollifyHTML5Uploader=function(){var n=this;return e(document).bind("drop dragover",function(e){return e.preventDefault(),!1}),this._getUploaderSettings=function(){return t.settings["html5-uploader"]||{}},this._initDropZoneEffects=function(e){e.bind("dragover",function(t){t.stopPropagation();var n=e,r=window.dropZoneTimeout;r?clearTimeout(r):n.addClass("in"),t.target===n[0]?n.addClass("hover"):n.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,n.removeClass("in hover")},100)})},this.initWidget=function(r,i){var s=t.dom.template("mollify-tmpl-uploader-widget").appendTo(r);t.ui.handlers.localize(r);var o=i.dropElement||r,u=!1,a=i.handler,f=s.find("input").fileupload(e.extend({url:i.url,dataType:"json",dropZone:o,add:function(e,t){!u&&a.start?a.start(t.originalFiles,function(){t.submit()}):t.submit(),u=!0},progressall:function(e,t){if(!a.progress)return;var n=parseInt(t.loaded/t.total*100,10);a.progress(n,t.bitrate||!1)},done:function(e,t){a.finished&&a.finished(),u=!1},fail:function(e,t){a.failed&&a.failed(),u=!1}},n._getUploaderSettings()));o&&n._initDropZoneEffects(o)},{initUploadWidget:function(e,r){t.templates.load("mollify-uploader",t.templates.url("uploader.html")).done(function(){n.initWidget(e,r)})},initDragAndDropUploader:function(t){var r=t.container,i=e('<div style="width: 0px; height: 0px; overflow: hidden;"></div>').appendTo(r),s=e('<form enctype="multipart/form-data"></form>').appendTo(i),o=!1,u=e('<input type="file" class="mollify-mainview-uploader-input" name="uploader-html5[]" multiple="multiple"></input>').appendTo(s).fileupload(e.extend({url:"",dataType:"json",dropZone:t.dropElement,add:function(e,n){!o&&t.handler.start?t.handler.start(n.originalFiles,function(){n.submit()}):n.submit(),o=!0},progressall:function(e,n){if(!t.handler.progress)return;var r=parseInt(n.loaded/n.total*100,10);t.handler.progress(r,n.bitrate||!1)},done:function(e,n){t.handler.finished&&t.handler.finished(),o=!1},fail:function(e,n){t.handler.failed&&t.handler.failed(),o=!1}},n._getUploaderSettings())).fileupload("disable");return n._initDropZoneEffects(t.dropElement),{destroy:function(){u&&u.fileupload("destroy"),u=!1},setUrl:function(e){if(!u)return;if(!e){u.fileupload("disable");return}u.fileupload("enable").fileupload("option","url",e)}}}}}}(window.jQuery,window.mollify),!function(e,t){"use strict";t.plugin={},t.plugin.Core=function(){var n=this;return{id:"plugin-core",itemContextHandler:function(n,r,i){var s=n.id==n.root_id,o=!s&&(r.details.permission.toUpperCase()=="RW"||r.details.permission.toUpperCase()=="WD"),u=!s&&r.details.permission.toUpperCase()=="RW",a=!s&&(r.details.parent_permission.toUpperCase()=="RW"||r.details.parent_permission.toUpperCase()=="WD"),f=[];return n.is_file&&(f.push({"title-key":"actionDownloadItem",icon:"download",type:"primary",group:"download",callback:function(){t.ui.download(t.filesystem.getDownloadUrl(n))}}),f.push({title:"-"})),f.push({"title-key":"actionCopyItem",icon:"copy",callback:function(){return t.filesystem.copy(n)}}),a&&f.push({"title-key":"actionCopyItemHere",icon:"copy",callback:function(){return t.filesystem.copyHere(n)}}),o&&(f.push({"title-key":"actionMoveItem",icon:"mail-forward",callback:function(){return t.filesystem.move(n)}}),f.push({"title-key":"actionRenameItem",icon:"pencil",callback:function(){return t.filesystem.rename(n)}}),u&&f.push({"title-key":"actionDeleteItem",icon:"trash",callback:function(){var r=e.Deferred();return t.ui.dialogs.confirmation({title:n.is_file?t.ui.texts.get("deleteFileConfirmationDialogTitle"):t.ui.texts.get("deleteFolderConfirmationDialogTitle"),message:t.ui.texts.get(n.is_file?"confirmFileDeleteMessage":"confirmFolderDeleteMessage",[n.name]),callback:function(){e.when(t.filesystem.del(n)).then(r.resolve,r.reject)}}),r.promise()}})),{actions:f}},itemCollectionHandler:function(e){return{actions:[{"title-key":"actionCopyMultiple",icon:"copy",callback:function(){return t.filesystem.copy(e)}},{"title-key":"actionMoveMultiple",icon:"mail-forward",callback:function(){return t.filesystem.move(e)}},{"title-key":"actionDeleteMultiple",icon:"trash",callback:function(){return t.filesystem.del(e)}}]}}}},t.plugin.ItemDetailsPlugin=function(e,n){var r=this;return r.formatters={},r.typeConfs=!1,this.initialize=function(){r.fileSizeFormatter=new t.ui.formatters.ByteSize(new t.ui.formatters.Number(2,!1,t.ui.texts.get("decimalSeparator"))),r.timestampFormatter=new t.ui.formatters.Timestamp(t.ui.texts.get("shortDateTimeFormat"));if(e){r.typeConfs={};for(var n in e){var i=n.split(","),s=e[n];for(var o=0;o<i.length;o++){var u=i[o].trim();u.length>0&&(r.typeConfs[u]=s)}}}},this.getApplicableSpec=function(e){var t=e.is_file&&e.extension?e.extension.toLowerCase().trim():"";if(t.length===0||!r.typeConfs[t]){t=e.is_file?"[file]":"[folder]";if(!r.typeConfs[t])return r.typeConfs["*"]}return r.typeConfs[t]},this.renderItemContextDetails=function(e,n,i,s){i.addClass("loading"),t.templates.load("itemdetails-content",t.helpers.noncachedUrl(t.plugins.url("ItemDetails","content.html"))).done(function(){i.removeClass("loading"),r.renderItemDetails(e,n,{element:i.empty(),data:s})})},this.renderItemDetails=function(e,n,i){var s=r.getApplicableSpec(n),o=r.getGroups(s,i.data),u=[];for(var a=0,f=o.length;a<f;a++){var l=o[a];u.push({key:l,title:r.getGroupTitle(l),rows:r.getGroupRows(l,s,i.data)})}t.dom.template("itemdetails-template",{groups:u}).appendTo(i.element)},this.getGroups=function(e,t){var n=[];for(var i in e){var s=e[i],o=t[i];if(!o)continue;var u="file";if(i=="exif"||r.formatters[i])u=i;n.indexOf(u)<0&&n.push(u)}return n},this.getGroupTitle=function(e){if(r.formatters[e]){var n=r.formatters[e];if(n.groupTitle)return n.groupTitle;if(n["group-title-key"])return t.ui.texts.get(n["group-title-key"])}return e=="file"?t.ui.texts.get("fileItemDetailsGroupFile"):e=="exif"?t.ui.texts.get("fileItemDetailsGroupExif"):""},this.getGroupRows=function(e,t,n){if(r.formatters[e])return r.formatters[e].getGroupRows(t[e],n[e]);if(e=="exif")return r.getExifRows(t[e],n[e]);var i=[];for(var s in t){if(s=="exif"||r.formatters[s])continue;var o=t[s],u=n[s];if(!u)continue;i.push({title:r.getFileRowTitle(s,t[s]),value:r.formatFileData(s,u)})}return i},this.getFileRowTitle=function(e,n){return n.title?n.title:n["title-key"]?t.ui.texts.get(n["title-key"]):e=="name"?t.ui.texts.get("fileItemContextDataName"):e=="size"?t.ui.texts.get("fileItemContextDataSize"):e=="path"?t.ui.texts.get("fileItemContextDataPath"):e=="extension"?t.ui.texts.get("fileItemContextDataExtension"):e=="last-modified"?t.ui.texts.get("fileItemContextDataLastModified"):e=="image-size"?t.ui.texts.get("fileItemContextDataImageSize"):e},this.formatFileData=function(e,n){if(e=="size")return r.fileSizeFormatter.format(n);if(e=="last-modified")return r.timestampFormatter.format(t.helpers.parseInternalTime(n));if(e=="image-size")return t.ui.texts.get("fileItemContextDataImageSizePixels",[n]);if(r.specs[e]){var i=r.specs[e];if(i.formatter)return i.formatter(n)}return n},this.getExifRows=function(e,t){var n=[];for(var i in t){var s="",o=!0,u=0;for(var a in t[i]){var f=r.formatExifValue(i,a,t[i][a]);if(!f)continue;s+='<tr id="exif-row-'+i+"-"+a+'" class="'+(o?"exif-row-section-first":"exif-row")+'"><td class="exif-key">'+a+'</td><td class="exif-value">'+f+"</td></tr>",o=!1,u++}u>0&&n.push({title:i,value:'<table class="exif-section-'+i+'">'+s+"</table>"})}return n},this.formatExifValue=function(e,t,n){return e=="FILE"&&t=="SectionsFound"?!1:n},{id:"plugin-itemdetails",initialize:r.initialize,itemContextRequestData:function(e){if(!r.typeConfs)return!1;var t=r.getApplicableSpec(e);if(!t)return!1;var n=[];for(var i in t)n.push(i);return n},itemContextHandler:function(e,t,n){if(!n||!r.typeConfs)return!1;var i=r.getApplicableSpec(e);return i?{details:{"title-key":"pluginItemDetailsContextTitle","on-render":function(t,i){r.renderItemContextDetails(t,e,i,n)}}}:!1}}},t.plugin.ItemCollectionPlugin=function(){var n=this;return this.initialize=function(){},this.onStore=function(r){var i=e.Deferred();return t.ui.dialogs.input({title:t.ui.texts.get("pluginItemCollectionStoreDialogTitle"),message:t.ui.texts.get("pluginItemCollectionStoreDialogMessage"),defaultValue:"",yesTitle:t.ui.texts.get("pluginItemCollectionStoreDialogAction"),noTitle:t.ui.texts.get("dialogCancel"),handler:{isAcceptable:function(e){return!!e&&e.length>0},onInput:function(t){e.when(n._onStore(r,t)).then(i.resolve,i.reject)}}}),i.promise()},this._onStore=function(e,r){return t.service.post("itemcollections",{items:e,name:r}).done(function(e){n._updateNavBar(e)})},this.onAddItems=function(e,n){return t.service.post("itemcollections/"+e.id,{items:window.isArray(n)?n:[n]})},this._removeCollectionItem=function(e,n){return t.service.del("itemcollections/"+e.id+"/items",{items:window.isArray(n)?n:[n]})},this._showCollection=function(e){n._fileView.changeToFolder("ic/"+e.id)},this.editCollection=function(e,r){t.service.get("itemcollections/"+e.id).done(function(i){t.ui.dialogs.tableView({title:t.ui.texts.get("pluginItemCollectionsEditDialogTitle",e.name),buttons:[{id:"close",title:t.ui.texts.get("dialogClose")},{id:"remove",title:t.ui.texts.get("pluginItemCollectionsEditDialogRemove"),type:"secondary",cls:"btn-danger secondary"}],onButton:function(t,i){i.close(),t.id=="remove"&&n.removeCollection(e),r(t.id=="remove")},table:{key:"item_id",columns:[{id:"icon",title:"",renderer:function(e,t,n){n.html(e.is_file?'<i class="icon-file"></i>':'<i class="icon-folder-close-alt"></i>')}},{id:"name",title:t.ui.texts.get("fileListColumnTitleName")},{id:"remove",title:"",type:"action",content:'<i class="icon-trash"></i>'}]},onTableRowAction:function(t,r,i,s){i=="remove"&&n._removeCollectionItem(e,s).done(function(){r.remove(s)})},onRender:function(e,t,n){n.set(i.items),t.removeClass("loading")}})})},this._updateNavBar=function(t){n._list=t;var r=[],i={};e.each(t,function(e,t){i[t.id]=t,r.push({title:t.name,obj:t,callback:function(){n._showCollection(t)}})}),n._collectionsNav.update(r);var s=n._fileView.getCurrentFolder();s.type=="ic"&&n._collectionsNav.setActive(i[s.id])},this.removeCollection=function(e){return t.service.del("itemcollections/"+e.id).done(n._updateNavBar)},this._onShareNavItem=function(e){if(!t.plugins.exists("plugin-share"))return;t.plugins.get("plugin-share").openShares({id:"ic_"+e.id,name:e.name,shareTitle:t.ui.texts.get("pluginItemCollectionShareTitle")})},this._getItemActions=function(e){var r=[{"title-key":"pluginItemCollectionsNavEdit",callback:function(){n.editCollection(e,function(t){var r=n._fileView.getCurrentFolder();if(r.type!="ic"||r.id!=e.id)return;t?n._fileView.openInitialFolder():n._fileView.refresh()})}},{"title-key":"pluginItemCollectionsNavRemove",callback:function(){n._fileView.openInitialFolder(),n.removeCollection(e)}}];return t.plugins.exists("plugin-share")&&r.push({"title-key":"pluginItemCollectionsNavShare",callback:function(){n._onShareNavItem(e)}}),r},this._onFileViewInit=function(r){n._fileView=r,n._fileView.addCustomFolderType("ic",{onSelectFolder:function(r){var i=e.Deferred();return t.service.post("itemcollections/"+r+"/data",{rq_data:n._fileView.getDataRequest()}).done(function(e){n._collectionsNav.setActive(e.ic);var t={type:"ic",id:e.ic.id,name:e.ic.name},r={items:e.ic.items,ic:e.ic,data:e.data};i.resolve(t,r)}),i.promise()},onFolderDeselect:function(e){n._collectionsNav.setActive(!1)},onRenderFolderView:function(r,i,s,o){t.dom.template("mollify-tmpl-fileview-header-custom",{folder:r}).appendTo(s);var u={title:function(){return this.data.title?this.data.title:t.ui.texts.get(this.data["title-key"])}},a=e("#mollify-fileview-folder-actions"),f=t.dom.template("mollify-tmpl-fileview-foldertools-action",{icon:"icon-cog",dropdown:!0},u).appendTo(a);t.ui.controls.dropdown({element:f,items:n._getItemActions(i.ic),hideDelay:0,style:"submenu"}),n._fileView.addCommonFileviewActions(a)}})},this._onFileViewActivate=function(e,r){n._collectionsNav=r.addNavBar({title:t.ui.texts.get("pluginItemCollectionsNavTitle"),classes:"ic-navbar-item",items:[],dropdown:{items:n._getItemActions},onRender:t.ui.draganddrop?function(e,r,i){t.ui.draganddrop.enableDrop(r,{canDrop:function(e,t,n){return!n||n.type!="filesystemitem"?!1:!0},dropType:function(e,t,n){return!n||n.type!="filesystemitem"?!1:"copy"},onDrop:function(e,t,r){if(!r||r.type!="filesystemitem")return;var s=r.payload,o=i(e);n.onAddItems(o,s)}})}:!1}),t.service.get("itemcollections").done(n._updateNavBar)},{id:"plugin-itemcollection",initialize:n.initialize,itemCollectionHandler:function(e){return{actions:[{"title-key":"pluginItemCollectionStore",callback:function(){return n.onStore(e)}}]}},fileViewHandler:{onInit:n._onFileViewInit,onActivate:n._onFileViewActivate}}},t.plugin.ArchiverPlugin=function(){var n=this;return this.initialize=function(){},this.onCompress=function(r,i){if(!r)return;var s="",o=!1,u=t.helpers.arrayize(r);u.length==1&&(o=r[0]);var a=e.Deferred(),f=function(r){o&&(s=o.name+".zip"),t.ui.dialogs.input({title:t.ui.texts.get("pluginArchiverCompressDialogTitle"),message:t.ui.texts.get("pluginArchiverCompressDialogMessage"),defaultValue:s,yesTitle:t.ui.texts.get("pluginArchiverCompressDialogAction"),noTitle:t.ui.texts.get("dialogCancel"),handler:{isAcceptable:function(e){return!!e&&e.length>0&&(!o||e!=o.name)},onInput:function(t){e.when(n._onCompress(u,r,t)).then(a.resolve,a.reject)}}})};return i?f(i):t.ui.dialogs.folderSelector({title:t.ui.texts.get("pluginArchiverCompressDialogTitle"),message:t.ui.texts.get("pluginArchiverCompressSelectFolderDialogMessage"),actionTitle:t.ui.texts.get("ok"),handler:{onSelect:function(e){f(e)},canSelect:function(e){return!0}}}),a.promise()},this.onDownloadCompressed=function(e){return t.service.post("archiver/download",{items:e}).done(function(e){t.ui.download(t.service.url("archiver/download/"+e.id,!0))})},this._onCompress=function(e,n,r){return t.service.post("archiver/compress",{items:e,folder:n,name:r}).done(function(i){t.events.dispatch("archiver/compress",{items:e,folder:n,name:r}),t.events.dispatch("filesystem/update",{folder:n})})},this._onExtract=function(e,n){return t.service.post("archiver/extract",{item:e,folder:n}).done(function(r){t.events.dispatch("archiver/extract",{item:e,folder:n}),t.events.dispatch("filesystem/update",{folder:n})})},this._isArchive=function(e){if(!e.is_file)return!1;var t=e.extension.toLowerCase();return t=="zip"},{id:"plugin-archiver",initialize:n.initialize,getDownloadCompressedUrl:function(e){var n=!1;return window.isArray(e)?e.length==1&&(n=e[0]):n=e,n?t.service.url("archiver/download?item="+n.id,!0):!1},itemContextHandler:function(e,t,r){var i=e.id==e.root_id,s=!i&&(t.details.permission.toUpperCase()=="RW"||t.details.permission.toUpperCase()=="WD"),o=!i&&(t.details.parent_permission.toUpperCase()=="RW"||t.details.parent_permission.toUpperCase()=="WD"),u=!i&&t.folder_permission&&(t.folder_permission.toUpperCase()=="RW"||t.folder_permission.toUpperCase()=="WD");if(o&&n._isArchive(e))return{actions:[{"title-key":"pluginArchiverExtract",callback:function(){return n._onExtract(e)}}]};var a=[{"title-key":"pluginArchiverDownloadCompressed",icon:"archive",type:"primary",group:"download",callback:function(){n.onDownloadCompressed([e])}}];return t.folder&&u&&a.push({"title-key":"pluginArchiverCompress",icon:"archive",callback:function(){return n.onCompress(e,t.folder)}}),{actions:a}},itemCollectionHandler:function(e,t){return{actions:[{"title-key":"pluginArchiverCompress",icon:"archive",callback:function(){return n.onCompress(e)}},{"title-key":"pluginArchiverDownloadCompressed",icon:"archive",type:"primary",group:"download",callback:function(){return n.onDownloadCompressed(e)}}]}}}},t.plugin.FileViewerEditorPlugin=function(){var n=this;return this.initialize=function(){},this.onEdit=function(n,r){t.ui.dialogs.custom({resizable:!0,initSize:[600,400],title:t.ui.texts.get("fileViewerEditorViewEditDialogTitle"),content:'<div class="fileviewereditor-editor-content"></div>',buttons:[{id:"yes",title:t.ui.texts.get("dialogSave")},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(e,t){if(e.id=="no"){t.close();return}document.getElementById("editor-frame").contentWindow.onEditorSave(function(){t.close()},function(e,n){return t.close(),!0})},"on-show":function(t,n){var i=n.find(".fileviewereditor-editor-content"),s=e('<iframe id="editor-frame" width="100%" height:"100%" style="width:100%;height:100%;border: none;overflow: none;" />').attr("src",r.embedded);i.removeClass("loading").append(s),t.center()}})},this.onView=function(r,i,s){var o={},u=[{embedded:s.view.embedded,full:s.view.full,edit:!!s.edit,item:r}],a=u[0],f=!1;a.init=!0;var l=!1,c,h,p=!1,d,v,m=function(){d=e(window).width()-100,v=e(window).height()-100,h.css({"max-width":d+"px","max-height":v+"px"}),p&&p.css({"max-width":d+"px","max-height":v+"px"}),c.lightbox("center")};e(window).resize(m);var g=function(t){var n=t.item.id;l=t;if(o[n])return;e.ajax({type:"GET",url:t.embedded}).done(function(t){o[n]=!0,p=e("#mollify-fileviewereditor-viewer-item-"+n);var r=p.find(".mollify-fileviewereditor-viewer-item-content");r.removeClass("loading").html(t.result.html);if(t.result.size){var i=t.result.size.split(";");e("#"+t.result.resized_element_id).css({width:i[0]+"px",height:i[1]+"px"})}var s=r.find("img:first");s.length>0?s.one("load",function(){var e=s.width();!t.result.size&&e>0&&s.css({width:e+"px",height:s.height()+"px"}),m()}):m(),f||(c.lightbox("show"),f=!0)})},y=t.dom.template("mollify-tmpl-fileviewereditor-popup",{items:u},{content:function(e){return e.content}}).appendTo(e("body")),b=function(){y.remove()};c=y.lightbox({backdrop:!0,resizeToFit:!1,show:!1,onHide:b}),t.ui.process(c,["localize"]),c.find("button.close").click(function(){c.lightbox("hide")}),h=c.find(".carousel-inner");var w=y.find(".carousel").carousel({interval:!1}).on("slid",function(){var e=y.find(".mollify-fileviewereditor-viewer-item.active");g(e.tmplItem().data)});w.find(".carousel-control").click(function(){e(this).hasClass("left")?w.carousel("prev"):w.carousel("next")});var E=w.find(".mollify-fileviewereditor-viewer-tools");E.find(".mollify-fileviewereditor-viewer-item-viewinnewwindow").click(function(){c.lightbox("hide"),t.ui.window.open(l.full)}),E.find(".mollify-fileviewereditor-viewer-item-edit").click(function(){c.lightbox("hide"),n.onEdit(r,s.edit)}),g(a)},{id:"plugin-fileviewereditor",initialize:n.initialize,itemContextHandler:function(t,r,i){if(!i)return!1;var s=!!i.preview,o=!!i.view,u=!!i.edit,a={details:!1,actions:[]};return s&&(a.details={"title-key":"pluginFileViewerEditorPreview","on-render":function(t,n){n.empty().addClass("loading"),e.ajax({type:"GET",url:i.preview}).done(function(e){n.removeClass("loading").html(e.result.html)})}}),o&&a.actions.push({id:"pluginFileViewerEditorView","title-key":"pluginFileViewerEditorView",type:"primary",callback:
function(){n.onView(t,[],i)}}),u&&a.actions.push({id:"pluginFileViewerEditorView","title-key":"pluginFileViewerEditorEdit",type:"primary",callback:function(){n.onEdit(t,i.edit)}}),a}}},t.plugin.CommentPlugin=function(){var n=this;return this.initialize=function(){n._timestampFormatter=new t.ui.formatters.Timestamp(t.ui.texts.get("shortDateTimeFormat")),t.dom.importCss(t.plugins.url("Comment","style.css"))},this.getListCellContent=function(e,t){if(!e.id||e.id.length===0||!t||!t["plugin-comment-count"])return"";var n=t["plugin-comment-count"];return n[e.id]?"<div id='item-comment-count-"+e.id+"' class='filelist-item-comment-count'>"+n[e.id]+"</div>":"<div id='item-comment-count-"+e.id+"' class='filelist-item-comment-count-none'></div>"},this.renderItemContextDetails=function(e,r,i,s){i.addClass("loading"),t.templates.load("comments-content",t.helpers.noncachedUrl(t.plugins.url("Comment","content.html"))).done(function(){i.removeClass("loading"),s.count===0?n.renderItemContextComments(e,r,[],{element:i.empty(),contentTemplate:"comments-template"}):n.loadComments(r,function(t,r){n.renderItemContextComments(e,t,r,{element:i.empty(),contentTemplate:"comments-template"})})})},this.renderItemContextComments=function(r,i,s,o){t.dom.template(o.contentTemplate,i).appendTo(o.element),e("#comments-dialog-add").click(function(){var t=e("#comments-dialog-add-text").val();if(!t||t.length===0)return;n.onAddComment(i,t,r.close)}),n.updateComments(e("#comments-list"),i,s)},this.showCommentsBubble=function(r,i){var s=t.ui.controls.dynamicBubble({element:i,title:r.name,container:e("#mollify-filelist-main-items")});t.templates.load("comments-content",t.helpers.noncachedUrl(t.plugins.url("Comment","content.html"))).done(function(){s.content(t.dom.template("comments-template",r)),e("#comments-dialog-add").click(function(){var t=e("#comments-dialog-add-text").val();if(!t||t.length===0)return;n.onAddComment(r,t,s.close)}),n.loadComments(r,function(t,r){n.updateComments(e("#comments-list"),t,r)})})},this.loadComments=function(e,r){t.service.get("comment/"+e.id).done(function(t){r(e,n.processComments(t))})},this.processComments=function(e){var r=t.session.user_id,i=t.session.admin;for(var s=0,o=e.length;s<o;s++)e[s].time=n._timestampFormatter.format(t.helpers.parseInternalTime(e[s].time)),e[s].comment=e[s].comment.replace(new RegExp("\n","g"),"<br/>"),e[s].remove=i||r==e[s].user_id;return e},this.onAddComment=function(e,r,i){t.service.post("comment/"+e.id,{comment:r}).done(function(t){n.updateCommentCount(e,t.count),i&&i()})},this.onRemoveComment=function(e,r,i){t.service.del("comment/"+r.id+"/"+i).done(function(t){n.updateCommentCount(r,t.length),n.updateComments(e,r,n.processComments(t))})},this.updateCommentCount=function(e,t){var n=document.getElementById("item-comment-count-"+e.id);if(!n)return;t<1?(n.innerHTML="",n.setAttribute("class","filelist-item-comment-count-none")):(n.innerHTML=t,n.setAttribute("class","filelist-item-comment-count"))},this.updateComments=function(r,i,s){r.removeClass("loading");if(s.length===0){r.html("<span class='message'>"+t.ui.texts.get("commentsDialogNoComments")+"</span>");return}t.dom.template("comment-template",s).appendTo(r.empty()),r.find(".comment-content").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}),r.find(".comment-remove-action").click(function(t){t.preventDefault();var s=e(this).tmplItem().data;n.onRemoveComment(r,i,s.id)})},{id:"plugin-comment",initialize:n.initialize,fileViewHandler:{filelistColumns:function(){return[{id:"comment-count","request-id":"plugin-comment-count","title-key":"",width:50,content:n.getListCellContent,request:function(e){return{}},"on-click":function(t){n.showCommentsBubble(t,e("#item-comment-count-"+t.id))}}]}},itemContextHandler:function(e,t,r){return{details:{"title-key":"pluginCommentContextTitle","on-render":function(t,i){n.renderItemContextDetails(t,e,i,r)}}}}}},t.plugin.PermissionsPlugin=function(){var n=this;return this.initialize=function(){n.permissionOptions=[{title:t.ui.texts.get("pluginPermissionsValueRW"),value:"rw"},{title:t.ui.texts.get("pluginPermissionsValueWD"),value:"wd"},{title:t.ui.texts.get("pluginPermissionsValueRO"),value:"ro"},{title:t.ui.texts.get("pluginPermissionsValueNO"),value:"no"}],n.permissionOptionsByKey=t.helpers.mapByKey(n.permissionOptions,"value")},n.onOpenPermissions=function(r){var i={"new":[],modified:[],removed:[]},s=!1;t.ui.dialogs.custom({resizable:!0,initSize:[600,400],title:t.ui.texts.get("pluginPermissionsEditDialogTitle"),content:t.dom.template("mollify-tmpl-permission-editor",{item:r}),buttons:[{id:"yes",title:t.ui.texts.get("dialogSave")},{id:"no",title:t.ui.texts.get("dialogCancel")}],"on-button":function(e,n){if(e.id=="no"){n.close();return}if(i["new"].length===0&&i.modified.length===0&&i.removed.length===0)return;s.addClass("loading"),t.service.put("filesystem/permissions",i).done(n.close).fail(n.close)},"on-show":function(t,o){s=o.find("#mollify-pluginpermissions-editor-content"),e("#mollify-pluginpermissions-editor-change-item").click(function(e){return e.preventDefault(),!1}),t.center(),n.loadPermissions(r,function(e,t){s.removeClass("loading"),n.initEditor(r,e,t,i)}).fail(t.close)}})},this.processUserData=function(e){var t={users:[],groups:[],usersById:{}};for(var n=0,r=e.length;n<r;n++){var i=e[n];i.is_group=="0"?(t.users.push(i),t.usersById[i.id]=i):(t.groups.push(i),t.usersById[i.id]=i)}return t},this.loadPermissions=function(e,r){return t.service.get("filesystem/"+e.id+"/permissions?u=1").done(function(e){r(e.permissions,n.processUserData(e.users))})},this.initEditor=function(r,i,s,o){var u,a=function(e){return s.usersById[e].is_group!="0"},f=function(e,t){var n=u.findByKey(e.id);if(n)n.isnew||o.modified.push(n),n.permission=t,u.update(n);else{for(var i=0,s=o.removed.length;i<s;i++){var a=o.removed[i];if(a.user_id==e.id){o.removed.remove(i),o.modified.push(a),a.permission=t,u.add(a);return}}var f={user_id:e.id,item_id:r.id,permission:t,isnew:!0};o["new"].push(f),u.add(f)}},l=function(e){e.isnew||o.removed.push(e)},c=function(e){e.isnew||o.modified.push(e)};u=t.ui.controls.table("mollify-pluginpermissions-editor-permission-list",{key:"user_id",onRow:function(e,t){a(t.user_id)&&e.addClass("group")},columns:[{id:"user_id",title:t.ui.texts.get("pluginPermissionsEditColUser"),renderer:function(e,t,n){n.html(s.usersById[t].name).addClass("user")}},{id:"permission",title:t.ui.texts.get("pluginPermissionsEditColPermission"),type:"select",options:n.permissionOptions,valueMapper:function(e,t){return n.permissionOptionsByKey[t]},onChange:function(e,t){e.permission=t.value,c(e)},cellClass:"permission"},{id:"remove",title:"",type:"action",content:t.dom.template("mollify-tmpl-permission-editor-listremove").html()}],onRowAction:function(e,t){l(t),u.remove(t)}}),u.add(i);var h=t.ui.controls.select("mollify-pluginpermissions-editor-new-user",{none:{title:t.ui.texts.get("pluginPermissionsEditNoUser")},title:"name",onCreate:function(e,t){a(t.id)&&e.addClass("group")}});h.add(s.users),h.add(s.groups);var p=t.ui.controls.select("mollify-pluginpermissions-editor-new-permission",{values:n.permissionOptions,none:t.ui.texts.get("pluginPermissionsEditNoPermission"),title:"title"}),d=function(){h.select(!1),p.select(!1)};d(),e("#mollify-pluginpermissions-editor-new-add").click(function(){var e=h.selected();if(!e)return;var t=p.selected();if(!t)return;f(e,t.value),d()})},this.renderItemContextDetails=function(r,i,s){t.dom.template("mollify-tmpl-permission-context").appendTo(s),t.ui.process(s,["localize"]),n.loadPermissions(i,function(s,o){e("#mollify-pluginpermissions-context-content").removeClass("loading");var u=t.ui.controls.table("mollify-pluginpermissions-context-permission-list",{key:"user_id",columns:[{id:"user_id",title:t.ui.texts.get("pluginPermissionsEditColUser"),renderer:function(e,t,n){n.html(o.usersById[t].name).addClass("user")}},{id:"permission",title:t.ui.texts.get("pluginPermissionsEditColPermission"),renderer:function(e,t,r){r.html(n.permissionOptionsByKey[t].title)}}]});u.add(s),e("#mollify-pluginpermissions-context-edit").click(function(){r.close(),n.onOpenPermissions(i)})}).fail(function(e){r.close()})},{id:"plugin-permissions",initialize:n.initialize,itemContextHandler:function(e,r,i){return t.session.admin?{details:{"title-key":"pluginPermissionsContextTitle","on-render":function(t,r){n.renderItemContextDetails(t,e,r)}},actions:[{id:"pluginPermissions","title-key":"pluginPermissionsAction",callback:function(){n.onOpenPermissions(e)}}]}:!1}}},t.plugin.DropboxPlugin=function(){var n=this;return n.w=0,n.$dbE=!1,n.items=[],n.itemsByKey={},this.initialize=function(){n.itemContext=new t.ui.itemContext,t.events.addEventHandler(function(e){e.type=="filesystem/delete"&&n.onRemoveItems(t.helpers.extractValue(e.payload.items,"id"))})},this.onFileViewActivate=function(r){t.dom.template("mollify-tmpl-mainview-dropbox").appendTo(r),e("#mollify-dropbox-handle").click(function(){n.openDropbox()}),n.$dbE=e("#mollify-dropbox"),n.w=e("#mollify-dropbox-content").outerWidth();var i=function(){var t=e("#mollify-mainview-header").height();n.$dbE.css("top",t+"px").height(e(window).height()-t)};e(window).resize(i),i();if(t.ui.draganddrop){var s={canDrop:function(e,t,r){if(!r||r.type!="filesystemitem")return!1;var i=r.payload;return n.items.indexOf(i)<0},dropType:function(e,t,n){return!n||n.type!="filesystemitem"?!1:"copy"},onDrop:function(e,t,r){if(!r||r.type!="filesystemitem")return;var i=r.payload;n.onAddItem(i)}};t.ui.draganddrop.enableDrop(e("#mollify-dropbox-list"),s),t.ui.draganddrop.enableDrop(e("#mollify-dropbox-handle"),s)}var o=t.ui.controls.dropdown({element:e("#mollify-dropbox-actions"),container:e("body"),hideDelay:0,dynamic:!0,onShow:function(e,t){n.getActions(function(t){if(!t){e.hide();return}e.items(t)})},onItem:function(e,t){t?t.done(n.emptyDropbox):n.emptyDropbox()},onBlur:function(e){}});n._updateButton(),n.openDropbox(!1)},this.onFileViewDeactivate=function(){e("#mollify-dropbox").remove()},this.getActions=function(e){if(n.items.length===0){e([]);return}var r=t.helpers.getPluginActions(t.plugins.getItemCollectionPlugins(n.items,{src:"dropbox"}));r.push({title:"-"}),r.push({"title-key":"dropboxEmpty"}),e(t.helpers.cleanupActions(r))},this.openDropbox=function(e){var t=n.$dbE.hasClass("opened");if(window.def(e)){if(e==t)return}else e=!t;e?n.$dbE.addClass("opened").removeClass("closed").animate({width:n.w+""},300):n.$dbE.removeClass("opened").addClass("closed").animate({width:"0"},300)},this.emptyDropbox=function(){n.items=[],n.itemsByKey={},n.refreshList()},this.onAddItem=function(t){n.openDropbox(!0);var r=t;window.isArray(t)||(r=[t]),e.each(r,function(e,t){if(n.items.indexOf(t)>=0)return;n.items.push(t),n.itemsByKey[t.id]=t}),n.refreshList(),n._updateButton()},this.onRemoveItem=function(e){n.items.remove(e),delete n.itemsByKey[e.id],n.refreshList(),n._updateButton()},this.onRemoveItems=function(t){var r=0;e.each(t,function(e,t){var i=n.itemsByKey[t];if(!i)return;n.items.remove(i),delete n.itemsByKey[t],r++}),r>0&&(n.refreshList(),n._updateButton())},this.refreshList=function(){e("#mollify-dropbox-list").empty().append(t.dom.template("mollify-tmpl-mainview-dropbox-item",n.items));var r=e("#mollify-dropbox-list .mollify-dropbox-list-item");r.click(function(r){r.preventDefault(),r.stopPropagation();var i=e(this),s=i.tmplItem().data;return i.tooltip("hide"),n.itemContext.open({item:s,element:i,container:t.App.getElement(),viewport:t.App.getElement()}),!1}).each(function(){var n=e(this),r=n.tmplItem().data;n.tooltip({placement:"bottom",html:!0,title:t.filesystem.rootsById[r.root_id].name+(r.path.length>0?":&nbsp;"+r.path:""),trigger:"hover"})}),t.ui.draganddrop&&t.ui.draganddrop.enableDrag(r,{onDragStart:function(e,t){var n=e.tmplItem().data;return{type:"filesystemitem",payload:n}}}),e("#mollify-dropbox-list .mollify-dropbox-list-item > a.item-remove").click(function(){t.ui.hideActivePopup();var r=e(this);n.onRemoveItem(r.tmplItem().data)})},this._updateButton=function(){var t=e("#mollify-dropbox-actions > button");n.items.length>0?t.removeClass("disabled"):t.addClass("disabled")},{id:"plugin-dropbox",initialize:n.initialize,fileViewHandler:{onActivate:n.onFileViewActivate,onDeactivate:n.onFileViewDeactivate},itemContextHandler:function(e,t,r){return{actions:[{id:"pluginDropbox","title-key":"pluginDropboxAddTo",callback:function(){n.onAddItem(e),n.openDropbox(!0)}}]}},itemCollectionHandler:function(e,t){return t&&t.src=="dropbox"?!1:{actions:[{"title-key":"pluginDropboxAddTo",callback:function(){return n.onAddItem(e)}}]}}}},t.plugin.SharePlugin=function(){var n=this;return this.initialize=function(){n._timestampFormatter=new t.ui.formatters.Timestamp(t.ui.texts.get("shortDateTimeFormat")),t.App.registerView("share",{getView:function(r,i){if(r.length!=2)return!1;var s=e.Deferred(),o=r[1];return t.service.get("public/"+o+"/info/").done(function(e){if(!e||!e.type||["download","upload","prepared_download"].indexOf(e.type)<0){s.resolve(new t.ui.FullErrorView(t.ui.texts.get("shareViewInvalidRequest")));return}if(e.restriction=="private"){if(!t.session||!t.session.authenticated){s.resolve(!1);return}}else if(e.restriction=="pw"&&!e.auth){s.resolve(new n.ShareAccessPasswordView(o,e));return}s.resolve(n._getShareView(o,e))}).fail(function(){s.resolve(new t.ui.FullErrorView(t.ui.texts.get("shareViewInvalidRequest")))}),s.promise()}})},this._getShareView=function(e,r){var i=t.service.url("public/"+e,!0),s={get:function(e,n){var r=i;return e&&(r+=e),n&&(r=t.helpers.urlWithParam(r,n)),t.helpers.noncachedUrl(r)}};return r.type=="download"?new n.ShareDownloadView(e,s,r.name):r.type=="prepared_download"?new n.SharePreparedDownloadView(e,s,r.name):new n.ShareUploadView(e,s,r.name)},this.ShareAccessPasswordView=function(r,i){var s=this;this.init=function(n){s._$c=n,t.dom.loadContentInto(n,t.plugins.url("Share","public_share_access_password.html"),function(){e("#mollify-share-access-button").click(s._onAccess),e("#mollify-share-access-password").focus(),e("#mollify-share-access-password").bind("keypress",function(e){(e.keyCode||e.which)==13&&s._onAccess()})},["localize"])},this._onAccess=function(){var o=e("#mollify-share-access-password").val();if(!o||o.length===0)return;var u=window.Base64.encode(o);t.service.post("public/"+r+"/key/",{key:u}).done(function(o){if(!o.result){t.ui.dialogs.notification({message:t.ui.texts.get("shareAccessPasswordFailed")}),e("#mollify-share-access-password").focus();return}n._getShareView(r,i,u).init(s._$c)})}},this.ShareDownloadView=function(n,r,i){var s=this;this.init=function(n){t.dom.loadContentInto(n,t.plugins.url("Share","public_share_download.html"),function(){e("#mollify-share-title").text(t.ui.texts.get("shareViewDownloadTitle",i)),setTimeout(function(){t.ui.download(r.get())},1e3)},["localize"])}},this.SharePreparedDownloadView=function(n,r,i){var s=this;this.init=function(n){t.dom.loadContentInto(n,t.plugins.url("Share","public_share_prepared_download.html"),function(){e("#mollify-share-download-prepare").text(t.ui.texts.get("shareViewPreparedDownloadPreparingTitle",i)),e("#mollify-share-download").text(t.ui.texts.get("shareViewPreparedDownloadDownloadingTitle",i)),e("#mollify-share-download-error").text(t.ui.texts.get("shareViewPreparedDownloadErrorTitle",i)),t.service.get(r.get("/prepare")).done(function(n){e("#mollify-share-download-prepare").hide(),e("#mollify-share-download").show(),t.ui.download(r.get(!1,"key="+n.key))}).fail(function(){this.handled=!0,e("#mollify-share-download-prepare").hide(),e("#mollify-share-download-error").show()})},["localize"])}},this.ShareUploadView=function(r,i,s){var o=this;this.init=function(r){var a=new t.ui.formatters.Number(1,t.ui.texts.get("dataRateKbps"),t.ui.texts.get("decimalSeparator"));t.dom.loadContentInto(r,t.plugins.url("Share","public_share_upload.html"),function(){e("#mollify-share-title").text(t.ui.texts.get("shareViewUploadTitle",s)),o._uploadProgress=new n.PublicUploaderProgress(e("#mollify-share-public-upload-progress")),t.ui.uploader.initUploadWidget(e("#mollify-share-public-uploader"),{url:i.get(!1,"format=binary"),dropElement:e("#mollify-share-public"),handler:{start:function(e,n){o._uploadProgress.start(t.ui.texts.get(e.length>1?"mainviewUploadProgressManyMessage":"mainviewUploadProgressOneMessage",e.length)),n()},progress:function(e,t){var n="";t&&(n=a.format(t/1024)),o._uploadProgress.update(e,n)},finished:function(){setTimeout(function(){o._uploadProgress.success(t.ui.texts.get("mainviewFileUploadComplete"))},1e3)},failed:function(){o._uploadProgress.failure(t.ui.texts.get("mainviewFileUploadFailed"))}}})},["localize"])}},this.PublicUploaderProgress=function(e){var t=this;return t._$title=e.find(".title"),t._$speed=e.find(".speed"),t._$bar=e.find(".bar"),{start:function(n){e.removeClass("success failure"),t._$title.text(n?n:""),t._$speed.text(""),t._$bar.css("width","0%")},update:function(e,n){t._$bar.css("width",e+"%"),t._$speed.text(n?n:"")},success:function(n){e.addClass("success"),t._$bar.css("width","0%"),t._$title.text(n),t._$speed.text("")},failure:function(n){e.addClass("failure"),t._$title.text(n),t._$speed.text("")}}},this.renderItemContextDetails=function(e,r,i,s){i.addClass("loading"),t.templates.load("shares-content",t.helpers.noncachedUrl(t.plugins.url("Share","content.html"))).done(function(){i.removeClass("loading"),t.dom.template("mollify-tmpl-shares",{item:r}).appendTo(i),n.loadShares(r).done(function(e){n.initContent(r,e,i)})})},this.loadShares=function(e){return e?t.service.get("share/items/"+e.id).done(function(e){n.refreshShares(e)}):t.service.get("share/all/")},this.refreshShares=function(e){n.shares=e,n.shareIds=[];for(var t=0,r=n.shares.length;t<r;t++)n.shareIds.push(e[t].id)},this.getShare=function(e){return n.shares[n.shareIds.indexOf(e)]},this.initContent=function(r,i,s){var o=r.shareTitle?r.shareTitle:t.ui.texts.get(r.is_file?"shareDialogShareFileTitle":"shareDialogShareFolderTitle");e("#share-item-title").html(o),e("#share-item-name").html(r.name),e("#share-dialog-content").removeClass("loading"),e("#share-new").click(function(){n.onAddShare(r)}),n._context=t.ui.controls.slidePanel(e("#share-list"),{relative:!0}),n.updateShareList(r)},this.getShareLink=function(e){return t.App.getPageUrl("share/"+e.id)},this.updateShareList=function(r){e("#share-items").empty();if(n.shares.length===0){e("#share-items").html('<div class="no-share-items">'+t.ui.texts.get("shareDialogNoShares")+"</div>");return}var i={itemClass:function(){var e="item-share";this.data.active||(e+=" inactive");if(!this.data.name||this.data.name.length===0)e+=" unnamed";return e},link:function(){return n.getShareLink(this.data)}};t.dom.template("share-template",n.shares,i).appendTo("#share-items"),t.ui.process(e("#share-list"),["localize"]);if(!t.ui.clipboard)e(".share-link-copy").hide();else{var s={onMouseOver:function(e,t){t.setHandCursor(!0),e.addClass("hover")},onMouseOut:function(e){e.removeClass("hover")}};e.each(e(".share-link-copy"),function(r,i){var o=e(i).tmplItem().data;t.ui.clipboard.enableCopy(e(i),n.getShareLink(o),s)})}e(".share-link-toggle").click(function(){var t=e(this).tmplItem().data;if(!t.active)return;var n=e(this).parent(),r=n.parent().siblings(".share-link-content"),i=r.parent();return e(".share-link-content").not(r).hide(),e(".item-share").not(i).removeClass("active"),i.toggleClass("active"),r.slideToggle(),!1}),e(".item-share").hover(function(){e(".item-share").removeClass("hover"),e(this).addClass("hover")},function(){}),e(".share-edit").click(function(t){var i=e(this).tmplItem().data;n.onEditShare(r,i)}),e(".share-remove").click(function(t){var i=e(this).tmplItem().data;n.removeShare(r,i)})},this.openContextContent=function(e,r,i){var s=n._context.getContentElement().empty();t.dom.template(r,i).appendTo(s),t.ui.process(s,["localize"]),t.ui.controls.datepicker("share-validity-expirationdate-value",{format:t.ui.texts.get("shortDateTimeFormat"),time:!0}),n._context.show(!1,280)},this.closeAddEdit=function(){n._context.hide()},this.onAddShare=function(r){n.openContextContent("add-share-title","share-context-addedit-template"),e("#share-general-name").val(""),e("#share-general-active").attr("checked",!0),e("#share-access-norestriction").attr("checked",!0),e("#share-access-public-password-value").attr("placeholder",t.ui.texts.get("shareDialogShareAccessEnterPwTitle")),e("#share-addedit-btn-ok").click(function(){e("#share-access-public-password-value").removeClass("error");var t=e("#share-general-name").val(),i=e("#share-general-active").is(":checked"),s=e("#share-validity-expirationdate-value").data("mollify-datepicker").get(),o=!1;if(e("#share-access-private-loggedin").is(":checked"))o={type:"private"};else if(e("#share-access-public-password").is(":checked")){var u=e("#share-access-public-password-value").val();if(!u||u.length===0){e("#share-access-public-password-value").addClass("error");return}o={type:"pw",value:u}}e("#share-items").empty().append('<div class="loading"/>'),n.closeAddEdit(),n.addShare(r,t||"",s,i,o)}),e("#share-addedit-btn-cancel").click(function(){n.closeAddEdit()})},this.onEditShare=function(r,i){n.openContextContent("edit-share-title","share-context-addedit-template",{edit:!0}),e("#share-general-name").val(i.name),e("#share-general-active").attr("checked",i.active);var s=i.restriction=="pw";i.restriction=="pw"?e("#share-access-public-password").attr("checked",!0):i.restriction=="private"?e("#share-access-private-loggedin").attr("checked",!0):e("#share-access-norestriction").attr("checked",!0),i.expiration&&e("#share-validity-expirationdate-value").data("mollify-datepicker").set(t.helpers.parseInternalTime(i.expiration)),s?e("#share-access-public-password-value").attr("placeholder",t.ui.texts.get("shareDialogShareAccessChangePwTitle")):e("#share-access-public-password-value").attr("placeholder",t.ui.texts.get("shareDialogShareAccessEnterPwTitle")),e("#share-addedit-btn-ok").click(function(){var t=e("#share-general-name").val(),o=e("#share-general-active").is(":checked"),u=e("#share-validity-expirationdate-value").data("mollify-datepicker").get(),a=!1;if(e("#share-access-private-loggedin").is(":checked"))a={type:"private"};else if(e("#share-access-public-password").is(":checked")){var f=e("#share-access-public-password-value").val();if(!s&&(!f||f.length===0)){e("#share-access-public-password-value").addClass("error");return}a={type:"pw",value:f}}e("#share-items").empty().append('<div class="loading"/>'),n.closeAddEdit(),n.editShare(r,i.id,t||"",u,o,a)}),e("#share-addedit-btn-cancel").click(function(){n.closeAddEdit()})},this.onOpenShares=function(e){t.templates.load("shares-content",t.helpers.noncachedUrl(t.plugins.url("Share","content.html"))).done(function(){t.ui.dialogs.custom({resizable:!0,initSize:[600,470],title:e.shareTitle?e.shareTitle:t.ui.texts.get(e.is_file?"shareDialogShareFileTitle":"shareDialogShareFolderTitle"),content:t.dom.template("mollify-tmpl-shares",{item:e,bubble:!1}),buttons:[{id:"no",title:t.ui.texts.get("dialogClose")}],"on-button":function(e,t){t.close(),n.d=!1},"on-show":function(t,r){n.d=t,n.loadShares(e).done(function(t){n.initContent(e,t,r)})}})})},this.addShare=function(e,r,i,s,o){return t.service.post("share/",{item:e.id,name:r,expiration:t.helpers.formatInternalTime(i),active:s,restriction:o}).done(function(t){n.refreshShares(t),n.updateShareList(e)}).fail(n.d.close)},this.editShare=function(e,r,i,s,o,u){return t.service.put("share/"+r,{id:r,name:i,expiration:t.helpers.formatInternalTime(s),active:o,restriction:u}).done(function(a){var f=n.getShare(r);f.name=i,f.active=o,f.expiration=t.helpers.formatInternalTime(s),f.restriction=u?u.type:!1,n.updateShareList(e)}).fail(n.d.close)},this.removeShare=function(e,r){return t.service.del("share/"+r.id).done(function(t){var i=n.shareIds.indexOf(r.id);n.shareIds.splice(i,1),n.shares.splice(i,1),n.updateShareList(e)}).fail(n.d.close)},this.removeAllItemShares=function(e){return t.service.del("share/items/"+e.id)},this.getActionValidationMessages=function(n,r,i){var s=[];return e.each(r,function(e,n){var r;if(n.reason=="item_shared")r=t.ui.texts.get("pluginShareActionValidationDeleteShared",n.item.name);else{if(n.reason!="item_shared_others")return;r=t.ui.texts.get("pluginShareActionValidationDeleteSharedOthers",n.item.name)}s.push({message:r,acceptable:n.acceptable,acceptKey:n.acceptKey})}),s},this.getListCellContent=function(e,n){if(!e.id||e.id.length===0||!n||!n["plugin-share-info"])return"";var r=n["plugin-share-info"][e.id];return r?r.own>0?"<div id='item-share-info-"+e.id+"' class='filelist-item-share-info'><i class='icon-external-link'></i>&nbsp;"+r.own+"</div>":"<div id='item-share-info-"+e.id+"' class='filelist-item-share-info others' title='"+t.ui.texts.get("pluginShareFilelistColOtherShared")+"'><i class='icon-external-link'></i></div>":"<div id='item-share-info-"+e.id+"' class='filelist-item-share-info empty'></div>"},this._updateListCellContent=function(e,t){},this.showShareBubble=function(r,i){n.d=t.ui.controls.dynamicBubble({element:i,title:r.name,container:e("#mollify-filelist-main-items")}),t.templates.load("shares-content",t.helpers.noncachedUrl(t.plugins.url("Share","content.html"))).done(function(){n.d.content(t.dom.template("mollify-tmpl-shares",{item:r,bubble:!0})),n.loadShares(r).done(function(e){n.initContent(r,e,n.d.element()),n.d.position()})})},this.onActivateConfigView=function(e,r){var i=!1,s=!1,o=[],u=!1,a=function(){r.showLoading(!0),n.loadShares().done(function(e){i=e.shares[t.session.user_id],s=e.items,o=e.invalid,u.table.set(s),r.showLoading(!1)})},f=function(e){return o.length===0?!0:o.indexOf(e.id)<0};u=new t.view.ConfigListView(e,{table:{key:"id",columns:[{id:"icon",title:"",valueMapper:function(e){return f(e)?'<i class="icon-file"></i>':'<i class="icon-exclamation"></i>'}},{id:"name",title:t.ui.texts.get("fileListColumnTitleName")},{id:"count",title:t.ui.texts.get("pluginShareConfigViewCountTitle"),valueMapper:function(e){return i[e.id].length}},{id:"edit",title:"",type:"action",valueMapper:function(e){return f(e)?'<i class="icon-edit"></i>':""}},{id:"remove",title:"",type:"action",content:'<i class="icon-trash"></i>'}],onRow:function(e,t){f(t)||e.addClass("error")},onRowAction:function(e,t){e=="edit"?n.onOpenShares(t):e=="remove"&&n.removeAllItemShares(t).done(a)}}}),a()},{id:"plugin-share",backendPluginId:"Share",resources:{css:!0},initialize:n.initialize,configViewHandler:{views:function(){return[{viewId:"shares",title:t.ui.texts.get("pluginShareConfigViewNavTitle"),onActivate:n.onActivateConfigView}]}},fileViewHandler:{filelistColumns:function(){return[{id:"share-info","request-id":"plugin-share-info","title-key":"",content:n.getListCellContent,request:function(e){return{}},"on-click":function(t,r){if(!t.id||t.id.length===0||!r||!r["plugin-share-info"])return;var i=r["plugin-share-info"][t.id];if(!i)return;i.own>0&&n.showShareBubble(t,e("#item-share-info-"+t.id))}}]}},itemContextHandler:function(e,t,r){return{actions:[{id:"pluginShare","title-key":"itemContextShareMenuTitle",icon:"external-link",callback:function(){n.onOpenShares(e)}}]}},actionValidationHandler:function(){return{getValidationMessages:n.getActionValidationMessages}},openShares:n.onOpenShares}},t.plugin.SendViaEmailPlugin=function(){var t=this;return this.initialize=function(){},{id:"plugin-sendviaemail",initialize:t.initialize,itemContextHandler:function(e,t,n){return e.is_file?{actions:[{"title-key":"actionSendViaEmailSingle",callback:function(){}}]}:!1},itemCollectionHandler:function(t){var n=!1;return e.each(t,function(e,t){if(!t.is_file)return n=!0,!1}),n?!1:{actions:[{"title-key":"actionSendViaEmailMultiple",callback:function(){}}]}}}},t.plugin.RegistrationPlugin=function(){var n=this;return this.initialize=function(){t.App.registerView("registration",{getView:function(e,t){return e.length!=2?!1:e[1]=="new"?new n.NewRegistrationView(t):e[1]=="confirm"?new n.ConfirmRegistrationView(t):!1}})},this.NewRegistrationView=function(){var n=this;this.init=function(r){t.dom.loadContentInto(r,t.plugins.url("Registration","registration_create.html"),function(){e("#register-new-button").click(n.onRegister),e("#registration-new-name").focus()},["localize"])},this.onRegister=function(){e(".control-group").removeClass("error");var n=e("#registration-new-name").val(),r=e("#registration-new-pw").val(),i=e("#registration-new-pw-confirm").val(),s=e("#registration-new-email").val(),o=!0;if(!n||n.length===0)e("#registration-new-name").closest(".control-group").addClass("error"),o=!1;if(!r||r.length===0)e("#registration-new-pw").closest(".control-group").addClass("error"),o=!1;if(!i||i.length===0)e("#registration-new-pw-confirm").closest(".control-group").addClass("error"),o=!1;if(!s||s.length===0)e("#registration-new-email").closest(".control-group").addClass("error"),o=!1;if(!o)return;if(r!=i){e("#registration-new-pw").closest(".control-group").addClass("error"),e("#registration-new-pw-confirm").closest(".control-group").addClass("error");return}t.service.post("registration/create",{name:n,password:window.Base64.encode(r),email:s,data:null}).done(function(){e("#mollify-registration-form").hide(),e("#mollify-registration-main").addClass("wide"),e("#mollify-registration-success").show()}).fail(function(){this.handled=!0,t.ui.dialogs.error({message:t.ui.texts.get("registrationFailed")})})}},this.ConfirmRegistrationView=function(n){var r=this;this.init=function(i){t.dom.loadContentInto(i,t.plugins.url("Registration","registration_confirm.html"),function(){if(!n.email||n.email.length===0){e("#mollify-registration-main").addClass("complete").empty().append(t.dom.template("mollify-tmpl-registration-errormessage",{message:t.ui.texts.get("registrationInvalidConfirm")}));return}r._email=n.email,n.key&&n.key.length>0?r._confirm(r._email,n.key):(e("#mollify-registration-confirm-form").show(),e("#registration-confirm-email").val(r._email),e("#register-confirm-button").click(r.onConfirm),e("#registration-confirm-key").focus())},["localize"])},this.onConfirm=function(){e(".control-group").removeClass("error");var t=e("#registration-confirm-key").val(),n=!0;if(!t||t.length===0)e("#registration-confirm-key").closest(".control-group").addClass("error"),n=!1;if(!n)return;r._confirm(r._email,t,!0)},this._confirm=function(n,r,i){e("#mollify-registration-main").addClass("loading"),t.service.post("registration/confirm",{email:n,key:r}).done(function(t){e("#mollify-registration-confirm-form").hide(),e("#mollify-registration-main").removeClass("loading").addClass("wide"),t.require_approval?e("#mollify-registration-confirm-success-wait-approval").show():e("#mollify-registration-confirm-success").show()}).fail(function(n){e("#mollify-registration-main").removeClass("loading"),this.handled=!0,i?t.ui.dialogs.error({message:t.ui.texts.get("registrationConfirmFailed")}):e("#mollify-registration-main").addClass("wide").empty().append(t.dom.template("mollify-tmpl-registration-errormessage",{message:t.ui.texts.get("registrationConfirmFailed")}))})}},{id:"plugin-registration",initialize:n.initialize,show:function(){t.App.openPage("registration/new")}}}}(window.jQuery,window.mollify);